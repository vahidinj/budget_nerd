.sp-try-btn {
  font-size: .93em;
  padding: .32em 1.1em;
  border-radius: 999px;
  margin-top: .18em;
  box-shadow: 0 1.5px 0 #ffe6a6 inset;
}
/* Utility helpers to reduce inline styles and centralize theme tokens */
.loading-fallback { padding: 2rem; color: var(--text-strong); display:flex; flex-direction:column; align-items:center; gap:.6rem; }
.loading-fallback .spinner { width:32px; height:32px; }
.chart-loading { display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:180px; gap:.8rem; color:var(--text-muted); font-size:.75rem; letter-spacing:.05em; }
.hidden-input { display:none !important; }
.sp-body-row { justify-content:space-between; display:flex; align-items:center; }
.sp-try-align { margin-left:1.2em; margin-top:.2em; align-self:flex-start; }
.dev-bullets { margin:0 0 .4rem 1rem; padding:0; list-style:disc; font-size:.58rem; line-height:1.35; }
.hint-inline { margin-left:6px; font-weight:400; font-size:0.97em; }
.fill-100 { width:100%; height:100%; }
.sankey-toggle-panel { position:absolute; top:26px; left:4px; display:flex; flex-direction:column; gap:4px; z-index:6; }
.windowed-rows-container { overflow:auto; position:relative; }
.table-empty-message { text-align:center; padding:3em 1em; color:var(--text-muted); background:var(--surface-1); border:1px solid var(--surface-1-border); border-radius:var(--panel-radius); box-shadow:0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset; }
.table-empty-title { font-size:1.2em; margin-bottom:.5em; color:var(--text-strong); font-weight:650; }
.table-empty-sub { font-size:0.95em; color:var(--text-base); line-height:1.4; }
.sp-pulse { mix-blend-mode: screen; }
.cover-left {
  display: flex;
  flex-direction: column;
  gap: .75rem;
}
.cover-right {
  display: flex;
  flex-direction: column;
  gap: .85rem;
}
.cover-sub-sections {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: .7rem 1.1rem;
  margin: .2rem 0 1.1rem;
}
.cover-sub-sections.merged-panels {
  margin: .1rem 0 1.2rem;
}
.cover-sub-sections h2 {
  margin: 0 0 .45rem;
  font-size: .74rem;
  letter-spacing: .11em;
  text-transform: uppercase;
  font-weight: 650;
  color: var(--accent-warm);
  background: linear-gradient(90deg, var(--accent-warm), var(--accent) 70%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.cover-sub-sections .use-cases, .cover-sub-sections .trust-badges {
  background: var(--surface-1);
  border: 1px solid var(--surface-1-border);
  border-radius: 10px;
  padding: .65rem .95rem .7rem .95rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset;
  transition: background-color 200ms ease, border-color 200ms ease, box-shadow 200ms ease;
}
.cover-sub-sections .use-cases:hover, .cover-sub-sections .trust-badges:hover {
  background: var(--surface-2);
  border-color: var(--surface-2-border);
  box-shadow: 0 4px 12px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.05) inset;
}
.value-grid.merged {
  background: var(--surface-1);
  border: 1px solid var(--surface-1-border);
  border-radius: 10px;
  padding: .65rem .95rem .7rem .95rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: .7rem 1.1rem;
  margin-bottom: .7rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset;
}
.value-grid .val-item {
  background: var(--surface-2);
  border: 1px solid var(--surface-2-border);
  border-radius: 8px;
  padding: .5rem .6rem .55rem .6rem;
  color: #ffe6a6;
  font-size: .91rem;
  font-weight: 600;
  box-shadow: 0 1px 2px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.02) inset;
  transition: transform 150ms ease, box-shadow 200ms ease;
}
.value-grid .val-item:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,179,71,0.1) inset;
}
.value-grid .val-item strong {
  color: #ffb347;
  font-weight: 700;
  font-size: 1.01em;
}
/* Thematic typography refresh: adopt slightly condensed, finance-dashboard style font stack */
:root { --container-pad-y: .6rem; --container-pad-x: .9rem; 
  /* 3-level surface elevation system with softer borders */
  --surface-0: #0f1115;
  --surface-1: #141a22; --surface-1-border: rgba(255,255,255,0.06);
  --surface-2: #1a202a; --surface-2-border: rgba(255,255,255,0.08);
  --surface-3: #202835; --surface-3-border: rgba(255,255,255,0.1);
}
body, html { margin:0; font-family: "Inter", "Segoe UI", system-ui, -apple-system, "Roboto", "Helvetica Neue", Arial, sans-serif; background:var(--surface-0); color:#d9e2e8; font-feature-settings:"ss01","ss02","cv02","cv03"; font-variant-numeric: tabular-nums; -webkit-font-smoothing:antialiased; }
/* Fallback if Inter not loaded - optional self-host can be added later. */
/* Muted heading + supporting text adjustments */
:root { --text-strong:#e9eef1; --text-base:#c3cdd3; --text-muted:#80919d; --text-faint:#5b6974; 
  /* Newly consolidated design tokens (non-breaking) */
  --accent:#ffb347; --accent-hover:#ffd27f; --accent-warm:#ffe6a6;
  /* Upload CTA text color (dark blue matching theme) */
  --upload-cta-text: #123a6a;
  --upload-cta-text-shadow: 0 1px 0 rgba(0,0,0,0.45);
  /* Chart semantic tokens (used by Plot traces and small UI accents) */
  --chart-positive: var(--alloc-income-start);
  --chart-negative: var(--alloc-expense-start);
  --chart-accent: var(--accent);
  --chart-savings: var(--alloc-savings-start);
  --chart-savings-light: #c3e9ff;
  --chart-muted: var(--text-muted);
  --chart-category-1: #9d7ef7;
  --panel-bg:#161d25; --panel-border:#24303d; --panel-bg-alt:#1b242e;
  /* Unified card surface tokens for consistent panels */
  --card-surface-bg: linear-gradient(160deg, rgba(25,33,43,0.92) 0%, rgba(12,16,22,0.95) 100%);
  --card-surface-border: rgba(255,255,255,0.08);
  --card-surface-shadow: 0 6px 12px -8px rgba(0,0,0,.7), 0 1px 0 rgba(255,255,255,.02) inset;
  /* Additional surface tokens for cover and CTAs */
  --bg-1:#131a23; --bg-2:#0f1115;
  --surface:#151c24; --surface-border:#24303d;
  --accent-soft: #ffe6a6;
  --orb-star: #ffd86b;
  /* Allocation color tokens (used by allocation bars and legends) */
  --alloc-income-start:#5ad67d; --alloc-income-end:#37b468;
  --alloc-savings-start:#4db7ff; --alloc-savings-end:#1c8ad6;
  --alloc-expense-start:#ff6b6b; --alloc-expense-end:#ff9c6b;
  --alloc-unallocated-start:#9fa6b2; --alloc-unallocated-end:#c3c9d3;
  /* Account legend segment colors (fallback to alloc tokens) */
  --acct-checking:var(--alloc-income-start);
  --acct-savings:var(--alloc-savings-start);
  --acct-credit: #6a4fa8;
  /* Error / alert tokens */
  --error-bg:#470f18; --error-color:#ffd7d7; --error-border:#ff6b6b;
  --radius-sm:6px; --radius-md:8px; --radius-lg:12px; --radius-pill:999px;
  --badge-font-size: 0.56rem;
  --badge-padding-y: 0.16rem;
  --badge-padding-x: 0.45rem;
  --badge-letter-spacing: 0.08em;
  /* Unified panel corner radius across dashboard containers */
  --panel-radius:4px;
  --focus-ring:0 0 0 2px #0f1115,0 0 0 4px var(--accent);
  --link-accent:var(--accent); --link-accent-hover:var(--accent-hover);
}

/* Compact dark overrides (can be extended for light theme) */
:root.dark {
  --surface-0: #0b0e11;
  --surface-1: #0f1418; --surface-1-border: rgba(255,255,255,0.05);
  --surface-2: #141a22; --surface-2-border: rgba(255,255,255,0.07);
  --surface-3: #1a202a; --surface-3-border: rgba(255,255,255,0.09);
  --bg-1: #0f1418;
  --bg-2: #0b0e11;
  --panel-bg: var(--surface-1);
  --panel-border: var(--surface-1-border);
  --surface: #0d1418;
  --surface-border: #1b2328;
  --accent: #ffad33;
  --accent-hover: #ffd27f;
}

/* Global text tone normalization */
p, li, .tagline, .global-tagline, .value-grid span, .sample-preview .sp-foot { color:var(--text-base); }
.muted, .cover .drop-hint, .supported-note, .prefs-summary, .sample-preview .sp-metrics .lbl { color:var(--text-muted) !important; }
.faint { color:var(--text-faint) !important; }

/* Headings: slightly less saturated except hero */
h1, h2, h3, h4 { color:var(--text-strong); font-weight:650; letter-spacing:.5px; }
.cover h1.cover-global-title { filter:saturate(.92) brightness(.98); }

/* Tagline (moved) soft tone */
.global-tagline, .global-tagline.moved { color:var(--text-muted); font-weight:500; }

/* Trust & use cases panels lists a bit softer */
.trust-badges ul, .use-cases ul { color:var(--text-base); }
.trust-badges li, .use-cases li { color:var(--text-muted); }

/* Primary CTA keeps contrast; secondary & structural UI text slightly muted */
button, .btn, .primary-cta span { font-family:inherit; }

/* Table typography subtle soften */
table.txn-table td, table.txn-table th { font-family:inherit; }
table.txn-table td.desc { color:var(--text-base); }
table.txn-table td.num { color:var(--text-base); }

/* Utility classes */
.text-strong { color:var(--text-strong) !important; }
.text-base { color:var(--text-base) !important; }
.text-muted { color:var(--text-muted) !important; }
.text-faint { color:var(--text-faint) !important; }

/* Slightly reduce vivid accent inside normal body copy */
a, .dev-link { color:var(--link-accent); }
a:hover, .dev-link:hover { color:var(--link-accent-hover); }
.app-shell { max-width: 1400px; margin: 0 auto; padding: 0 1.2rem 4rem; }

/* Header: clean, professional, integrated */
.dbz-header { 
  display:flex; 
  align-items:center; 
  justify-content:space-between;
  padding:1rem 0; 
  margin-bottom:1.5rem;
  border-bottom:1px solid rgba(255,255,255,0.06);
  background:var(--surface-0);
}
.dbz-header .logo-block { 
  display:flex; 
  align-items:center; 
  gap:.75rem;
}
.dbz-header .logo-content {
  display:flex;
  flex-direction:column;
  gap:.15rem;
}
.dbz-header .logo-line {
  display:flex;
  align-items:center;
  gap:.5rem;
}
.dbz-header .brand { 
  font-size:1.35rem; 
  font-weight:650; 
  background:linear-gradient(90deg,var(--accent) 0%,var(--accent-hover) 100%);
  -webkit-background-clip:text; 
  background-clip:text; 
  color:transparent; 
  letter-spacing:-.02em;
}
.dbz-header .version-chip { 
  background:rgba(255,179,71,0.08); 
  border:1px solid rgba(255,179,71,0.15); 
  padding:.15rem .4rem; 
  border-radius:4px; 
  font-size:.65rem; 
  font-weight:600; 
  letter-spacing:.04em; 
  text-transform:uppercase; 
  color:var(--accent); 
  opacity:.85;
}
.dbz-header .tagline { 
  font-size:.72rem; 
  color:var(--text-muted); 
  font-weight:500;
  opacity:.7;
  letter-spacing:.01em;
}
.dbz-header .header-actions { 
  display:flex; 
  align-items:center; 
  gap:.5rem; 
}

/* Mascot icon spacing and responsive sizing */
.mascot-icon {
  display: inline-block;
  vertical-align: middle;
  margin-right: 0.5rem;
  width: 44px;
  height: 44px;
  flex: 0 0 auto;
  transition: filter 0.3s;
}

.mascot-saiyan-glow {
  animation: mascotSaiyanGlow 1.1s cubic-bezier(.4,0,.2,1);
  filter:
    drop-shadow(0 0 16px #ffe66a)
    drop-shadow(0 0 32px #ffe66a)
    drop-shadow(0 0 48px #fff7b2);
}

@keyframes mascotSaiyanGlow {
  0% {
    filter: none;
  }
  10% {
    filter: drop-shadow(0 0 8px #ffe66a) drop-shadow(0 0 16px #ffe66a);
  }
  40% {
    filter: drop-shadow(0 0 16px #ffe66a) drop-shadow(0 0 32px #ffe66a) drop-shadow(0 0 48px #fff7b2);
  }
  80% {
    filter: drop-shadow(0 0 24px #ffe66a) drop-shadow(0 0 48px #ffe66a) drop-shadow(0 0 64px #fff7b2);
  }
  100% {
    filter: none;
  }
}

@media (max-width: 640px) {
  .mascot-icon {
    width: 32px;
    height: 32px;
    margin-right: 0.4rem;
  }
}

/* Mobile integration: search bar full-width; place date filters + categorize below it and keep symmetry */
@media (max-width: 640px) {
  /* Make the search composite occupy the full row */
  .filters .search-composite {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    width: 100% !important;
    align-items: stretch !important;
  }

  .filters .search-composite input.filter-text {
    width: 100% !important;
    min-width: 0 !important;
    padding: .6rem .7rem !important;
    box-sizing: border-box !important;
  }

  /* Stack primary row grid (search left / date right) into a column and then place categorize below */
  .filter-primary-row.grid2 {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    align-items: stretch !important;
    width: 100% !important;
  }

  /* Make date picker and categorize controls match heights/padding */
  .filter-primary-row.grid2 .primary-right,
  .filter-primary-row.grid2 .primary-left {
    width: 100% !important;
    display:flex !important;
    flex-direction:column !important;
    gap:8px !important;
  }

  .date-picker-display, .categorize-cluster .categorize-btn, .categorize-cluster .ai-pill-toggle.compact {
    height: 40px !important;
    padding: .42rem .6rem !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
  }

  /* Place categorize cluster below the search + date area */
  .filter-primary-row.grid2 .primary-right .categorize-cluster {
    order: 100 !important;
    width: 100% !important;
    margin-top: 4px !important;
  }

  /* If categorize sits outside primary-right, ensure it's placed under search */
  .categorize-cluster { order: 200 !important; }

  /* Make categorize buttons slightly more compact to match date pickers */
  .categorize-cluster .categorize-btn.inline,
  .categorize-cluster .categorize-btn { padding: .42rem .6rem !important; font-size: .9rem !important; }

  /* Reduce chip sizes inside categorize to prevent overflow */
  .categorize-cluster .chip { padding: .28rem .48rem !important; font-size: .78rem !important; }
}

/* Stack and constrain categorize cluster on small screens */
@media (max-width: 640px) {
  .categorize-cluster {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    align-items: stretch !important;
    width: 100% !important;
    padding: 10px !important;
    box-sizing: border-box !important;
  }

  .categorize-cluster .cat-main-row,
  .categorize-cluster .cat-left-group,
  .categorize-cluster .cat-right-group {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    align-items: stretch !important;
    width: 100% !important;
  }

  .categorize-cluster .categorize-btn,
  .categorize-cluster .categorize-btn.inline,
  .categorize-cluster .ai-pill-toggle.compact,
  .categorize-cluster .cat-status-badge,
  .categorize-cluster .cat-foot-row {
    width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
  }

  /* Make tag/legend chips wrap instead of overflowing */
  .categorize-cluster .cat-left-group .chip,
  .categorize-cluster .cat-right-group .chip,
  .categorize-cluster .acct-mini-counts {
    flex: 0 1 auto !important;
    min-width: 0 !important;
    max-width: 100% !important;
    white-space: normal !important;
    overflow-wrap: anywhere !important;
  }

  /* If there are inline actions on the right, move them under the main content */
  .categorize-cluster .cat-right-group { order: 99 !important; }

  /* Reduce font-size slightly to help fit tight groups */
  .categorize-cluster, .categorize-cluster * { font-size: 0.95em !important; }
}

/* Strong exceptions for the accounts ratio (mix-bar) on very small screens.
   These rules override broader "make every child 100% width" fallbacks so the
   small ratio bar renders horizontally and keeps its colors and proportions. */
@media (max-width: 640px) {
  .metric.accounts-metric .acct-legend .mix-bar {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;
    gap: 0 !important;
    align-items: center !important;
    justify-content: flex-start !important;
    height: 8px !important;
    min-width: 40px !important;
    width: calc(100% - 0px) !important;
    overflow: hidden !important;
    background: #202a34 !important;
  }

  .metric.accounts-metric .acct-legend .mix-bar .seg {
    /* Allow inline/percentage widths from JS/markup to control segment size.
       If no inline width is present, let segments grow proportionally. */
    flex: 0 0 auto !important;
    min-width: 8px !important;
    height: 100% !important;
    display: block !important;
    opacity: 1 !important;
    filter: none !important;
    background-blend-mode: normal !important;
    border-radius: 2px !important;
    box-sizing: border-box !important;
  }

  /* If widths are applied inline (style attribute), keep them honored */
  .metric.accounts-metric .acct-legend .mix-bar .seg[style] {
    flex: 0 0 auto !important;
  }

  /* If a segment does not have an inline width provided by JS, allow it
     to flex and proportionally share the remaining space. */
  .metric.accounts-metric .acct-legend .mix-bar .seg:not([style]) {
    flex: 1 1 0 !important;
    width: auto !important;
  }

  /* Prevent the generic rule that makes children 100% from affecting mixes */
  .metric.accounts-metric .acct-legend, .metric.accounts-metric .acct-legend * {
    min-width: 0 !important;
    max-width: 100% !important;
  }

  /* Ensure the legend chips don't wrap over the mix-bar */
  .metric.accounts-metric .acct-legend .acct-mini-counts,
  .metric.accounts-metric .acct-legend .acct-legend-chips {
    display:flex !important;
    flex-wrap:wrap !important;
    gap:6px !important;
    margin-top:6px !important;
  }
}

@media (prefers-reduced-motion: reduce) {
  .mascot-icon { transition: none !important; }
}

.upload-panel { display:flex; align-items:center; gap:1rem; flex-wrap:wrap; margin:1rem 0; }

/* Upload microcopy to reassure encryption/HTTPS */
.upload-secure-note {
  font-size:0.82rem;
  color:var(--text-muted);
  margin-left:0.45rem;
  display:inline-flex;
  align-items:center;
  gap:0.4rem;
}

/* Site footer with domain and trust tagline */
.site-footer {
  margin-top:2.6rem;
  padding-top:1.1rem;
  border-top:1px solid rgba(255,255,255,0.03);
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:1rem;
  color:var(--text-muted);
  font-size:0.84rem;
}
.site-footer .brand { font-weight:700; color:var(--text-base); }
.site-footer .brand a { color:var(--link-accent); text-decoration:none; }
.site-footer .small-tag { color:var(--text-faint); font-size:0.78rem; }
.upload-btn { position:relative; display:inline-flex; align-items:center; gap:.55rem; background:linear-gradient(135deg,var(--surface-2) 0%,var(--surface-3) 70%); padding:.75rem 1.05rem; border-radius:10px; cursor:pointer; font-weight:600; font-size:.82rem; letter-spacing:.05em; text-transform:uppercase; color:var(--text-strong); border:1px solid var(--surface-2-border); box-shadow:0 4px 10px -4px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.04) inset; transition:background .25s, box-shadow .25s, transform .2s, border-color .25s; }
.upload-btn { overflow:hidden; }
.upload-btn:after { content:""; position:absolute; inset:0; border-radius:inherit; background:radial-gradient(circle at 35% 50%, rgba(255,179,71,.55), rgba(255,179,71,0) 65%); opacity:0; transform:scale(.65); pointer-events:none; mix-blend-mode:screen; }
.upload-btn:hover:after { animation:uploadPulse 1.9s ease-in-out infinite; }
@keyframes uploadPulse { 0% { opacity:0; transform:scale(.55); } 15% { opacity:.55; } 40% { opacity:.25; transform:scale(1.05); } 70% { opacity:.08; transform:scale(1.55); } 100% { opacity:0; transform:scale(1.75); } }
@media (prefers-reduced-motion: reduce) { .upload-btn:hover:after { animation:none; } }
.upload-panel.drop-active, .cover.drop-active { outline:2px dashed var(--accent); outline-offset:4px; background:#151d25; }
.upload-btn:before { content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(120deg,rgba(255,179,71,.7),rgba(255,179,71,0) 45%, rgba(90,214,125,.55)); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; opacity:.55; pointer-events:none; transition:opacity .35s; }
.upload-btn:hover { background:linear-gradient(135deg,#1f2a35 0%,#273544 70%); box-shadow:0 6px 16px -6px rgba(0,0,0,.7), 0 1px 0 rgba(255,255,255,.05) inset; }
.upload-btn:active { transform:translateY(1px); background:linear-gradient(135deg,#1a242d 0%,#22303d 70%); }
.upload-btn:focus-visible { outline:none; box-shadow:0 0 0 2px #0f1115, 0 0 0 4px var(--accent); }
.upload-btn input { position:absolute; inset:0; opacity:0; cursor:pointer; }
.upload-btn svg { width:16px; height:16px; stroke:var(--accent); }
.reset-btn { background:var(--surface-2); border:1px solid var(--surface-2-border); color:var(--text-strong); padding:.65rem .9rem; border-radius:8px; font-size:.75rem; letter-spacing:.05em; cursor:pointer; text-transform:uppercase; font-weight:600; box-shadow:0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset; transition:background-color 200ms ease, transform 150ms ease, box-shadow 200ms ease; }
.reset-btn:hover { background:var(--surface-3); transform:translateY(-1px); box-shadow:0 4px 10px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.05) inset; }
.download-actions { display:flex; gap:.55rem; margin:.9rem 0 .35rem; flex-wrap:wrap; }
.download-btn { position:relative; display:inline-flex; align-items:center; gap:.45rem; background:linear-gradient(135deg,var(--surface-2) 0%,var(--surface-3) 70%); padding:.58rem .9rem .6rem; border-radius:9px; cursor:pointer; font-weight:600; font-size:.68rem; letter-spacing:.06em; text-transform:uppercase; color:#f5f7fa; border:1px solid var(--surface-2-border); box-shadow:0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,.04) inset; transition:background 200ms ease, box-shadow 200ms ease, transform 150ms ease, border-color 200ms ease; }
.download-btn:hover { background:linear-gradient(135deg,var(--surface-3) 0%,#273544 70%); box-shadow:0 4px 12px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.05) inset; transform:translateY(-1px); }
.download-btn:active { transform:translateY(1px); background:linear-gradient(135deg,#1a242d 0%,#22303d 70%); }
/* Unified button tokens - small, medium, icon, and link styles */
.btn {
  display:inline-flex; align-items:center; justify-content:center; gap:.45rem;
  padding:.48rem .72rem; border-radius:8px; font-weight:600; font-size:.85rem; color:var(--text-strong);
  background:var(--surface-2); border:1px solid var(--surface-2-border); box-shadow:0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset;
  transition:transform 150ms ease, box-shadow 200ms ease, background-color 200ms ease, border-color 200ms ease;
}
.btn:hover {
  background:var(--surface-3);
  border-color:var(--surface-3-border);
  box-shadow:0 4px 10px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.05) inset;
  transform:translateY(-1px);
}
.btn:active { transform:translateY(1px); }
.btn:focus-visible { outline:none; box-shadow: var(--focus-ring); }
.btn.small { padding:.34rem .5rem; font-size:.78rem; border-radius:6px; }
.btn.ghost { background:transparent; border:1px solid rgba(255,255,255,.04); color:var(--text-base); box-shadow:none; }
.btn.link, .link-btn { background:transparent; border:0; padding:0; color:var(--link-accent); font-weight:600; cursor:pointer; }
.btn-icon { padding:.36rem; width:2.4rem; height:2.4rem; border-radius:8px; display:inline-grid; place-items:center; }

/* Parse-quality ring / badge styles */
.quality-metric { display:flex; align-items:center; gap:.6rem; }
.q-ring-btn { all:unset; display:inline-flex; align-items:center; gap:.6rem; cursor:pointer; border-radius:10px; padding:.3rem .6rem; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.02); }
.q-ring-btn { -webkit-tap-highlight-color: transparent; }
.q-ring-btn:focus-visible { box-shadow: var(--focus-ring); }
.q-ring { display:inline-block; width:36px; height:36px; line-height:36px; }
.q-ring-svg { width:36px; height:36px; display:block; }
.q-ring-bg { fill:none; stroke:rgba(255,255,255,0.06); stroke-width:3.2; }
.q-ring-fg { fill:none; stroke:var(--accent); stroke-width:3.2; stroke-linecap:round; transform-origin:18px 18px; transition:stroke-dashoffset .9s cubic-bezier(.2,.9,.3,1), stroke .25s; }
.q-values { display:flex; flex-direction:column; line-height:1; }
.q-label { font-weight:800; color:var(--text-strong); font-size:1rem; font-variant-numeric:tabular-nums; }
.q-text { color:var(--text-muted); font-size:.78rem; text-transform:capitalize; margin-top:0.08rem; }

/* Slight expand on hover for clearer affordance */
.q-ring-btn:hover { box-shadow:0 6px 18px rgba(0,0,0,0.5); transform: translateY(-1px); }
.q-ring-btn:active { transform: translateY(0); }

/* Mobile/touch comfortable hit area */
@media (max-width:640px) {
  .q-ring-btn { padding:.46rem .72rem; gap:.5rem; }
  .q-label { font-size:1.02rem; }
  .q-info-indicator { r:14; }
}
.q-info-indicator { fill:var(--accent); transition:filter .28s ease; pointer-events:none; }
.q-info-text { font-family:inherit; font-weight:700; }

/* Glow pulse animation applied to indicator when ring reanimates */
@keyframes ringGlow {
  0% { filter: drop-shadow(0 0 0 rgba(255,179,71,0)); }
  30% { filter: drop-shadow(0 0 6px rgba(255,179,71,0.55)); }
  60% { filter: drop-shadow(0 0 10px rgba(255,179,71,0.28)); }
 100% { filter: drop-shadow(0 0 0 rgba(255,179,71,0)); }
}
.q-ring-svg.pulse .q-info-indicator { animation:ringGlow .95s ease forwards; }

/* Reduce motion preference: no pulse animation */
@media (prefers-reduced-motion: reduce) {
  .q-ring-svg.pulse .q-info-indicator { animation:none; }
  .q-ring-fg { transition:none; }
}

/* Ensure underlying charts remain interactive: only the button captures pointer events */
.q-ring-svg * { pointer-events:none; }

/* Additional rules for rebuilt SVG */
.q-ring-svg { width:48px; height:48px; }
.q-ring-bg { stroke-width:3.6; }
.q-ring-fg { stroke: url(#qGrad); stroke-width:3.6; transform-origin:24px 24px; transition: stroke-dashoffset .85s cubic-bezier(.2,.9,.3,1), stroke .25s; }
.q-info-indicator { fill:var(--surface); stroke:var(--accent); stroke-width:1.4; }
.q-info-text { font-size:14px; fill:var(--accent-hover); font-weight:900; pointer-events:none; font-family:inherit; }
.q-ring-svg.pulse .q-info-text { transform-origin:center; animation: ringGlow .95s ease forwards; }
.q-info-icon .q-info-icon-stem { fill:var(--accent-hover); }
.q-info-icon .q-info-icon-dot { fill:var(--accent-hover); }
.q-info-icon { transform-origin:center; }
.q-ring-svg.pulse .q-info-icon { animation: ringGlow .95s ease forwards; }
.q-ring-svg.pulse .q-ring-fg { filter: drop-shadow(0 6px 14px rgba(255,179,71,0.16)); }

/* Stroke sweep animation: briefly increase dashoffset to create a sweep effect */
@keyframes ringSweep {
  0% { stroke-dashoffset: 0; }
  30% { stroke-dashoffset: -40; }
  100% { stroke-dashoffset: 0; }
}
.q-ring-svg.pulse .q-ring-fg { animation: ringSweep .9s cubic-bezier(.2,.9,.3,1); }

/* Bigger hit area and improved spacing for the metric title: left align */
.quality-metric > span { text-align:left; display:block; width:100%; }
.metric > span { text-align:left; }

/* When focused/expanded, raise z-index so popover aligns without clipping */
.q-ring-btn[aria-expanded="true"] { z-index: 40; position:relative; }

.download-btn:focus-visible { outline:none; box-shadow:0 0 0 2px #0f1115, 0 0 0 4px var(--accent); }

/* Mini undo button used inline in transaction rows */
.undo-mini {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:22px;
  min-width:22px;
  padding:0 6px;
  border-radius:6px;
  background:transparent;
  color:var(--text-base);
  border:1px solid rgba(255,255,255,0.04);
  font-size:0.78rem;
  cursor:pointer;
  transition:background .12s, color .12s, box-shadow .12s, transform .08s;
}
.undo-mini:hover { background:linear-gradient(180deg, rgba(255,179,71,0.06), rgba(255,179,71,0.03)); color:var(--accent); }
.undo-mini:active { transform:translateY(1px); }
.undo-mini:focus-visible { outline:none; box-shadow:0 0 0 2px #0f1115, 0 0 0 4px var(--accent); }

/* Tooltip hint (uses title attribute; for a styled arrow we use a pseudo-element when .has-tooltip class is set) */
.undo-mini.has-tooltip { position:relative; }
.undo-mini.has-tooltip:after {
  content: attr(data-tooltip);
  position:absolute;
  bottom: calc(100% + 8px);
  left:50%;
  transform:translateX(-50%);
  white-space:nowrap;
  background:var(--panel-bg);
  color:var(--text-base);
  padding:6px 8px;
  border-radius:6px;
  font-size:0.72rem;
  border:1px solid var(--panel-border);
  box-shadow:0 6px 18px rgba(0,0,0,.6);
  opacity:0; pointer-events:none; transition:opacity .12s ease;
}
.undo-mini.has-tooltip:hover:after, .undo-mini.has-tooltip:focus-visible:after { opacity:1; }

/* Skeleton rows */
.table-skeleton { margin:1rem 0; background:#14191f; border:1px solid #27313f; border-radius:12px; padding:1rem; }
.skeleton-row { height:28px; border-radius:6px; background:linear-gradient(90deg,#1d2732 0%,#243240 40%,#1d2732 80%); background-size:200% 100%; animation:shimmer 1.4s ease-in-out infinite; margin-bottom:.5rem; }
.skeleton-row:last-child { margin-bottom:0; }
@keyframes shimmer { 0% { background-position:0 0;} 100% { background-position:-200% 0;} }

.spinner { width:28px; height:28px; border:4px solid var(--surface-2); border-top-color:var(--accent); border-radius:50%; animation:spin 1s linear infinite; }
@keyframes spin { to { transform:rotate(360deg);} }
.error { color:#ff6b6b; font-weight:600; background:rgba(255,107,107,0.1); padding:.35rem .6rem; border-radius:6px; border:1px solid rgba(255,107,107,0.3); }

/* Legend color tags used in sample preview and help text */
.tag-income { color: #5ad67d; font-weight:700; }
.tag-savings { color: #4db7ff; font-weight:700; }
.tag-expense { color: #ff6b6b; font-weight:700; }

.metrics { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:.65rem; margin:0 0 1rem; }
.metric { background:linear-gradient(160deg, rgba(25,33,43,0.92) 0%, rgba(12,16,22,0.95) 100%); padding:.7rem .85rem; border:1px solid rgba(255,255,255,0.08); border-radius:var(--panel-radius); display:flex; flex-direction:column; gap:.3rem; box-shadow:0 6px 12px -8px rgba(0,0,0,.7), 0 1px 0 rgba(255,255,255,.02) inset; position:relative; transition:transform 150ms ease, box-shadow 200ms ease, background-color 200ms ease, border-color 200ms ease; }
.metric:hover { transform:translateY(-1px); border-color:rgba(255,255,255,0.16); box-shadow:0 10px 18px -12px rgba(0,0,0,.75), 0 1px 0 rgba(255,255,255,.04) inset; }
.metric > span, .metric .metric-head > span { font-size:.72rem; letter-spacing:.08em; text-transform:uppercase; color:var(--text-muted); font-weight:700; }
.metric strong { font-size:1.15rem; font-weight:650; color:var(--text-strong); }
.metric.composite strong { font-size:.85rem; letter-spacing:.04em; }
.metric-head { display:flex; align-items:center; justify-content:space-between; gap:.5rem; }
.metric.composite .substats { display:grid; gap:.25rem; margin-top:.1rem; }
.metric.composite .substats .row { display:flex; justify-content:space-between; font-size:.6rem; letter-spacing:.03em; }
.metric.composite .substats .row .lbl { opacity:.6; text-transform:uppercase; }
.metric.composite .substats .row .val { font-variant-numeric:tabular-nums; }
.metric.composite .substats .row { border-bottom:1px solid rgba(255,255,255,.06); padding-bottom:.15rem; }
.metric.composite .substats .row:last-child { border-bottom:0; padding-bottom:0; }
.metric.composite.status-good { border-color:rgba(90,214,125,.35); }
.metric.composite.status-warn { border-color:rgba(255,179,71,.35); }
.metric.composite.status-attn { border-color:rgba(255,107,107,.35); }
/* Subtle left accent for composite metrics */
.metric.composite:before { content:""; position:absolute; left:0; top:0; bottom:0; width:3px; border-radius:var(--radius-lg) 0 0 var(--radius-lg); background:linear-gradient(180deg, var(--accent), rgba(255,179,71,0)); opacity:.4; }
/* Status-based accent overrides */
.metric.composite.status-good:before { background:linear-gradient(180deg, #5ad67d, rgba(90,214,125,0)); opacity:.6; }
.metric.composite.status-warn:before { background:linear-gradient(180deg, #ffb347, rgba(255,179,71,0)); opacity:.6; }
.metric.composite.status-attn:before { background:linear-gradient(180deg, #ff6b6b, rgba(255,107,107,0)); opacity:.6; }
/* Accounts bubble refinements */
.metric.accounts-metric { display:flex; flex-direction:column; }
.metric.accounts-metric .possible-issues-cta { align-self:flex-start; }
.metric.accounts-metric .txns-line { display:flex; align-items:center; gap:.4rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.metric.accounts-metric .txns-line .badge-inline { margin-left:.3rem; }
.metric.accounts-metric .txns-line .label { font-size:.6rem; letter-spacing:.07em; text-transform:uppercase; opacity:.75; font-weight:600; }
.metric.accounts-metric .accounts-value { display:flex; align-items:baseline; gap:.45rem; }
.metric.accounts-metric .accounts-value .big { font-size:1.05rem; font-weight:650; }
.metric.accounts-metric .accounts-value .of-total { margin-left:0; background:transparent; border:0; color:var(--text-muted); font-weight:600; }
.metric.accounts-metric .acct-legend { grid-area:chips; display:flex; flex-direction:column; gap:.3rem; }
.metric.accounts-metric .acct-legend .mix-bar { display:flex; height:6px; background:#202a34; border:1px solid #2d3946; border-radius:4px; overflow:hidden; }
.metric.accounts-metric .acct-legend .mix-bar .seg { display:inline-block; height:100%; background:linear-gradient(90deg, #2e3a48, #2e3a48); }
.metric.accounts-metric .acct-legend .mix-bar .seg.checking { background: linear-gradient(90deg, var(--acct-checking), color-mix(in srgb, var(--acct-checking) 60%, #0f1115 40%)); }
.metric.accounts-metric .acct-legend .mix-bar .seg.savings { background: linear-gradient(90deg, var(--acct-savings), color-mix(in srgb, var(--acct-savings) 60%, #0f1115 40%)); }
.metric.accounts-metric .acct-legend .mix-bar .seg.credit-card { background: linear-gradient(90deg, var(--acct-credit), color-mix(in srgb, var(--acct-credit) 60%, #0f1115 40%)); }
.metric.accounts-metric .acct-mini-counts { margin-top:0; gap:.25rem .35rem; }
.metric .badge-inline.possible { background:rgba(255,179,71,0.1); color:#ffb347; border-color:rgba(255,179,71,0.25); }
.metric.status-warn .badge-inline.possible { background:rgba(255,179,71,0.15); color:#ffb347; border-color:rgba(255,179,71,0.3); }
.metric.status-attn .badge-inline.possible { background:rgba(255,107,107,0.1); color:#ff6b6b; border-color:rgba(255,107,107,0.25); }
.metric.status-good .badge-inline.possible { background:rgba(90,214,125,0.1); color:#5ad67d; border-color:rgba(90,214,125,0.25); }
.metric .badge-inline.possible:hover { filter:brightness(1.06); box-shadow:0 0 0 2px rgba(255,179,71,.12) inset; }
.metric .badge-inline.possible.open { filter:brightness(1.03); }
.metric .badge-inline { display:inline-block; padding:var(--badge-padding-y) var(--badge-padding-x); border-radius:6px; font-size:var(--badge-font-size); font-weight:700; letter-spacing:var(--badge-letter-spacing); background:var(--surface-2); border:1px solid var(--surface-2-border); margin-left:.4rem; transition:filter 150ms ease, box-shadow 150ms ease, transform 150ms ease; }
.metric .badge-inline:hover { transform:translateY(-1px); filter:brightness(1.1); }
.metric .badge-inline.good { background:rgba(90,214,125,0.15); color:#5ad67d; border-color:rgba(90,214,125,0.3); box-shadow:0 0 0 1px rgba(90,214,125,0.1) inset; }
.metric .badge-inline.warn { background:rgba(255,179,71,0.15); color:#ffb347; border-color:rgba(255,179,71,0.3); box-shadow:0 0 0 1px rgba(255,179,71,0.1) inset; }
.metric .badge-inline.attn { background:rgba(255,107,107,0.15); color:#ff6b6b; border-color:rgba(255,107,107,0.3); box-shadow:0 0 0 1px rgba(255,107,107,0.1) inset; }
.metric .badge-inline.pop-btn { cursor:pointer; position:relative; padding-right:.9rem; }
.metric .badge-inline.pop-btn:after { content:"▾"; position:absolute; right:.35rem; top:50%; transform:translateY(-52%); font-size:.6rem; opacity:.85; }
.metric .badge-inline.pop-btn.open:after { content:"▴"; }
.metric .badge-inline.pop-btn:hover { filter:brightness(1.05); box-shadow:0 0 0 2px rgba(77,183,255,.08) inset; }
.metric .badge-inline.pop-btn:focus { outline:2px solid #4db7ff; outline-offset:2px; }
.metric .micro { font-size:.55rem; letter-spacing:.07em; text-transform:uppercase; opacity:.6; font-weight:600; }
.metric.dual-line strong { font-size:.9rem; }
.metric.dual-line .secondary { font-size:.58rem; letter-spacing:.05em; opacity:.75; font-weight:600; margin-top:-.15rem; }
.metric .secondary { font-size:.58rem; letter-spacing:.04em; opacity:.75; font-weight:600; margin-top:.05rem; }
.allocation-bars { display:grid; gap:3px; margin-top:.2rem; }
.allocation-bars .bar-row { display:flex; align-items:center; gap:.4rem; font-size:.54rem; letter-spacing:.05em; }
.allocation-bars .bar-row .name { flex:0 0 52px; text-transform:uppercase; opacity:.68; font-weight:700; color:var(--text-muted); }
.allocation-bars .bar-row .track { position:relative; flex:1; height:6px; background:#202a34; border:1px solid #2d3946; border-radius:4px; overflow:hidden; }
.allocation-bars .bar-row .fill { position:absolute; inset:0; width:0; background:linear-gradient(90deg,#4db7ff,#5ad67d); }
.allocation-bars .bar-row.income .fill { background: linear-gradient(90deg, var(--alloc-income-start), var(--alloc-income-end)); }
.allocation-bars .bar-row.savings .fill { background: linear-gradient(90deg, var(--alloc-savings-start), var(--alloc-savings-end)); }
.allocation-bars .bar-row.expense .fill { background: linear-gradient(90deg, var(--alloc-expense-start), var(--alloc-expense-end)); }
.allocation-bars .bar-row.unallocated .fill { background: linear-gradient(90deg, var(--alloc-unallocated-start), var(--alloc-unallocated-end)); }
.allocation-bars .bar-row .pct { flex:0 0 40px; text-align:right; font-variant-numeric:tabular-nums; }
.allocation-bars.compact .bar-row .name { flex:0 0 52px; }
.acct-mini-counts { display:flex; flex-wrap:wrap; gap:.25rem .35rem; margin-top:.25rem; }
.acct-chip { background:var(--surface-2); border:1px solid var(--surface-2-border); padding:.18rem .45rem .22rem; border-radius:14px; font-size:.52rem; font-weight:600; letter-spacing:.06em; text-transform:uppercase; color:#d4d9df; white-space:nowrap; transition:transform 150ms ease, box-shadow 150ms ease; }
.acct-chip:hover { transform:translateY(-1px); box-shadow:0 2px 6px rgba(0,0,0,0.4); }
/* Align chip colors with chart palette (driven by tokens) */
.acct-chip.checking { background: color-mix(in srgb, var(--acct-checking) 10%, #0f1115 90%); border-color: color-mix(in srgb, var(--acct-checking) 20%, #0f1115 80%); color: var(--acct-checking); }
.acct-chip.savings { background: color-mix(in srgb, var(--acct-savings) 10%, #0f1115 90%); border-color: color-mix(in srgb, var(--acct-savings) 20%, #0f1115 80%); color: var(--acct-savings); }
.acct-chip.credit-card { background: color-mix(in srgb, var(--acct-credit) 12%, #0f1115 88%); border-color: color-mix(in srgb, var(--acct-credit) 22%, #0f1115 78%); color: var(--acct-credit); }
.consistency-indicator { background:#272e38; border:1px solid #37424e; color:#ffb347; padding:.15rem .4rem .2rem; border-radius:6px; font-size:.55rem; font-weight:700; cursor:help; }
.consistency-badge-wrap { position:relative; display:inline-block; margin-left:.4rem; /* allow popovers to escape clipping */ overflow: visible; }
.consistency-popover { position:absolute; top:125%; right:0; width:260px; background:#12181f; border:1px solid #2d3946; border-radius:10px; padding:.65rem .7rem .75rem; box-shadow:0 6px 18px -4px rgba(0,0,0,.55),0 2px 4px rgba(0,0,0,.5); z-index: 99999; pointer-events: auto; }
.consistency-popover:before { content:""; position:absolute; top:-6px; right:18px; width:10px; height:10px; background:#12181f; border-left:1px solid #2d3946; border-top:1px solid #2d3946; transform:rotate(45deg); }
.consistency-popover .cp-head { font-size:.6rem; letter-spacing:.08em; text-transform:uppercase; opacity:.8; margin-bottom:.45rem; font-weight:700; color:#ffb347; }
.consistency-popover .cp-head .micro { margin-left:.35rem; opacity:.75; }
.consistency-popover .cp-head .cp-subcount { margin-left:.35rem; font-size:.58rem; letter-spacing:.04em; opacity:.7; text-transform:none; font-weight:600; }
.metric.status-good .consistency-popover .cp-head { color:#5ad67d; }
.metric.status-warn .consistency-popover .cp-head { color:#ffb347; }
.metric.status-attn .consistency-popover .cp-head { color:#ff6b6b; }
.consistency-popover .cp-empty { font-size:.58rem; opacity:.7; }
.consistency-popover .cp-list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:.35rem; max-height:160px; overflow:auto; }
.consistency-popover .cp-item { display:flex; align-items:flex-start; gap:.35rem; font-size:.6rem; line-height:1.15; letter-spacing:.03em; }
.consistency-popover .cp-item .lvl-icon { font-size:.65rem; line-height:1; margin-top:2px; }
.consistency-popover .cp-item.lvl-warn .lvl-icon { color:#ffb347; }
.consistency-popover .cp-item.lvl-error .lvl-icon { color:#ff6b6b; }
.consistency-popover .cp-item.lvl-info .lvl-icon { color:#4db7ff; }
.consistency-popover .cp-close { position:absolute; top:4px; right:6px; background:none; border:0; color:#9fa6b2; font-size:.9rem; cursor:pointer; line-height:1; padding:.15rem; }
.consistency-popover .cp-close:hover { color:#e6e9ee; }
.payoff-ratio-metric { position:relative; }
.help-icon { display:inline-flex; align-items:center; justify-content:center; width:14px; height:14px; font-size:.55rem; font-weight:600; border-radius:50%; background:#25313d; color:#ffb347; margin-left:.35rem; cursor:help; position:relative; }
.help-icon:focus-visible { outline:2px solid #ffb347; }
.help-icon .tooltip { opacity:0; pointer-events:none; transition:opacity .2s; position:absolute; left:50%; top:110%; transform:translateX(-50%); background:#1f2833; color:var(--text-base); padding:.55rem .7rem; border:1px solid #2d3946; border-radius:8px; width:220px; font-size:.63rem; line-height:1.25; box-shadow:0 4px 14px -4px rgba(0,0,0,.6); z-index:10; }
.help-icon:hover .tooltip, .help-icon:focus .tooltip { opacity:1; }
/* Allocation bubble disabled micro state */
.metric .help-icon { width:16px; height:16px; background:#202a34; border:1px solid #2d3946; color:#ffb347; margin-left:.4rem; }
.metric .help-icon .tooltip { width:240px; }
.badge-payoff { display:inline-block; padding:.15rem .5rem .2rem; border-radius:6px; font-size:.75rem; letter-spacing:.04em; font-weight:600; }
.badge-payoff.surplus { background:#123f2a; color:#5ad67d; border:1px solid #2e6f4a; }
.badge-payoff.balanced { background:#2c3541; color:#ffb347; border:1px solid #3d4a57; }
.badge-payoff.deficit { background:#47232b; color:#ff6b6b; border:1px solid #6a3841; }
/* Chart notes */
.chart-notes { background:#1b222c; border:1px solid #283344; border-radius:var(--panel-radius); padding:var(--container-pad-y) var(--container-pad-x); margin: 0 0 .4rem; font-size:.7rem; line-height:1.35; }
.chart-notes ul { list-style:disc; margin:.1rem 0 0 1.1rem; padding:0; display:grid; gap:.35rem; }
.chart-notes li strong { color:#ffb347; font-weight:600; }

.filters { display:flex; flex-direction:column; gap:.4rem; margin:0 0 1rem; }
.filters.consolidated { background:#151c24; border:1px solid #24313d; padding:var(--container-pad-y) var(--container-pad-x); border-radius:var(--panel-radius); box-shadow:0 4px 14px -6px rgba(0,0,0,.55); position:relative; }
.filters.consolidated .filters-head { display:flex; align-items:center; justify-content:space-between; margin-bottom:.15rem; }
.filters-toggle { background:#19222c; border:1px solid #2c3845; color:#d5dae0; padding:.45rem .75rem .5rem; border-radius:9px; font-size:.6rem; letter-spacing:.07em; font-weight:600; text-transform:uppercase; cursor:pointer; position:relative; overflow:hidden; transition:background .3s, color .3s, border-color .3s; }
.filters-toggle:after { content:""; position:absolute; inset:0; background:radial-gradient(circle at 30% 50%,rgba(255,179,71,.4),rgba(255,179,71,0) 70%); opacity:0; transform:scale(.6); transition:opacity .5s, transform .6s; mix-blend-mode:overlay; pointer-events:none; }
.filters-toggle:hover { background:#1f2a35; }
.filters-toggle:hover:after { opacity:.55; transform:scale(1.4); }
.filters.consolidated .head-clear { margin-left:.5rem; }
.filters-panel { display:flex; flex-direction:column; gap:.25rem; animation:slideFadeInFilter .35s cubic-bezier(.4,0,.2,1); }
@keyframes slideFadeInFilter {
  /* Avoid using `transform` here to prevent creating a new stacking context on the filters container.
     Use opacity + margin changes (reflow) instead so popovers mounted outside can appear above filters. */
  0% { opacity: 0; margin-top: -6px; }
  60% { opacity: 1; margin-top: 2px; }
  100% { opacity: 1; margin-top: 0; }
}
.filter-primary-row { display:grid; grid-template-columns:1fr auto auto auto; gap:.3rem; align-items:stretch; }
.filter-primary-row.grid2 { grid-template-columns: 1fr minmax(280px, 1fr); gap:.3rem; }
.filter-primary-row.grid2 .primary-left { display:flex; flex-direction:column; gap:.55rem; }
.filter-primary-row.grid2 .primary-right { display:flex; flex-direction:column; gap:.4rem; }
@media (max-width:900px){ .filter-primary-row { grid-template-columns:1fr; } .filters-secondary-row { flex-direction:column; align-items:stretch; } }
.filters-secondary-row { display:flex; flex-direction:row; gap:.4rem; align-items:flex-start; }
.filters-secondary-row > * { align-self:stretch; }
.filters-secondary-row .type-chips { flex:1; }
.filters-secondary-row .col-toggle-group { display:flex; flex-wrap:nowrap; margin-left:auto; justify-content:flex-end; max-width:100%; overflow-x:auto; -webkit-overflow-scrolling:touch; gap:.45rem; padding-bottom:.15rem; }
@supports (scrollbar-width: none){ .filters-secondary-row .col-toggle-group { scrollbar-width:none; } }
.filters-secondary-row .col-toggle-group::-webkit-scrollbar { height:6px; }
.filters-secondary-row .col-toggle-group::-webkit-scrollbar-track { background:transparent; }
.filters-secondary-row .col-toggle-group::-webkit-scrollbar-thumb { background:#25303c; border-radius:20px; }
@media (max-width:900px){ .filters-secondary-row .col-toggle-group { margin-left:0; justify-content:flex-start; } }
.filters-advanced { background:#141b23; border:1px solid #222e2e3b; border-radius:var(--panel-radius); padding:var(--container-pad-y) var(--container-pad-x); box-shadow:0 1px 2px rgba(0,0,0,.35) inset; }
.filters-advanced-head { display:flex; align-items:center; justify-content:space-between; gap:.3rem; margin-bottom:.1rem; }
.filters-summary { font-size:.52rem; letter-spacing:.06em; opacity:.85; display:flex; gap:.35rem; color:#9fb1bd; }
.filters-advanced-body { padding-top:.1rem; }
.filters-advanced-body .filters-secondary-row { display:flex; flex-wrap:nowrap; gap:.5rem; align-items:center; }
.filters-advanced-body .type-chips,
.filters-advanced-body .source-chips,
.filters-advanced-body .col-toggle-group { display:flex; flex-wrap:nowrap; gap:.35rem; }
.filters-advanced-body .type-chips { flex:0 0 auto; }
.filters-advanced-body .source-chips { flex:1 1 auto; overflow-x:auto; -webkit-overflow-scrolling:touch; }
.filters-advanced-body .col-toggle-group { flex:0 0 auto; }
.filters-advanced-body .chip { padding:.25rem .45rem; border-radius:14px; font-size:.52rem; min-height:auto; }
.filters-advanced-body .chip.active { filter:saturate(1.1); }
.filters-advanced-body .col-toggle-btn { padding:.32rem .5rem .36rem; font-size:.5rem; }
.filters-advanced-body .col-toggle-btn .indicator { width:8px; height:8px; }
.col-toggle-group.compact { gap:.35rem .5rem; }
.filters .date-range.compact { flex-direction:row; gap:.45rem; margin-top:0; }
.filters .date-range.compact label { font-size:.55rem; }
/* Removed earlier duplicate mini categorize styles (merged into later unified block) */
.categorize-status.small { padding:.35rem .5rem .4rem; font-size:.55rem; }
/* Inline mini quick stats when collapsed */
.quick-stats.inline-mini { display:grid; grid-template-columns:repeat(auto-fit,minmax(72px,1fr)); gap:.4rem; margin:.25rem 0 .4rem; background:#141b23; border:1px solid #212d38; border-radius:10px; padding:.45rem .55rem .5rem; box-shadow:0 2px 6px -3px rgba(0,0,0,.55); animation:quickStatsPop .4s cubic-bezier(.4,0,.2,1); }
.quick-stats.inline-mini:hover { border-color:#2c3a48; }
@keyframes quickStatsPop { 0% { opacity:0; transform:translateY(-4px) scale(.97);} 55% { opacity:1; transform:translateY(1px) scale(1.01);} 100% { opacity:1; transform:translateY(0) scale(1);} }
.quick-stats.inline-mini .qstat span { font-size:.48rem; letter-spacing:.08em; }
.quick-stats.inline-mini .qstat strong { font-size:.66rem; }
.filters.consolidated .filter-text { align-self:stretch; display:flex; }
.filters.consolidated input.filter-text { height:38px; }
.filters .search-composite { position:relative; display:flex; align-items:center; }
.filters .search-composite input.filter-text { width:100%; padding-right:9.6rem; } /* leave room for date pills */
.filters .search-composite .date-range.inside-search { position:absolute; right:.4rem; top:50%; transform:translateY(-50%); display:flex; align-items:center; gap:.28rem; margin-top:0; }
.filters .search-composite .date-range.inside-search label { flex-direction:row; align-items:center; gap:.24rem; background:#161e26; border:1px solid #273545; padding:.14rem .26rem; border-radius:.38rem; font-size:.46rem; color:#9fb1bd; }
.filters .search-composite .date-range.inside-search .lbl { text-transform:uppercase; letter-spacing:.05em; opacity:.72; }
.filters .search-composite .date-range.inside-search .date-picker-display { padding:.22rem .34rem .2rem; font-size:.62rem; min-width:unset; border-radius:6px; }
.filters .search-composite .date-range.inside-search .date-picker { min-width:96px; }
.filters .search-composite:focus-within input.filter-text { outline:2px solid #3a516a; }
.filters .search-composite:focus-within .date-range.inside-search label { border-color:#314a61; box-shadow:0 0 0 1px rgba(49,74,97,.25); }
@media (max-width: 720px){
  .filters .search-composite { flex-direction:column; align-items:stretch; gap:.4rem; }
  .filters .search-composite input.filter-text { padding-right:.7rem; }
  .filters .search-composite .date-range.inside-search { position:static; transform:none; justify-content:flex-start; flex-wrap:wrap; gap:.3rem; }
}
.filter-primary-row > * { display:flex; flex-direction:column; justify-content:stretch; }
@media (max-width:900px){ .quick-stats.inline-mini { grid-template-columns:repeat(auto-fit,minmax(100px,1fr)); } }
@media (prefers-reduced-motion: reduce){ .filters-panel { animation:none; } .quick-stats.inline-mini { animation:none; } .filters-toggle:after { display:none; } }
.filters input { background:#14191f; border:1px solid #2a3848; padding:.55rem .7rem; border-radius:8px; color:var(--text-strong); font-size:.9rem; }
.filters input:focus { outline:2px solid #3a516a; }
.filters .filter-line { display:flex; flex-wrap:wrap; gap:.6rem; align-items:flex-start; }
.filters .filter-line .filter-text { flex:1 1 260px; min-width:200px; position:relative; }
/* Filter focus animation */
.filter-focus-anim {
	animation: filterFlash 1s ease-out;
}
@keyframes filterFlash {
	0% { box-shadow:0 0 0 0 rgba(255,179,71,0.0), 0 0 0 0 rgba(90,214,125,0); background:rgba(255,179,71,0.06); }
	15% { box-shadow:0 0 0 2px rgba(255,179,71,0.65), 0 0 0 6px rgba(90,214,125,0.2); background:rgba(255,179,71,0.12); }
	45% { box-shadow:0 0 0 2px rgba(255,179,71,0.4), 0 0 0 10px rgba(90,214,125,0.08); background:rgba(255,179,71,0.09); }
	70% { box-shadow:0 0 0 1px rgba(255,179,71,0.25), 0 0 0 12px rgba(90,214,125,0.03); background:rgba(255,179,71,0.05); }
	100% { box-shadow:0 0 0 1px rgba(255,179,71,0.15), 0 0 0 0 rgba(90,214,125,0); background:transparent; }
}
@media (prefers-reduced-motion: reduce) {
	.filter-focus-anim { animation:none; }
}
.filters .date-range { display:flex; align-items:flex-end; gap:.5rem; margin-top:-9px; /* fine-tuned lift for bottom border alignment */ }
.filters .date-range label { display:flex; flex-direction:column; gap:1px; font-size:.55rem; letter-spacing:.08em; text-transform:uppercase; font-weight:600; color:#8ca0b3; line-height:1; }
.filters .date-range label .lbl { opacity:.75; }
.filters .date-range input[type=date] { padding:.55rem .6rem .5rem; font-size:.75rem; letter-spacing:.03em; }

/* Custom date picker component */
.date-picker { position:relative; }
.date-picker.open { z-index:4000; }
.date-picker-display { background:#14191f; border:1px solid #2a3848; padding:.55rem .65rem .5rem; border-radius:8px; font-size:.75rem; letter-spacing:.03em; color:var(--text-base); cursor:pointer; display:inline-flex; align-items:center; gap:.35rem; min-width:120px; justify-content:space-between; }
.date-picker-display:hover { background:#18222b; border-color:#334457; }
.date-picker-display:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
.date-picker-display .dp-caret { font-size:.6rem; opacity:.7; }
.date-pop { background:#161d25; border:1px solid #24303d; border-radius:12px; padding:.65rem .7rem .7rem; box-shadow:0 10px 28px -8px rgba(0,0,0,.7); width:250px; display:flex; flex-direction:column; gap:.55rem; }
.date-pop-head { display:flex; align-items:center; justify-content:space-between; font-size:.65rem; font-weight:600; letter-spacing:.05em; text-transform:uppercase; color:#ffb347; }
.date-pop-head .nav-btn { background:#19222c; border:1px solid #2c3845; color:#d5dae0; padding:.3rem .45rem .35rem; border-radius:6px; font-size:.7rem; cursor:pointer; }
.date-pop-head .nav-btn:hover { background:#1f2a35; }
.date-pop-head .nav-btn:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
.month-label { flex:1; text-align:center; }
.weekdays { display:grid; grid-template-columns:repeat(7,1fr); font-size:.55rem; letter-spacing:.06em; text-transform:uppercase; color:#7d92a4; gap:.15rem; }
.weekdays div { text-align:center; padding:.15rem 0 .2rem; }
.days-grid { display:grid; grid-template-columns:repeat(7,1fr); gap:.15rem; }
.day-cell { background:#1b242e; border:1px solid #27323d; border-radius:6px; font-size:.62rem; line-height:1; padding:.4rem 0 .45rem; color:#d4d9df; cursor:pointer; font-weight:600; position:relative; }
.day-cell:hover { background:#22313d; border-color:#314051; }
.day-cell.selected { background:#ffb347; color:#111; border-color:#ffb347; }
.day-cell.selected:hover { background:#ffc66a; }
.day-cell.dim { opacity:.45; }
.day-cell.disabled { opacity:.25; cursor:not-allowed; text-decoration:line-through; }
.day-cell:focus-visible { outline:2px solid #ffe6a6; outline-offset:2px; }
.date-pop-foot { display:flex; justify-content:space-between; margin-top:.2rem; }
.date-pop-foot button { background:#19222c; border:1px solid #2c3845; color:#d5dae0; padding:.35rem .55rem .4rem; border-radius:8px; font-size:.55rem; letter-spacing:.07em; text-transform:uppercase; font-weight:600; cursor:pointer; }
.date-pop-foot button:hover { background:#1f2a35; }
.date-pop-foot button:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
@media (prefers-reduced-motion: reduce) { .date-pop { transition:none; } }
.clear-filters.inline { margin:0; align-self:flex-end; background:#222e3a; border:1px solid #314051; color:#d5dbe1; padding:.45rem .65rem .5rem; border-radius:8px; font-size:.55rem; letter-spacing:.06em; font-weight:600; text-transform:uppercase; }
.clear-filters.inline:hover { background:#273545; }
.categorize-btn.inline { background:linear-gradient(135deg,#1d2b33 0%,#213240 55%,#1d2b33 100%); position:relative; border:1px solid #2f3c48; color:#e5e9ee; padding:.48rem .75rem .53rem; border-radius:9px; font-size:.55rem; letter-spacing:.07em; font-weight:650; text-transform:uppercase; cursor:pointer; overflow:hidden; box-shadow:0 3px 10px -4px rgba(0,0,0,.55), 0 1px 0 rgba(255,255,255,.05) inset; transition:background .35s, box-shadow .35s, transform .2s, border-color .35s; }
.categorize-btn.inline:before { content:""; position:absolute; inset:0; padding:1px; border-radius:inherit; background:linear-gradient(115deg,rgba(255,179,71,.85),rgba(255,179,71,0) 40%, rgba(51,209,192,.8) 75%, rgba(51,209,192,0) 100%); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.55; pointer-events:none; transition:opacity .4s; }
.categorize-btn.inline:after { content:""; position:absolute; left:-40%; top:0; width:60%; height:100%; background:linear-gradient(90deg,rgba(255,255,255,.0),rgba(255,255,255,.55),rgba(255,255,255,0)); transform:skewX(-25deg) translateX(-120%); opacity:.0; }
.categorize-btn.inline:hover { background:linear-gradient(135deg,#223544 0%,#294153 60%); box-shadow:0 5px 16px -6px rgba(0,0,0,.7), 0 1px 0 rgba(255,255,255,.06) inset; }
.categorize-btn.inline:hover:before { opacity:.75; }
.categorize-btn.inline:hover:after { animation:catSheen 1.4s ease-in-out; }
.categorize-btn.inline:active { transform:translateY(1px); }
.categorize-btn.inline:focus-visible { outline:none; box-shadow:0 0 0 2px #0f1115, 0 0 0 4px #ffb347; }
@keyframes catSheen { 0% { transform:skewX(-25deg) translateX(-120%); opacity:0; } 25% { opacity:.4; } 55% { opacity:.0; } 100% { transform:skewX(-25deg) translateX(250%); opacity:0; } }
@media (prefers-reduced-motion: reduce) { .categorize-btn.inline:hover:after { animation:none; } }
.categorize-btn.inline[disabled] { cursor:progress; opacity:.7; filter:saturate(.4); }
.categorize-btn.inline.needs-action { animation:catAttention 3.5s ease-in-out infinite; }
@keyframes catAttention { 0% { box-shadow:0 0 0 0 rgba(255,179,71,.0), 0 0 0 0 rgba(90,214,125,0); }
 12% { box-shadow:0 0 0 0 rgba(255,179,71,.55), 0 0 0 6px rgba(255,179,71,0.0); }
 26% { box-shadow:0 0 0 2px rgba(255,179,71,.45), 0 0 0 10px rgba(255,179,71,0); }
 40% { box-shadow:0 0 0 1px rgba(255,179,71,.3), 0 0 0 0 rgba(255,179,71,0); }
 100% { box-shadow:0 0 0 0 rgba(255,179,71,0), 0 0 0 0 rgba(255,179,71,0); }}
@media (prefers-reduced-motion: reduce) { .categorize-btn.inline.needs-action { animation:none; } }
.categorize-block { display:flex; flex-direction:column; gap:.4rem; max-width:320px; }
.categorize-disclaimer { background:#1b242e; border:1px solid #27323d; padding:.45rem .55rem .5rem; border-radius:8px; font-size:.55rem; line-height:1.25; letter-spacing:.04em; color:#b8c2cc; box-shadow:0 2px 4px rgba(0,0,0,.4); }
.categorize-disclaimer strong { color:#ffb347; font-weight:700; }
.categorize-disclaimer em { font-style:normal; color:#ff9c40; font-weight:600; }
.categorize-disclaimer.compact { padding:.3rem .5rem .4rem; font-size:.5rem; opacity:.75; }
.categorize-status { display:inline-flex; align-items:center; gap:.35rem; background:#123f2a; border:1px solid #2c6f4a; color:#5ad67d; font-size:.55rem; font-weight:650; letter-spacing:.07em; padding:.45rem .6rem .5rem; border-radius:9px; position:relative; }
.categorize-status:before { content:""; width:6px; height:6px; border-radius:50%; background:#5ad67d; box-shadow:0 0 0 0 rgba(90,214,125,.5); animation:catPulse 2.2s ease-in-out infinite; }
/* Enhanced categorized pulse with text emphasis */
.categorize-status.categorized { gap:.4rem; }
.categorize-status.categorized .label { position:relative; font-weight:700; letter-spacing:.09em; text-transform:uppercase; animation:catWordPulse 2.6s ease-in-out infinite; }
/* AI refinement badge (small) */
.ai-refine-indicator { 
  display:inline-flex; align-items:center; justify-content:center;
  font-size:.45rem; line-height:1; font-weight:700; letter-spacing:.08em; 
  background:#18252e; color:#5ad67d; padding:.18rem .32rem .22rem; border:1px solid #28503d; 
  border-radius:6px; box-shadow:0 0 0 1px rgba(255,255,255,0.04) inset, 0 1px 2px rgba(0,0,0,.4);
  opacity:0; transform:translateY(-2px) scale(.9); transition:opacity .28s ease, transform .35s ease;
}
.ai-refine-indicator.active { opacity:1; transform:translateY(0) scale(1); animation:aiRefinePulse 2.4s ease-in-out infinite; }
/* Inline AI progress bar */
.ai-progress-wrap { position:relative; display:flex; align-items:center; gap:.6rem; min-height:1.1rem; }
.ai-inline-progress { position:relative; width:120px; height:4px; background:#18242d; border:1px solid #243542; border-radius:3px; overflow:hidden; opacity:0; transform:translateY(2px); transition:opacity .35s ease, transform .35s ease; }
.ai-inline-progress.active { opacity:1; transform:translateY(0); }
.ai-inline-progress.loading { width:90px; }
.ai-inline-progress .bar { position:absolute; inset:0; background:linear-gradient(90deg,rgba(255,179,71,0),#ffb347 35%,#ffb347 65%,rgba(255,179,71,0)); animation:aiSwipe 1.4s cubic-bezier(.4,0,.2,1) infinite; }
.ai-inline-progress.active .bar { animation-duration:1.1s; background:linear-gradient(90deg,rgba(90,214,125,0),#5ad67d 32%,#5ad67d 68%,rgba(90,214,125,0)); }
@keyframes aiSwipe { 0% { transform:translateX(-80%);} 50% { transform:translateX(15%);} 100% { transform:translateX(110%);} }
@media (prefers-reduced-motion: reduce){ .ai-inline-progress .bar { animation:aiSwipe 2.2s linear infinite; } }
/* CategorizeCluster layout */
.categorize-cluster { --gap:0.6rem; background:linear-gradient(145deg,#18222d,#151b24); border:1px solid #253445; padding:.55rem .75rem .55rem; border-radius:var(--panel-radius); display:flex; flex-direction:column; gap:.45rem; position:relative; box-shadow:0 4px 10px -4px rgba(0,0,0,.4), 0 2px 0 rgba(255,255,255,.02) inset; }
.filter-primary-row.grid2 .primary-right .categorize-cluster { align-self:stretch; }
.filter-primary-row.grid2 .search-composite input.filter-text { height:38px; }
.filter-primary-row.grid2 .primary-right .categorize-cluster .cat-main-row { min-height:38px; }
.filter-primary-row.grid2 .primary-right .categorize-cluster .categorize-btn.revamp-cat { padding:.55rem .85rem .6rem; }
.filter-primary-row.grid2 .primary-right .categorize-cluster .ai-pill-toggle.compact { height:32px; padding:.18rem .65rem; }
.filter-primary-row.grid2 .primary-right .categorize-cluster .cat-status-badge { padding:.28rem .5rem; }
.filter-primary-row.grid2 .primary-right .categorize-cluster .cat-sep { margin:0 .1rem; }
.categorize-cluster:before { content:""; position:absolute; inset:0; border-radius:inherit; background:linear-gradient(120deg,rgba(255,180,71,0.08),rgba(90,214,125,0.05) 40%,rgba(157,126,247,0.05)); mix-blend-mode:overlay; pointer-events:none; }
.cat-main-row { display:flex; align-items:center; gap:.55rem; justify-content:space-between; }
.cat-main-row > * { flex:0 0 auto; }
.cat-main-row .cat-sep { flex:0 0 1px; }
.categorize-cluster .cat-left-group,
.categorize-cluster .cat-right-group { display:flex; align-items:center; gap:.4rem; flex-wrap:nowrap; }
.categorize-cluster .cat-left-group .categorize-btn { margin:0; }
.categorize-cluster .consistency-badge-wrap { margin-left:0; }
.cat-foot-row { min-height:1rem; font-size:.62rem; letter-spacing:.25px; color:#9bb3c9; display:flex; align-items:center; }
.cat-foot-row .cat-foot-msg { animation:fadeIn .35s ease; }
.cat-foot-row .hint { opacity:.75; }
.cat-status-badge { display:inline-flex; align-items:center; gap:.45rem; background:#1d2a36; border:1px solid #284154; padding:.35rem .55rem; border-radius:1rem; font-size:.62rem; font-weight:600; letter-spacing:.5px; position:relative; }
.cat-status-badge .cat-status-dot { width:.5rem; height:.5rem; border-radius:50%; background:linear-gradient(140deg,#5ad67d,#37b468); box-shadow:0 0 0 2px #132029,0 0 6px -1px #5ad67d; }
.cat-status-badge .ai-refine-indicator { margin-left:.15rem; }
.cat-refine-slot { width:1.1rem; display:inline-flex; justify-content:flex-start; }
.ai-pill-toggle.compact { height:32px; font-size:.6rem; padding:.18rem .65rem .18rem .55rem; border-radius:1rem; background:#202c37; border:1px solid #2d3d4c; display:inline-flex; align-items:center; gap:.4rem; position:relative; font-weight:600; letter-spacing:.4px; }
.ai-pill-toggle.compact.active { background:#253541; border-color:#335068; }
.ai-pill-toggle.compact .dot { width:.55rem; height:.55rem; border-radius:50%; background:linear-gradient(140deg,#4fb2ff,#1c8ad6); box-shadow:0 0 0 2px #16232d; }
.ai-pill-label { text-transform:uppercase; }
.revamp-cat.large.inline.needs-action { box-shadow:0 0 0 1px #ffb347,0 0 14px -2px rgba(255,179,71,.6); }
.cat-sep { width:1px; align-self:stretch; background:linear-gradient(to bottom,rgba(255,255,255,.08),rgba(255,255,255,.05) 30%,rgba(255,255,255,.05) 70%,rgba(255,255,255,.08)); }
.cat-spinner { width:.9rem; height:.9rem; border:.14rem solid #284154; border-top-color:#ffb347; border-radius:50%; animation:spin .8s linear infinite; }
@keyframes spin { to { transform:rotate(360deg); } }
.categorize-cluster .categorize-btn { position:relative; }
@media (max-width: 880px){
  .categorize-cluster { padding:.65rem .7rem .55rem; }
  .cat-foot-row { font-size:.6rem; }
  .ai-pill-toggle.compact { height:1.85rem; }
}
.ai-refine-slot { display:inline-flex; align-items:center; justify-content:center; min-width:20px; min-height:16px; }
@keyframes aiRefinePulse { 0%,100% { filter:brightness(1); opacity:.85; } 50% { filter:brightness(1.15); opacity:1; } }
@media (prefers-reduced-motion: reduce){ .ai-refine-indicator { animation:none; } }
@keyframes catWordPulse { 0% { text-shadow:0 0 0 rgba(90,214,125,0), 0 0 0 rgba(90,214,125,0); opacity:.85; }
 35% { text-shadow:0 0 6px rgba(90,214,125,.55), 0 0 14px rgba(90,214,125,.25); opacity:1; }
 70% { text-shadow:0 0 3px rgba(90,214,125,.4), 0 0 10px rgba(90,214,125,.15); opacity:.92; }
 100% { text-shadow:0 0 0 rgba(90,214,125,0), 0 0 0 rgba(90,214,125,0); opacity:.85; } }
@media (prefers-reduced-motion: reduce){ .categorize-status.categorized .label { animation:none; text-shadow:none; } }
@keyframes catPulse { 0% { transform:scale(.85); box-shadow:0 0 0 0 rgba(90,214,125,.45);} 50% { transform:scale(1.3); box-shadow:0 0 0 6px rgba(90,214,125,0);} 100% { transform:scale(.85); box-shadow:0 0 0 0 rgba(90,214,125,.45);} }
@media (prefers-reduced-motion: reduce) { .categorize-status:before { animation:none; } }
/* Ultra Upload button enhancement */
.primary-cta.primary-cta--ultra { position:relative; overflow:hidden; --mx:.5; --my:.5; background:radial-gradient(circle at calc(var(--mx)*100%) calc(var(--my)*100%), color-mix(in srgb, var(--accent-hover) 20%, var(--accent) 80%) 0%, var(--accent) 50%) !important; color:color-mix(in srgb, var(--text-strong) 95%, #000 5%); padding:.92rem 1.28rem .95rem; border-radius:16px; }
.primary-cta.primary-cta--ultra:before { content:""; position:absolute; inset:-1px; padding:1px; border-radius:inherit; background:conic-gradient(from 0deg at calc(var(--mx)*100%) calc(var(--my)*100%), color-mix(in srgb,var(--accent-soft) 90%, rgba(255,255,255,.95) 10%), rgba(255,255,255,0) 25%, color-mix(in srgb,var(--accent-soft) 60%, rgba(255,255,255,.4) 40%)); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.55; pointer-events:none; transition:opacity .6s; }
.primary-cta.primary-cta--ultra:after { content:""; position:absolute; inset:0; background:radial-gradient(circle at calc(var(--mx)*100%) calc(var(--my)*100%), color-mix(in srgb,var(--accent-soft) 70%, rgba(255,255,255,0.4) 30%), rgba(255,255,255,0) 60%); mix-blend-mode:overlay; opacity:.65; pointer-events:none; transition:opacity .35s; }
.primary-cta.primary-cta--ultra:hover:before { opacity:.85; }
.primary-cta.primary-cta--ultra:hover:after { opacity:.85; }
.primary-cta.primary-cta--ultra .orb-icon { filter:drop-shadow(0 0 6px color-mix(in srgb,var(--accent-soft) 70%, rgba(255,255,255,.2) 30%)); }
.primary-cta.primary-cta--ultra:active { transform:translateY(1px) scale(.995); }
.primary-cta.primary-cta--ultra { box-shadow:0 12px 30px -10px color-mix(in srgb,var(--accent) 40%, #000 60%), 0 6px 16px -6px rgba(0,0,0,.65), 0 0 0 1px rgba(255,255,255,.06) inset; }
.primary-cta.primary-cta--ultra:hover { box-shadow:0 14px 34px -12px color-mix(in srgb,var(--accent) 50%, #000 50%), 0 8px 20px -8px rgba(0,0,0,.7), 0 0 0 1px rgba(255,255,255,.08) inset; }
@media (prefers-reduced-motion: reduce) { .primary-cta.primary-cta--ultra { transition:none; } }
.primary-cta.primary-cta--ultra { perspective:600px; }
.primary-cta.primary-cta--ultra span, .primary-cta.primary-cta--ultra .orb-icon { position:relative; z-index:2; }
.primary-cta.primary-cta--ultra { --tiltX: calc((var(--my) - .5) * -10deg); --tiltY: calc((var(--mx) - .5) * 10deg); transform:rotateX(var(--tiltX)) rotateY(var(--tiltY)); transition:transform .12s ease, box-shadow .32s, background-position .9s; }
.primary-cta.primary-cta--ultra:hover { transform:rotateX(var(--tiltX)) rotateY(var(--tiltY)) translateY(-2px); }
.primary-cta.primary-cta--ultra:focus-visible { box-shadow: var(--focus-ring); }
.primary-cta.primary-cta--ultra .particles { position:absolute; inset:0; pointer-events:none; }
.primary-cta.primary-cta--ultra .particles i { position:absolute; width:6px; height:6px; background:color-mix(in srgb,var(--accent-soft) 80%, rgba(255,255,255,.2) 20%); border-radius:50%; top:50%; left:50%; animation:uploadDrift 3.2s linear infinite; opacity:0; }
.primary-cta.primary-cta--ultra:before { content:""; position:absolute; inset:-1px; padding:1px; border-radius:inherit; background:conic-gradient(from 0deg at calc(var(--mx)*100%) calc(var(--my)*100%), rgba(255,255,255,.8), rgba(255,255,255,0) 25%, rgba(255,255,255,.4) 40%, rgba(255,255,255,0) 60%, rgba(255,255,255,.7) 75%, rgba(255,255,255,0) 100%); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.55; pointer-events:none; transition:opacity .6s; }
.primary-cta.primary-cta--ultra:after { content:""; position:absolute; inset:0; background:radial-gradient(circle at calc(var(--mx)*100%) calc(var(--my)*100%), rgba(255,255,255,.4), rgba(255,255,255,0) 60%); mix-blend-mode:overlay; opacity:.65; pointer-events:none; transition:opacity .35s; }
.primary-cta.primary-cta--ultra:hover:before { opacity:.85; }
.primary-cta.primary-cta--ultra:hover:after { opacity:.85; }
.primary-cta.primary-cta--ultra .orb-icon { filter:drop-shadow(0 0 6px rgba(255,255,255,.55)); }
.primary-cta.primary-cta--ultra:active { transform:translateY(1px) scale(.98); }
.primary-cta.primary-cta--ultra { box-shadow:0 10px 24px -8px rgba(255,136,0,.55), 0 4px 12px -4px rgba(0,0,0,.7), 0 0 0 1px rgba(255,255,255,.15) inset; }
.primary-cta.primary-cta--ultra:hover { box-shadow:0 12px 30px -10px rgba(255,140,10,.65), 0 6px 16px -6px rgba(0,0,0,.75), 0 0 0 1px rgba(255,255,255,.25) inset; }
@media (prefers-reduced-motion: reduce) { .primary-cta.primary-cta--ultra { transition:none; } }
.primary-cta.primary-cta--ultra { perspective:600px; }
.primary-cta.primary-cta--ultra span, .primary-cta.primary-cta--ultra .orb-icon { position:relative; z-index:2; }
.primary-cta.primary-cta--ultra { --tiltX: calc((var(--my) - .5) * -14deg); --tiltY: calc((var(--mx) - .5) * 14deg); transform:rotateX(var(--tiltX)) rotateY(var(--tiltY)); transition:transform .12s ease, box-shadow .4s, background-position 1s; }
.primary-cta.primary-cta--ultra:hover { transform:rotateX(var(--tiltX)) rotateY(var(--tiltY)) translateY(-2px); }
.primary-cta.primary-cta--ultra:focus-visible { box-shadow:0 0 0 3px #0f1115, 0 0 0 6px #ffe6a6; }
.primary-cta.primary-cta--ultra .particles { position:absolute; inset:0; pointer-events:none; }
.primary-cta.primary-cta--ultra .particles i { position:absolute; width:6px; height:6px; background:rgba(255,255,255,.85); border-radius:50%; top:50%; left:50%; animation:uploadDrift 3.2s linear infinite; opacity:0; }
@keyframes uploadDrift { 0% { transform:translate(-50%,-50%) scale(.3); opacity:0; } 10% { opacity:.8; } 60% { opacity:.4; } 100% { transform:translate(calc(-50% + (var(--dx)*1px)), calc(-50% + (var(--dy)*1px))) scale(0); opacity:0; } }
.type-chips { display:flex; flex-wrap:wrap; gap:.5rem; }
.chip { background:var(--surface-2); color:#d4d9df; border:1px solid var(--surface-2-border); padding:.35rem .65rem; border-radius:16px; font-size:.7rem; letter-spacing:.05em; text-transform:uppercase; cursor:pointer; transition:all .25s, transform 150ms ease; box-shadow:0 1px 2px rgba(0,0,0,0.3); }
.chip { min-height:34px; }
.chip.active { background:#ffb347; color:#111; border-color:#ffb347; box-shadow:0 2px 6px rgba(255,179,71,0.4); }
.chip:hover { transform:translateY(-2px); box-shadow:0 4px 10px rgba(0,0,0,0.5); }
.clear-filters { background:var(--surface-2); border:1px solid var(--surface-2-border); color:#d5dbe1; padding:.35rem .7rem; border-radius:8px; font-size:.65rem; letter-spacing:.05em; cursor:pointer; text-transform:uppercase; font-weight:600; margin-top:.4rem; box-shadow:0 1px 2px rgba(0,0,0,0.3); transition:background-color 200ms ease, transform 150ms ease, box-shadow 200ms ease; }
.clear-filters:hover { background:var(--surface-3); transform:translateY(-1px); box-shadow:0 4px 10px rgba(0,0,0,0.5); }

/* Column toggles */
.col-toggle-group { display:flex; flex-wrap:wrap; gap:.4rem .65rem; margin-top:.35rem; font-size:.65rem; }
.col-toggle { display:inline-flex; align-items:center; gap:.25rem; background:#19222c; padding:.3rem .55rem .35rem; border:1px solid #2a3542; border-radius:999px; font-weight:600; letter-spacing:.06em; text-transform:uppercase; cursor:pointer; transition:background .25s, border-color .25s, color .25s; }
.col-toggle.off { opacity:.55; filter:saturate(.4); }
.col-toggle input { accent-color:#ffb347; }
.col-toggle:hover { background:#1f2a35; }
/* New pill toggle buttons (replacing checkbox version) */
.col-toggle-btn { position:relative; display:inline-flex; align-items:center; gap:.4rem; background:#182029; border:1px solid #293640; color:#bfc7cd; padding:.42rem .7rem .46rem; border-radius:999px; font-size:.55rem; font-weight:650; letter-spacing:.07em; text-transform:uppercase; cursor:pointer; line-height:1; transition:background .35s, border-color .35s, color .35s, box-shadow .4s; }
.col-toggle-btn .indicator { width:9px; height:9px; border-radius:50%; background:radial-gradient(circle at 35% 35%, #7a8995, #55616b); box-shadow:0 0 0 0 rgba(255,179,71,0); transition:background .35s, transform .35s, box-shadow 1s; }
.col-toggle-btn.active { background:linear-gradient(135deg,#253027 0%,#2d3a31 60%); border-color:#355041; color:#e6ecef; box-shadow:0 4px 12px -5px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.04) inset; }

/* Chart-scoped compact sizing for Flow/Sankey toggle only */
.charts-row.four-charts.unified .chart .col-toggle-btn {
  padding:.12rem .38rem .06rem !important; /* slight downward bias for optical centering */
  font-size:.40rem !important;
  letter-spacing:.05em !important;
  gap:.26rem !important;
  min-height:16px !important; /* rely on min-height + flex centering */
  display:inline-flex !important;
  align-items:center !important;
  line-height:1 !important;
  color:#ffb347 !important; /* yellow text */
}
.charts-row.four-charts.unified .chart .col-toggle-btn .indicator { display:block; align-self:center; position:relative; top:.5px; }
.charts-row.four-charts.unified .chart .col-toggle-btn:hover,
.charts-row.four-charts.unified .chart .col-toggle-btn:focus,
.charts-row.four-charts.unified .chart .col-toggle-btn.active {
  color:#ffb347 !important; /* keep yellow on active/hover */
}
.charts-row.four-charts.unified .chart .col-toggle-btn .indicator {
  width:5px !important;
  height:5px !important;
}
.col-toggle-btn.active .indicator { background:radial-gradient(circle at 35% 35%, #ffb347, #ff8a2a); transform:scale(1.25); box-shadow:0 0 0 0 rgba(255,179,71,.5); animation:colPulse 2.6s ease-in-out infinite; }
@keyframes colPulse { 0% { box-shadow:0 0 0 0 rgba(255,179,71,.55);} 60% { box-shadow:0 0 0 6px rgba(255,179,71,0);} 100% { box-shadow:0 0 0 0 rgba(255,179,71,0);} }
.col-toggle-btn:hover { background:#1e2a33; border-color:#32414d; }
.col-toggle-btn:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
.col-toggle-btn:not(.active) { opacity:.75; }
.col-toggle-btn:not(.active):hover { opacity:1; }
@media (prefers-reduced-motion: reduce){ .col-toggle-btn.active .indicator { animation:none; } }

/* Quick stats ribbon */
.quick-stats { display:grid; grid-template-columns:repeat(auto-fit,minmax(110px,1fr)); column-gap:1rem; row-gap:.65rem; background:var(--surface-1); border:1px solid var(--surface-1-border); border-radius:var(--panel-radius); padding:var(--container-pad-y) var(--container-pad-x); margin:0 0 .4rem; box-shadow:0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset; transition:box-shadow 200ms ease; }
.quick-stats:hover { box-shadow:0 4px 12px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.05) inset; }
.qstat { display:flex; flex-direction:column; gap:.25rem; text-align:center; }
.qstat span { font-size:.55rem; letter-spacing:.08em; text-transform:uppercase; opacity:.55; font-weight:600; }
.qstat strong { font-size:.78rem; font-weight:600; color:#ffb347; }

/* Unparsed lines block */
.unparsed-block { margin:1.2rem 0 0; }
.unparsed-toggle { background:var(--surface-2); border:1px solid var(--surface-2-border); color:var(--text-strong); padding:.45rem .75rem; border-radius:8px; font-size:.65rem; letter-spacing:.05em; text-transform:uppercase; font-weight:600; cursor:pointer; box-shadow:0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset; transition:background-color 200ms ease, transform 150ms ease, box-shadow 200ms ease; }
.unparsed-toggle:hover { background:var(--surface-3); transform:translateY(-1px); box-shadow:0 4px 10px rgba(0,0,0,0.5); }
.unparsed-lines { margin:.6rem 0 0; background:var(--surface-1); border:1px solid var(--surface-1-border); padding:.7rem .8rem; border-radius:8px; font-size:.64rem; line-height:1.35; max-height:200px; overflow:auto; color:#d0d5db; box-shadow:0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset; }


.charts-row { display:flex; flex-direction:row; flex-wrap:wrap; gap:.65rem; margin:0 0 1rem; overflow:visible; padding-bottom:0; }

/* Force four charts per row when space allows */
.charts-row.four-charts { flex-wrap:nowrap; gap:0; }
.charts-row.four-charts .chart { flex:1 1 auto; min-width:0; }

/* Remove previous fixed flex-basis that could constrain width */
.charts-row.four-charts .chart { width:100%; }

/* Minimal padding inside unified charts to maximize chart area */
.charts-row.four-charts.unified .chart { padding:.15rem .2rem; }
.charts-row.four-charts .chart { padding:0; border:none; border-radius:0; position:relative; }
.charts-row.four-charts .chart + .chart:before { content:""; position:absolute; left:0; top:0; bottom:0; width:1px; background:rgba(80,150,220,0.30); opacity:.6; pointer-events:none; }
.charts-row.four-charts.unified { background:linear-gradient(160deg, rgba(25,33,43,0.92) 0%, rgba(12,16,22,0.95) 100%); border:1px solid rgba(255,255,255,0.08); border-radius:var(--panel-radius); padding:0; display:flex; justify-content:flex-start; box-shadow:0 6px 12px -8px rgba(0,0,0,.7), 0 1px 0 rgba(255,255,255,.02) inset; }
.charts-row.four-charts.unified .chart { background:transparent; }
.charts-row.four-charts.unified .chart { flex:1 1 0; min-width:0; max-width:100%; }
/* Single chart: 50% width and centered */
.charts-row.four-charts.unified .chart:only-child { flex:0 0 50%; max-width:50%; }
.charts-row.four-charts.unified:has(.chart:only-child) { justify-content:center; }
/* Minimal padding inside unified charts to maximize chart area */
.charts-row.four-charts.unified .chart { padding:.15rem .2rem; }
.charts-row.four-charts .chart:first-child { border-top-left-radius:0; border-bottom-left-radius:0; }
.charts-row.four-charts .chart:last-child { border-top-right-radius:0; border-bottom-right-radius:0; }

/* If viewport narrower than 1400px, allow wrap to prevent overflow */
@media (max-width: 1399px) {
  .charts-row.four-charts { flex-wrap:wrap; gap:.12rem; }
  .charts-row.four-charts .chart { flex:1 1 calc(50% - .12rem); border-radius:var(--panel-radius); padding:0; }
  .charts-row.four-charts .chart + .chart:before { left:0; top:0; bottom:0; background:rgba(90,170,240,0.32); opacity:.55; }
}

@media (max-width: 900px) {
  .charts-row.four-charts .chart { flex:1 1 100%; }
}
.chart { background:linear-gradient(160deg, rgba(25,33,43,0.92) 0%, rgba(12,16,22,0.95) 100%); border:1px solid rgba(255,255,255,0.08); border-radius:var(--panel-radius); padding:.25rem .3rem .25rem; flex:1 0 340px; display:flex; flex-direction:column; box-shadow:0 6px 12px -8px rgba(0,0,0,.7), 0 1px 0 rgba(255,255,255,.02) inset; transition:box-shadow 200ms ease, border-color 200ms ease; }
.chart:hover { border-color:rgba(255,255,255,0.16); box-shadow:0 10px 18px -12px rgba(0,0,0,.75), 0 1px 0 rgba(255,255,255,.04) inset; }
.chart .plot-inner { flex:1 1 auto; }
.chart { position:relative; }
.chart .plot-inner { width:100%; height:100%; }
.chart-info { position:absolute; top:6px; left:8px; z-index:100; display:inline-flex; align-items:center; justify-content:center; width:16px; height:16px; font-size:.55rem; font-weight:600; border-radius:4px; background:var(--surface-2); color:var(--accent); cursor:help; border:1px solid var(--surface-2-border); box-shadow:0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset; transition:transform 150ms ease, box-shadow 150ms ease, background-color 150ms ease; }
.chart-info:hover { transform:scale(1.1); background:var(--surface-3); box-shadow:0 2px 6px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,179,71,0.1) inset; }
.chart-info:focus-visible { outline:2px solid var(--accent); outline-offset:2px; }
.chart-info .tooltip { position:absolute; left:0; top:115%; transform:translateY(4px); background:var(--surface-2); color:var(--text-base); font-size:.6rem; line-height:1.25; width:210px; padding:.5rem .6rem .55rem; border:1px solid var(--surface-2-border); border-radius:8px; box-shadow:0 6px 16px -6px rgba(0,0,0,.6), 0 0 0 1px rgba(255,255,255,0.05) inset; opacity:0; pointer-events:none; transition:opacity .2s, transform .2s; z-index:9999; }
.chart-info:hover .tooltip, .chart-info:focus .tooltip { opacity:1; transform:translateY(0); pointer-events:auto; }

/* Chart toggle panel (stacked checkboxes) */
.chart-toggle-panel { position:absolute; bottom:6px; left:8px; display:flex; flex-direction:column; gap:3px; background:rgba(20,26,34,0.85); -webkit-backdrop-filter:blur(12px) saturate(130%); backdrop-filter:blur(12px) saturate(130%); border:1px solid var(--surface-2-border); padding:3px 5px 4px; border-radius:7px; font-size:.50rem; letter-spacing:.06em; z-index:30; box-shadow:0 2px 8px -5px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,0.03) inset; pointer-events:auto; transition:background 200ms ease, border-color 200ms ease, transform 150ms ease; }
.chart-toggle-panel:hover { background:rgba(26,32,42,0.9); border-color:var(--surface-3-border); transform:translateY(-1px); }
.chart-toggle-panel label { font-size:.50rem; }
.chart-toggle-panel label { display:flex; align-items:center; gap:6px; font-weight:600; text-transform:uppercase; color:var(--text-base); cursor:pointer; line-height:1; }
.chart-toggle-panel label.disabled { opacity:.45; cursor:not-allowed; }
.chart-toggle-panel input[type=checkbox] { width:14px; height:14px; accent-color: var(--accent); cursor:pointer; }
.chart-toggle-panel input[type=checkbox]:focus-visible { outline:var(--focus-ring); outline-offset:2px; }
.chart-toggle-panel .hint { font-size:.5rem; letter-spacing:.08em; opacity:.65; }

/* Themed Plotly unified hover vertical guideline (override default white) */
/* Plotly unified hover guideline theming */
.js-plotly-plot .plotly .hoverlayer .hoverline,
.js-plotly-plot .hoverlayer .hoverline,
.js-plotly-plot .hoverlayer .spikeline { /* include spikeline fallback */
  stroke: rgba(255,179,71,0.45) !important;
  stroke-width: 2px !important;
  stroke-dasharray: 4 5;
  vector-effect: non-scaling-stroke;
  paint-order: stroke;
  filter: drop-shadow(0 0 2px rgba(255,179,71,0.55));
}

/* Chart tooltip keyword highlights */
.tooltip .kw-accent, .chart-info .tooltip .kw-accent { color:#ffb347; font-weight:650; }
.tooltip .kw-risk, .chart-info .tooltip .kw-risk { color:#ff6b6b; font-weight:650; }
.tooltip .kw-positive, .chart-info .tooltip .kw-positive { color:#5ad67d; font-weight:650; }
.tooltip .kw-neutral, .chart-info .tooltip .kw-neutral { color:#89a4b7; font-weight:600; }

.table-wrapper { background:#14191f; border:1px solid #27313f; border-radius:var(--panel-radius); padding:var(--container-pad-y) var(--container-pad-x); box-shadow:0 2px 4px rgba(0,0,0,.4); }
table { width:100%; border-collapse:collapse; font-size:.82rem; }
thead th { text-align:left; font-weight:700; padding:.5rem .5rem; background:#1f2833; position:sticky; top:0; z-index:2; font-size:.9rem; color:var(--text-strong); }

/* Keyword highlight used in instructional copy */
.kw { color: var(--accent); font-weight:700; }
thead th.sortable { cursor:pointer; user-select:none; transition:background-color 200ms ease, color 200ms ease; }
thead th.sortable:hover { background:var(--surface-2); color:var(--text-strong); }
thead th.sortable:active { background:var(--surface-3); }
thead th.sortable:focus-visible { outline:2px solid var(--accent); outline-offset:-2px; }
tbody td { padding:.45rem .5rem; border-top:1px solid rgba(255,255,255,0.06); vertical-align:top; transition:background-color 150ms ease; }
/* Enforce uniform transaction row height */
.txn-table tbody tr { height:32px; }
.txn-table tbody td { line-height:1.1; }
tbody tr:hover { background:var(--surface-2); }
tbody tr { transition:background-color 150ms ease; }
td.neg { color:#ff6b6b; font-weight:600; }
td.pos { color:#5ad67d; font-weight:600; }
.txn-table { table-layout:fixed; }
.txn-table th:nth-child(1), .txn-table td:nth-child(1){ width:120px; }
.txn-table th:nth-child(3), .txn-table td:nth-child(3){ width:110px; text-align:right; }
.txn-table th:nth-child(4), .txn-table td:nth-child(4){ width:110px; text-align:right; }
.txn-table th:nth-child(5), .txn-table td:nth-child(5){ width:100px; }
.txn-table td.desc { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.txn-table td.num { text-align:right; font-variant-numeric:tabular-nums; }
.txn-table .neg { font-weight:600; }
.txn-table .pos { font-weight:600; }
.match-highlight { background:rgba(255,179,71,.25); color:#ffe0a8; padding:0 2px; border-radius:3px; animation:highlightPulse 2s ease-in-out infinite; }
@keyframes highlightPulse { 0%, 100% { background:rgba(255,179,71,.25); } 50% { background:rgba(255,179,71,.35); } }

/* Virtualization spacer helper */
.virtual-spacer td { padding: 0 !important; border: 0 !important; height: inherit !important; }

/* Screen-reader only utility */
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
.truncate-note { margin-top:.6rem; font-size:.7rem; opacity:.6; }

::-webkit-scrollbar { width:10px; height:10px; }
::-webkit-scrollbar-track { background:#101418; }
::-webkit-scrollbar-thumb { background:#25303c; border-radius:6px; }
::-webkit-scrollbar-thumb:hover { background:#314051; }

/* Removed conflicting anchor color override (previously set to #61dafb) to keep consistent accent link palette. */

/* Cover page */
.cover { background:linear-gradient(145deg,var(--bg-1,#131a23) 0%,var(--bg-2,#0f1115) 60%); border:1px solid var(--panel-border,#1f2a36); padding:1.7rem 1.6rem 1.9rem; border-radius:16px; margin-top:1rem; box-shadow:0 10px 30px -12px rgba(0,0,0,.55), 0 4px 8px rgba(0,0,0,.35); position:relative; overflow:hidden; }
.cover:before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 82% 14%, rgba(255,179,71,.12), transparent 55%); pointer-events:none; }
.cover h1.cover-global-title { margin:0 auto .8rem; font-size:2rem; max-width:880px; text-align:center; letter-spacing:.28px; background:linear-gradient(90deg,var(--accent),var(--accent-hover)); -webkit-background-clip:text; background-clip:text; color:transparent; font-weight:700; line-height:1.06; }
@media (min-width:1100px){ .cover h1.cover-global-title { font-size:2.5rem; } }
.global-tagline { max-width:920px; margin:0 auto 1.1rem; text-align:center; font-size:1rem; line-height:1.45; opacity:.88; }
.cover-left-title { margin:0 0 .9rem; font-size:1rem; letter-spacing:.1em; text-transform:uppercase; font-weight:650; background:linear-gradient(90deg,#ffe6a6,#ffb347 70%); -webkit-background-clip:text; background-clip:text; color:transparent; }
.cover h1 { text-transform:none; }
.cover .tagline { font-size:.98rem; max-width:780px; line-height:1.42; opacity:.88; margin:0 0 .9rem; }
.cover-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:1.2rem 1.2rem; align-items:start; }
.cover-left { display:flex; flex-direction:column; gap:.45rem; }
.cover-left .cta-row { margin-top:.2rem; }
.cover-left .privacy-pill { margin-top:.15rem; }
.cover-left .progress-steps { margin-top:.4rem; }

/* Instructional accordion on cover */
.instruction-compact { display:flex; flex-direction:column; gap:.4rem; margin:.4rem 0 .6rem; }
.instruction-accordion {
  display: grid;
  gap: .4rem;
  margin: .2rem 0 .5rem;
}

/* Recent (resume) card on cover */
.recent-card {
  background: var(--surface-1);
  border: 1px solid var(--surface-1-border);
  border-radius: 12px;
  padding: .7rem .9rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset;
  display:flex; flex-direction:column; gap:.45rem;
  margin: .2rem 0 .4rem 0;
  color: var(--text-strong);
  font-size: .92rem;
  transition: box-shadow 200ms ease, transform 150ms ease;
}
.recent-card:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.05) inset;
  transform: translateY(-1px);
}
.recent-card-head { display:flex; align-items:center; justify-content:space-between; gap:.6rem; }
.recent-title {
  font-weight: 600;
  letter-spacing: .03em;
  color: #ffe6a6;
  font-size: .93rem;
}
.resume-btn {
  margin-left: auto;
  background: linear-gradient(90deg, #ffb347 0%, #ffd86b 100%);
  color: #181f29;
  font-weight: 700;
  border: none;
  border-radius: 7px;
  padding: .22rem .7rem;
  font-size: .91rem;
  cursor: pointer;
  box-shadow: 0 1.5px 0 #ffe6a6 inset;
  transition: background .18s, color .18s;
}
.resume-btn:hover, .resume-btn:focus-visible {
  background: linear-gradient(90deg, #ffd86b 0%, #ffb347 100%);
  color: #111;
}
/* Make clear button in Recent card match the theme (secondary action) */
.recent-card .clear-all-btn {
  margin-left: 0.5rem;
  background: linear-gradient(135deg,#19222c 0%,#202b37 70%);
  border: 1px solid var(--surface-border);
  color: var(--text-strong);
  padding: .45rem .8rem .5rem;
  font-size: .85rem;
  letter-spacing: .06em;
  text-transform:uppercase;
  font-weight:600;
  border-radius:8px;
  cursor:pointer;
  box-shadow:0 3px 8px -6px rgba(0,0,0,.55);
  transition: background .18s ease, box-shadow .18s ease, transform .12s;
}
.recent-card .clear-all-btn:hover {
  background: linear-gradient(135deg,#1f2a35 0%,#273544 70%);
}
.recent-card .clear-all-btn:focus-visible { box-shadow: var(--focus-ring); outline:none; }

.recent-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: .07rem;
}
.recent-list-item {
  display: flex;
  align-items: center;
  gap: .4rem;
  padding: .05rem 0;
  font-size: .89rem;
}
.recent-filename {
  font-weight: 500;
  color: #ffe6a6;
  max-width: 12em;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.recent-meta {
  color: #bfc7d5;
  font-size: .81rem;
  margin-left: .5rem;
  opacity: .82;
}
.instruction-accordion .ia-item {
  background: var(--surface-1);
  border: 1px solid var(--surface-1-border);
  border-radius: 13px;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03) inset;
  transition: box-shadow 200ms ease, border-color 200ms ease, background-color 200ms ease, transform 150ms ease;
}
.instruction-accordion .ia-item:focus-within,
.instruction-accordion .ia-item:hover {
  border-color: var(--accent);
  background: var(--surface-2);
  box-shadow: 0 4px 12px rgba(255,179,71,0.2), 0 0 0 1px rgba(255,179,71,0.1) inset;
  transform: translateY(-1px);
}
.instruction-accordion .dropdown-btn.wide {
  width: 100%;
  text-align: left;
  padding-left: 1.1rem;
  padding-right: 2.1rem;
  border-radius: 10px 10px 0 0;
  background: linear-gradient(90deg, #232e3a 0%, #181f29 100%);
  border: none;
  color: #ffe6a6;
  font-size: .97rem;
  font-weight: 700;
  letter-spacing: .04em;
  box-shadow: none;
  transition: background .22s, color .22s;
}
.instruction-accordion .dropdown-btn.wide .step-index {
  margin-right: .55rem;
  background: #ffb347;
  color: #181f29;
  border-radius: 6px;
  padding: .18rem .5rem .22rem;
  font-size: .68rem;
  font-weight: 700;
  letter-spacing: .06em;
}
.instruction-accordion .dropdown-btn.wide.open {
  background: linear-gradient(90deg, #2a3643 0%, #232e3a 100%);
  color: #fffbe6;
}
.instruction-accordion .ia-body {
  padding: .85rem 1.15rem 1.05rem;
  color: #e6e9ee;
  font-size: .93rem;
  line-height: 1.5;
  border-top: 1.5px solid #232e3a;
  background: linear-gradient(120deg, #181f29 0%, #151a22 100%);
}
.instruction-accordion .ia-body .tips {
  margin: .55rem 0 0;
  font-size: .81rem;
  opacity: .89;
  color: #ffe6a6;
}
.instruction-accordion .ia-body .tips li {
  margin: .19rem 0;
  color: #e6e9ee;
}
.cover-left .recent-files { margin-top:.55rem; }
.cover-left .primary-actions { margin-top:.5rem; }
@media (min-width:1000px){ .cover-left, .cover-right { padding-top:.2rem; } }
.upload-zone { position:relative; background:#161e26; border:2px dashed #2a3848; border-radius:16px; padding:1.4rem 1rem 1.6rem; display:flex; flex-direction:column; align-items:center; gap:.9rem; cursor:pointer; transition:border-color .3s, background .3s; }
.upload-zone:hover { border-color:#ffb347; background:#19232c; }
.upload-zone:focus-visible { outline:3px solid #ffb347; outline-offset:4px; }
.upload-zone .zone-text { font-size:.9rem; font-weight:500; letter-spacing:.4px; display:flex; align-items:center; gap:.5rem; color:#dfe3e7; }
.upload-zone .zone-text .or { opacity:.5; font-weight:400; font-size:.8rem; }
.shortcut-hints { list-style:none; margin:.2rem 0 0; padding:0; display:flex; flex-wrap:wrap; gap:.55rem .9rem; font-size:.6rem; letter-spacing:.08em; text-transform:uppercase; opacity:.75; }
.shortcut-hints kbd { background:#1f2833; padding:.2rem .35rem .25rem; border-radius:4px; border:1px solid #2d3946; font-size:.6rem; font-weight:600; }
.cover-right { display:flex; flex-direction:column; gap:.5rem; }
.cover-right .benefits-heading { margin:.15rem 0 .4rem; line-height:1.05; font-size:0.95rem; text-transform:uppercase; letter-spacing:.12em; font-weight:700; background:linear-gradient(90deg,var(--accent-warm,#ffe6a6),var(--accent,#ffb347) 70%); -webkit-background-clip:text; background-clip:text; color:transparent; }
/* Subtle vertical divider between cover columns (only when multi-column) */
@media (min-width: 900px){
  .cover-grid.divided { position:relative; }
  .cover-grid.divided:before { content:""; position:absolute; top:0; bottom:0; left:50%; width:1px; background:linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0.08) 12%, rgba(255,255,255,0.12) 50%, rgba(255,255,255,0.08) 88%, rgba(255,255,255,0) 100%); pointer-events:none; transform:translateX(-50%); }
  /* Increase internal side padding so divider breathes */
  .cover-left { padding-right:1.2rem; }
  .cover-right { padding-left:1.2rem; }
}
@media (max-width: 899.9px){ .cover-grid.divided:before { display:none; } }

/* Fine-tune large screen vertical rhythm */
@media (min-width:1200px){
  .cover-right { margin-top:.25rem; }
}
.feature-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(210px,1fr)); gap:.7rem .9rem; background:#161d25; border:1px solid #24303d; border-radius:14px; padding:1rem 1rem .9rem; font-size:.72rem; line-height:1.25; }
.feature-grid > div { display:flex; flex-direction:column; gap:.15rem; background:#1b242e; border:1px solid #27313d; padding:.55rem .6rem .6rem; border-radius:10px; position:relative; box-shadow:0 2px 4px rgba(0,0,0,.35); }
.feature-grid > div strong { font-size:.67rem; letter-spacing:.07em; text-transform:uppercase; color:#ffb347; font-weight:700; }
.supported { font-size:.66rem; background:#161d25; border:1px solid #24303d; padding:.55rem .7rem; border-radius:10px; line-height:1.35; }
.supported .muted { opacity:.6; }
.privacy-note { font-size:.6rem; opacity:.55; line-height:1.3; }
.dev-card { background:#161d25; border:1px solid #24303d; padding:.65rem .75rem .7rem; border-radius:14px; margin-top:.2rem; font-size:.7rem; line-height:1.35; display:flex; flex-direction:column; gap:.4rem; box-shadow:0 2px 4px rgba(0,0,0,.35); }
.dev-card h2 { margin:0; font-size:.78rem; letter-spacing:.08em; text-transform:uppercase; font-weight:700; color:#ffb347; }
.dev-links { margin:0; display:flex; gap:.55rem; flex-wrap:wrap; align-items:center; }
.dev-link { display:inline-block; font-size:.62rem; letter-spacing:.08em; text-transform:uppercase; font-weight:600; background:#19222c; border:1px solid #2c3743; padding:.45rem .7rem .5rem; border-radius:8px; color:#d6dbe0; text-decoration:none; transition:background .25s, border-color .25s, color .25s; }
.dev-link.linkedin { border-color:#2f3e4c; }
.dev-link:hover { background:#1f2a35; color:#fff; }
.mini-actions { display:flex; flex-wrap:wrap; gap:.5rem; margin-top:.4rem; }
.mini-actions button { background:#19222c; border:1px solid #2c3845; color:#d5dae0; padding:.45rem .7rem .5rem; border-radius:8px; font-size:.6rem; letter-spacing:.07em; font-weight:600; text-transform:uppercase; cursor:pointer; }
.mini-actions button:hover { background:#1f2a35; }
.mini-actions .demo-btn { background:#253027; border-color:#33503b; }
.mini-actions .demo-btn:hover { background:#2b382f; }
.mini-actions .contrast-btn { background:#25202f; border-color:#3a2f4d; }
.mini-actions .contrast-btn:hover { background:#2e2740; }
.mini-actions .clear-all-btn { background:#352226; border-color:#4a2f33; }
.mini-actions .clear-all-btn:hover { background:#40292d; }

/* Compact variant for Recent card clear button */
.recent-card .clear-all-btn.small {
  padding: .28rem .5rem .32rem;
  font-size: .72rem;
  border-radius: 8px;
  display:inline-flex;
  align-items:center;
  gap: .45rem;
}
.recent-card .clear-all-btn.small .clear-icon { display:inline-block; width:14px; height:14px; color:var(--text-base); }
.recent-card .clear-all-btn.small .clear-label { display:inline-block; color:var(--text-base); font-weight:700; }
.recent-card .clear-all-btn.small:hover .clear-icon, .recent-card .clear-all-btn.small:hover .clear-label { color:var(--text-strong); }
.recent-card .clear-all-btn.small:focus-visible { box-shadow: var(--focus-ring); }
.badge-local { display:inline; background:none; color:#5ad67d; padding:0; border-radius:0; font-size:.55rem; font-weight:600; letter-spacing:.05em; margin-left:0; }
.file-guidance { font-size:.58rem; opacity:.6; margin-top:.4rem; letter-spacing:.05em; text-transform:uppercase; }
.stack-badges { display:flex; flex-wrap:wrap; gap:.4rem; margin-top:.55rem; }
.stack-badges span { background:#1b242e; border:1px solid #2b3743; padding:.3rem .55rem .35rem; border-radius:8px; font-size:.55rem; letter-spacing:.07em; text-transform:uppercase; font-weight:600; color:#d2d7dc; }
.oss-links { margin-top:.6rem; font-size:.6rem; }
.oss-links a { color:#ffb347; text-decoration:none; }
.oss-links a:hover { text-decoration:underline; }
.skip-link { position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden; }
.skip-link:focus { position:static; width:auto; height:auto; background:#ffb347; color:#111; padding:.4rem .6rem; border-radius:6px; font-size:.65rem; font-weight:600; }
.tour-modal { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:1500; }
.tour-backdrop { position:absolute; inset:0; background:rgba(0,0,0,.55); backdrop-filter:blur(3px); }
.tour-content { position:relative; z-index:2; background:#161d25; border:1px solid #24303d; border-radius:16px; width:min(420px,90%); padding:1.4rem 1.3rem 1.5rem; box-shadow:0 8px 28px -8px rgba(0,0,0,.7); display:flex; flex-direction:column; gap:1rem; font-size:.72rem; line-height:1.35; }
.tour-content h2 { margin:0; font-size:.9rem; letter-spacing:.08em; text-transform:uppercase; font-weight:650; color:#ffb347; }
.tour-content ol { margin:0 0 .2rem 1rem; padding:0; display:grid; gap:.45rem; }
.tour-content li strong { color:#e6e9ee; }
.close-tour { align-self:flex-end; background:#19222c; border:1px solid #2c3845; color:#e1e5e9; padding:.45rem .75rem .5rem; border-radius:8px; font-size:.6rem; letter-spacing:.08em; text-transform:uppercase; font-weight:600; cursor:pointer; }
.close-tour:hover { background:#1f2a35; }
html.high-contrast body { background:#000 !important; color:#fff; }
html.high-contrast .cover, html.high-contrast .metric, html.high-contrast .chart, html.high-contrast .table-wrapper { border-color:#fff !important; }
html.high-contrast .upload-zone { border-color:#fff; }
html.high-contrast .chip.active { background:#fff; color:#000; }
.resume-box { background:#161d25; border:1px solid #27323d; padding:.65rem .75rem .75rem; border-radius:12px; display:flex; flex-direction:column; gap:.55rem; font-size:.68rem; line-height:1.25; }
.resume-info strong { color:#ffb347; }
.resume-actions { display:flex; gap:.55rem; }
.resume-btn, .clear-cache-btn { background:#19222c; border:1px solid #2c3743; color:#d6dbe0; padding:.45rem .8rem .5rem; font-size:.6rem; letter-spacing:.08em; text-transform:uppercase; font-weight:600; border-radius:8px; cursor:pointer; }
.resume-btn:hover, .clear-cache-btn:hover { background:#1f2a35; }
.clear-cache-btn { background:#251b1d; border-color:#3a2a2d; }
.clear-cache-btn:hover { background:#2d2124; }
.cover .steps { display:grid; gap:.55rem; font-size:.85rem; max-width:760px; margin:0 0 1.3rem; padding:1rem 1.1rem 1.05rem; background:#161d25; border:1px solid #24303d; border-radius:12px; }
.cover .steps div { line-height:1.3; }
.cover .steps strong { color:#ffb347; }
.cover .tips { font-size:.75rem; opacity:.75; max-width:760px; margin-bottom:1.4rem; }
.cover .cta-pulse { display:inline-block; background:#ffb347; color:#111; font-weight:600; padding:.65rem 1.1rem; border-radius:999px; font-size:.8rem; letter-spacing:.06em; animation:pulseGlow 2.4s ease-in-out infinite; box-shadow:0 0 0 0 rgba(255,179,71,.55); }
.cover .cta-upload { position:relative; cursor:pointer; }
.cover .cta-upload { overflow:hidden; }
.cover .cta-upload:after { content:""; position:absolute; inset:0; border-radius:14px; background:radial-gradient(circle at 40% 50%, rgba(255,179,71,.55), rgba(255,179,71,0) 65%); opacity:0; transform:scale(.55); pointer-events:none; mix-blend-mode:screen; }
.cover .cta-upload:hover:after { animation:uploadPulse 1.9s ease-in-out infinite; }
.cover .cta-upload input { position:absolute; inset:0; opacity:0; cursor:pointer; }
.cover .cta-upload:focus-visible { outline:3px solid #ffe6a6; outline-offset:3px; }
.cta-upload .cta-content { display:inline-flex; align-items:center; gap:.5rem; }
/* Cover-specific: use upload CTA text token for the hero upload button */
.cover .primary-cta .kw {
  color: var(--upload-cta-text);
  text-shadow: var(--upload-cta-text-shadow);
}
.orb-icon { display:inline-block; filter:drop-shadow(0 0 4px rgba(255,179,71,.45)); transition:transform .5s ease, filter .4s; }
.cta-upload:hover .orb-icon, .upload-btn:hover .orb-icon { transform:rotate(8deg) scale(1.05); filter:drop-shadow(0 0 6px rgba(255,179,71,.7)); }
.upload-btn .orb-icon { margin-right:.3rem; }
@keyframes pulseGlow { 0% { box-shadow:0 0 0 0 rgba(255,179,71,.55);} 70% { box-shadow:0 0 0 18px rgba(255,179,71,0);} 100% { box-shadow:0 0 0 0 rgba(255,179,71,0);} }

/* Light theme & new enhancement components */

.mini-actions .date-btn { background:#262739; border-color:#353650; }
.mini-actions .date-btn:hover { background:#2f3146; }
.primary-actions { display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.4rem; }
.primary-actions button { background:#19222c; border:1px solid #2c3845; color:#d5dae0; padding:.5rem .85rem .55rem; border-radius:9px; font-size:.62rem; letter-spacing:.07em; font-weight:600; text-transform:uppercase; cursor:pointer; }
.primary-actions button:hover { background:#1f2a35; }
.primary-actions .more-btn { background:#253027; border-color:#33503b; }

/* Expanded cover value content */
.value-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:.5rem .6rem; margin:.3rem 0 .7rem; }
.value-grid.merged { margin:.4rem 0 .7rem; }
.value-grid .val-item { background:#161d25; border:1px solid #24303d; padding:.5rem .6rem .55rem; border-radius:12px; display:flex; flex-direction:column; gap:.25rem; font-size:.63rem; letter-spacing:.02em; line-height:1.3; position:relative; box-shadow:0 2px 4px rgba(0,0,0,.35); }
.value-grid .val-item strong { font-size:.64rem; letter-spacing:.09em; text-transform:uppercase; font-weight:650; color:#ffb347; }
@media (max-width:720px){ .value-grid { grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); } }
.cover-sub-sections { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:.6rem .8rem; margin:.3rem 0 .8rem; }
.cover-sub-sections.merged-panels { margin:.2rem 0 .8rem; }
.cover-sub-sections h2 { margin:0 0 .4rem; font-size:.68rem; letter-spacing:.12em; text-transform:uppercase; font-weight:700; color:#ffe6a6; }
.use-cases ul, .trust-badges ul { list-style:disc; margin:.1rem 0 0 1.1rem; padding:0; display:grid; gap:.25rem; font-size:.58rem; line-height:1.3; }
.use-cases, .trust-badges { background: var(--panel-bg, #151c24); border: 1px solid var(--panel-border, #24313d); border-radius: 12px; padding: .6rem .75rem .65rem; box-shadow: 0 6px 20px -12px rgba(0,0,0,.55); position:relative; }
.use-cases:before, .trust-badges:before { content:""; position:absolute; inset:0; border-radius:inherit; background:radial-gradient(circle at 85% 18%, rgba(255,179,71,.08), transparent 60%); pointer-events:none; }
.trust-badges li { position:relative; }
.trust-badges li .badge-local { margin-right:.35rem; margin-left:0; }
@media (max-width:900px){ .cover-sub-sections { grid-template-columns:1fr; } }

/* AI consent modal */
.ai-consent-layer .themed-modal-content.ai-consent-modal { background:var(--surface-2); border:1px solid var(--surface-2-border); border-radius:18px; width:min(480px,92%); padding:1.5rem 1.4rem 1.6rem; box-shadow:0 10px 32px -10px rgba(0,0,0,.8), 0 4px 12px -4px rgba(0,0,0,.6), 0 0 0 1px rgba(255,255,255,0.05) inset; font-size:.74rem; display:flex; flex-direction:column; gap:1rem; }
.ai-consent-modal h2 { margin:0; font-size:.95rem; letter-spacing:.08em; text-transform:uppercase; font-weight:650; background:linear-gradient(90deg,#ffb347,#ffd86b); -webkit-background-clip:text; background-clip:text; color:transparent; }
.ai-consent-body p { margin:.1rem 0 .4rem; line-height:1.4; }
.ai-consent-points { margin:.15rem 0 .6rem 1.1rem; padding:0; display:grid; gap:.35rem; }
.ai-consent-points li { line-height:1.25; }
.ai-consent-points .kw-local { color:#5ad67d; font-weight:600; }
.ai-consent-points .kw-private { color:#ffb347; font-weight:600; }
.ai-consent-points .kw-offline { color:#9d7ef7; font-weight:600; }
.ai-consent-modal .remember-choice { font-size:.62rem; letter-spacing:.06em; display:flex; align-items:center; gap:.4rem; font-weight:600; }
.ai-consent-modal .remember-choice input { width:14px; height:14px; accent-color:#ffb347; }
.ai-consent-modal .themed-actions { display:flex; justify-content:flex-end; gap:.6rem; }
.ai-consent-modal .btn-cancel, .ai-consent-modal .btn-danger { background:#19222c; border:1px solid #2c3845; color:#d5dae0; padding:.55rem .85rem .6rem; border-radius:8px; font-size:.6rem; letter-spacing:.07em; text-transform:uppercase; font-weight:600; cursor:pointer; }
.ai-consent-modal .btn-danger { background:#352226; border-color:#4a2f33; color:#ffbfb7; }
.ai-consent-modal .btn-primary { background:linear-gradient(140deg,#163252 0%,#1e3f63 60%,#163252 100%); border:1px solid #275278; color:#d2e9fa; box-shadow:0 0 0 1px rgba(90,150,214,.15) inset, 0 2px 6px -2px rgba(0,0,0,.65), 0 0 0 0 rgba(64,140,255,0); position:relative; transition:background .4s, box-shadow .5s, border-color .4s, color .4s; }
.ai-consent-modal .btn-primary:hover { background:linear-gradient(140deg,#1c4064 0%,#25537a 60%,#1c4064 100%); border-color:#2f6b9d; color:#e8f5ff; box-shadow:0 0 0 1px rgba(64,140,255,.35) inset, 0 4px 12px -4px rgba(0,0,0,.7), 0 0 14px -4px rgba(64,140,255,.55); }
.ai-consent-modal .btn-primary:active { background:linear-gradient(140deg,#173653 0%,#1d486a 60%,#173653 100%); box-shadow:0 0 0 1px rgba(64,140,255,.4) inset, 0 2px 6px -3px rgba(0,0,0,.65); }
.ai-consent-modal .btn-primary:focus-visible { outline:2px solid #4090ff; outline-offset:2px; }
.ai-consent-modal .btn-cancel:hover { background:#1f2a35; }
.ai-consent-modal .btn-danger:hover { background:#40292d; }
.ai-consent-modal .btn-cancel:focus-visible, .ai-consent-modal .btn-danger:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
@media (prefers-reduced-motion: reduce){ .ai-consent-modal { transition:none; } .btn { transition:none; } .metric { transition:none; } .chip { transition:none; } .clear-filters { transition:none; } .chart { transition:none; } .quick-stats { transition:none; } }
.more-actions { display:flex; flex-wrap:wrap; gap:.45rem; margin:.55rem 0 .2rem; }
.more-actions button { background:var(--surface-2); border:1px solid var(--surface-2-border); color:var(--text-strong); padding:.4rem .7rem .45rem; border-radius:8px; font-size:.55rem; letter-spacing:.07em; font-weight:600; text-transform:uppercase; cursor:pointer; box-shadow:0 1px 2px rgba(0,0,0,0.3); transition:background-color 200ms ease, transform 150ms ease, box-shadow 150ms ease; }
.more-actions button:hover { background:var(--surface-3); transform:translateY(-1px); box-shadow:0 4px 10px rgba(0,0,0,0.5); }
.feature-grid.declutter { grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); }
.feature-grid.declutter > div strong { font-size:.6rem; }
.toggle-features { margin-top:.5rem; background:#19222c; border:1px solid #2c3845; color:#d5dae0; padding:.4rem .7rem .45rem; border-radius:8px; font-size:.55rem; letter-spacing:.07em; font-weight:600; text-transform:uppercase; cursor:pointer; }
.toggle-features:hover { background:#1f2a35; }
.info-list { list-style:none; margin:.6rem 0 0; padding:0; display:grid; gap:.3rem; font-size:.58rem; line-height:1.25; }
.info-list li { background:#161d25; border:1px solid #24303d; padding:.45rem .6rem .5rem; border-radius:10px; display:flex; gap:.4rem; align-items:flex-start; }
.info-list .muted { opacity:.55; }
.inline-dev { margin-top:.45rem; }
.inline-dev .dev-link { font-size:.58rem; }
.cover { position:relative; }
.cover-corner { position:absolute; right:.9rem; bottom:.6rem; display:flex; flex-direction:column; align-items:flex-end; gap:.35rem; }
.repo-link { font-size:.5rem; letter-spacing:.09em; text-transform:uppercase; font-weight:600; background:#141b22; border:1px solid #22303b; padding:.3rem .55rem .35rem; border-radius:10px; color:#ffb347; text-decoration:none; opacity:.85; box-shadow:0 2px 6px -3px rgba(0,0,0,.55); }
.repo-link.fine-print { filter:saturate(.85) brightness(.95); backdrop-filter:blur(2px); }
.repo-link.fine-print:hover { opacity:1; background:#18212a; border-color:#2a3a46; }
.repo-link:hover { background:#1f2a35; }
.repo-link:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
@media (max-width: 620px){
  .cover-corner { right:.55rem; bottom:.55rem; }
  .repo-link { font-size:.52rem; padding:.35rem .55rem .4rem; }
}
@media (max-width: 400px){
	.subdued-tagline { padding:.5rem .6rem .55rem; font-size:.55rem; }
}
.subdued-tagline { font-weight:500; color:#7c94a5; letter-spacing:.015em; background:linear-gradient(100deg,#131c24,#131c24 55%,#16222c); padding:.42rem .65rem .48rem .7rem; border:1px solid #1e2a34; border-radius:9px; box-shadow:0 1px 3px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,0.015) inset; font-size:.58rem; line-height:1.22; position:relative; }
.subdued-tagline:before { content:""; position:absolute; left:0; top:0; bottom:0; width:4px; border-radius:9px 0 0 9px; background:linear-gradient(180deg,#ffb347,#ffcf73); opacity:.9; }
@media (min-width:900px){ .subdued-tagline { max-width:760px; } }
@media (max-width:520px){ .subdued-tagline { font-size:.55rem; padding:.4rem .55rem .45rem .6rem; } }
.resume-inline-btn { background:#22313f; color:#e6e9ee; border:1px solid #314051; padding:.45rem .7rem .5rem; font-size:.55rem; font-weight:600; border-radius:8px; cursor:pointer; }
.resume-inline-btn:hover { background:#283a4a; }
.resume-inline-btn:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
.high-contrast .subdued-tagline { color:#8fb7d8; border-color:#2e3e4c; }

.progress-steps { display:grid; grid-template-columns:repeat(auto-fit,minmax(130px,1fr)); gap:.5rem .7rem; margin-bottom:.3rem; }
.progress-steps.below-hero { margin-top:1.1rem; }
.cta-row { display:flex; gap:.7rem; align-items:center; flex-wrap:wrap; margin:.2rem 0 .4rem; }
.primary-cta { background:linear-gradient(135deg,#ffb347,#ffcb74); color:#111; font-weight:650; letter-spacing:.07em; text-transform:uppercase; padding:.85rem 1.2rem .9rem; border-radius:14px; font-size:.8rem; border:1px solid #ffd27f; cursor:pointer; display:inline-flex; align-items:center; gap:.55rem; position:relative; box-shadow:0 6px 14px -6px rgba(0,0,0,.6), 0 1px 0 rgba(255,255,255,.25) inset; }
.primary-cta:hover { filter:brightness(1.05); }
.primary-cta:active { transform:translateY(1px); }
.primary-cta:focus-visible { outline:3px solid #ffe6a6; outline-offset:3px; }
.secondary-cta { background:#19222c; color:#d8dde2; border:1px solid #2c3845; padding:.75rem 1rem .8rem; border-radius:12px; font-size:.68rem; letter-spacing:.07em; font-weight:600; text-transform:uppercase; cursor:pointer; box-shadow:0 4px 10px -4px rgba(0,0,0,.55); }
.secondary-cta:hover { background:#1f2a35; }
.drop-hint { font-size:.62rem; letter-spacing:.08em; text-transform:uppercase; opacity:.55; margin:-.2rem 0 .55rem; font-weight:600; }
.constraints-line { font-size:.55rem; letter-spacing:.07em; text-transform:uppercase; opacity:.6; margin:-.15rem 0 .65rem; display:flex; gap:.6rem; flex-wrap:wrap; }
.constraints-line .tips-link { background:none; border:none; color:#ffb347; cursor:pointer; font-size:inherit; font-weight:600; text-decoration:underline; padding:0; }
.constraints-line .tips-link:hover { color:#ffd27f; }
.privacy-pill { display:inline-flex; align-items:center; gap:.35rem; background:#182029; border:1px solid #27323d; padding:.35rem .6rem .4rem; border-radius:999px; font-size:.55rem; letter-spacing:.08em; font-weight:600; text-transform:uppercase; color:#aeb9c3; margin:0 0 .8rem; }
.privacy-pill .lock { font-size:.65rem; }

/* Themed confirmation modal */
.themed-modal { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:2200; }
.themed-backdrop { position:absolute; inset:0; background:rgba(0,0,0,.6); backdrop-filter:blur(12px) saturate(1.2); animation:fadeIn .25s ease; }
.themed-modal-content { position:relative; z-index:2; width:min(440px,92%); background:#161d25; border:1px solid #24303d; border-radius:18px; padding:1.4rem 1.35rem 1.5rem; box-shadow:0 14px 36px -10px rgba(0,0,0,.8), 0 2px 6px -2px rgba(0,0,0,.55); display:flex; flex-direction:column; gap:1rem; font-size:.75rem; line-height:1.35; animation:popIn .35s cubic-bezier(.4,0,.2,1); }
.themed-modal-content h2 { margin:0; font-size:.95rem; letter-spacing:.08em; text-transform:uppercase; font-weight:650; background:linear-gradient(90deg,#ffb347,#ffd86b); -webkit-background-clip:text; background-clip:text; color:transparent; }
.themed-modal-content p { margin:0; color:#b5c0c9; font-size:.68rem; line-height:1.4; }
.themed-actions { display:flex; justify-content:flex-end; gap:.6rem; margin-top:.2rem; }
.themed-actions button { font-size:.6rem; letter-spacing:.08em; text-transform:uppercase; font-weight:600; padding:.55rem .85rem .6rem; border-radius:10px; cursor:pointer; border:1px solid; }
.themed-actions .btn-cancel { background:#19222c; color:#d5dae0; border-color:#2c3845; }
.themed-actions .btn-cancel:hover { background:#1f2a35; }
.themed-actions .btn-danger { background:linear-gradient(135deg,#472226,#5c2b2f); color:#ffb9b9; border-color:#5a3134; position:relative; }
.themed-actions .btn-danger:before { content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(120deg,rgba(255,107,107,.9),rgba(255,107,107,0) 55%, rgba(255,179,71,.55)); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.6; pointer-events:none; }
.themed-actions .btn-danger:hover { filter:brightness(1.08); }
.themed-actions .btn-danger:active { transform:translateY(1px); }
.themed-actions .btn-danger:focus-visible, .themed-actions .btn-cancel:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }

/* Runtime error banner (used by runtime probe) */
.runtime-error-banner {
  position: fixed;
  z-index: 99999;
  top: 0; left: 0; right: 0;
  font: 12px/1.4 system-ui, monospace;
  background: var(--error-bg);
  color: var(--error-color);
  padding: 8px 12px;
  border-bottom: 2px solid var(--error-border);
  box-shadow: 0 4px 12px -4px rgba(0,0,0,.6);
  white-space: pre-wrap;
  max-height: 40vh;
  overflow: auto;
}

/* Standardized small action button used in error UI */
.themed-small-btn {
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  color: var(--text-strong);
  padding: .48rem .85rem;
  border-radius: 8px;
  font-size: .6rem;
  font-weight: 600;
  letter-spacing: .07em;
  text-transform: uppercase;
  cursor: pointer;
}
.themed-small-btn.secondary {
  background: linear-gradient(135deg,#472226,#5c2b2f);
  border-color: #4a2f33;
  color: var(--accent-warm);
}
@keyframes popIn { 0% { opacity:0; transform:translateY(14px) scale(.95);} 60% { opacity:1; transform:translateY(-2px) scale(1.01);} 100% { opacity:1; transform:translateY(0) scale(1);} }
@keyframes fadeIn { from { opacity:0;} to { opacity:1;} }
@media (prefers-reduced-motion: reduce){ .themed-modal-content { animation:none; } .themed-backdrop { animation:none; } }
/* AI toggle */
.ai-toggle { display:inline-flex; align-items:center; gap:.35rem; background:#19222c; border:1px solid #2c3845; padding:.38rem .6rem .42rem; border-radius:8px; font-size:.55rem; letter-spacing:.07em; font-weight:600; text-transform:uppercase; cursor:pointer; color:#d2d8dd; transition:background .25s, border-color .25s, color .25s, filter .25s; }
.ai-toggle input { accent-color:#ffb347; width:14px; height:14px; cursor:pointer; }
.ai-toggle:hover { background:#1f2a35; }
.ai-toggle.off { opacity:.55; filter:saturate(.5); }
.ai-toggle:focus-within { outline:2px solid #ffb347; outline-offset:2px; }
.ai-toggle-text { min-width:42px; text-align:left; }
/* Compact categorize inline cluster */
.categorize-inline { display:inline-flex; align-items:center; gap:.45rem; background:#1b242e; border:1px solid #27323d; padding:.4rem .55rem .45rem; border-radius:10px; font-size:.55rem; line-height:1; box-shadow:0 2px 4px rgba(0,0,0,.4); }
.categorize-inline .categorize-btn { margin:0; }
.categorize-inline .cat-note { font-size:.52rem; letter-spacing:.04em; text-transform:none; opacity:.82; font-weight:500; white-space:normal; max-width:300px; line-height:1.25; color:#cfd6dc; background:none; -webkit-background-clip:initial; background-clip:initial; filter:none; }
.categorize-inline .cat-note .emph { color:#ffb347; font-weight:600; }
/* New grouped layout inside categorize bubble */
.categorize-inline.mini { gap:.65rem; }
.categorize-inline.mini { padding:.14rem .5rem .16rem; }
.categorize-inline.mini .categorize-btn.inline.large { padding:.45rem .8rem .48rem; }

/* Defensive small-screen rules to prevent overflow/overlap and force stacking at <=640px */
@media (max-width: 640px) {
  :root { --gutter-sm: 8px; }

  /* Ensure primary structural containers always fit viewport */
  .app-shell, main, header, footer, .cover, .card, .panel, .table-wrapper {
    box-sizing: border-box;
    width: 100% !important;
    max-width: 100% !important;
    padding-left: var(--gutter-sm) !important;
    padding-right: var(--gutter-sm) !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    position: relative !important;
    overflow: visible !important;
    clear: both !important;
  }

  /* Header: stack on mobile */
  .dbz-header { 
    flex-direction:column !important; 
    align-items:flex-start !important; 
    gap:.75rem !important; 
    padding:.75rem 0 .75rem !important; 
  }
  .dbz-header .logo-block { 
    width:100% !important;
  }
  .dbz-header .header-actions { 
    width:100% !important; 
    justify-content:flex-start !important; 
  }

  /* Make mascot and title scale and wrap safely */
  .mascot-icon { width:32px !important; height:32px !important; }
  .dbz-header .logo { font-size:1.05rem !important; white-space:normal !important; overflow-wrap:anywhere !important; }
  .dbz-header .subtitle, .dbz-header .header-meta .tagline, .dbz-header .header-meta .secure-note { font-size:0.78rem !important; }

  /* Buttons & CTAs: full-width, shrinkable, and with sane min-width */
  .primary-cta, .secondary-cta, .upload-btn, .cta-button, .cta-upload, .download-btn, .btn {
    width: 100% !important;
    min-width: 0 !important;
    flex: 0 1 auto !important;
    box-sizing: border-box !important;
  }

  /* Upload zone should not exceed viewport and should allow internal scrolling if needed */
  .upload-zone { width:100% !important; min-height:44px !important; padding:.8rem !important; overflow:hidden !important; }

  /* Rows that contain many controls must wrap */
  .filters-secondary-row, .metrics, .metrics-row, .filters .filter-line, .mix-bar, .toggles-row, .download-actions, .primary-actions, .mini-actions {
    display:flex !important;
    flex-wrap:wrap !important;
    gap:8px !important;
    align-items:stretch !important;
  }
  .filters-secondary-row > *, .metrics > *, .download-actions > *, .primary-actions > * { flex: 1 1 100% !important; min-width: 0 !important; }

  /* Charts: stack vertically and allow inner scroll rather than overflow the page */
  .charts-row, .charts-row .chart { flex-direction:column !important; flex:1 1 100% !important; width:100% !important; min-width:0 !important; }
  .chart .plot-inner, .plotly-graph { max-width:100% !important; width:100% !important; overflow:auto !important; -webkit-overflow-scrolling:touch !important; }

  /* Tables: allow horizontal scroll inside their container but keep table wrapper constrained */
  .table-wrapper { overflow:hidden !important; }
  table, .txn-table { display:block !important; width:100% !important; overflow:auto !important; -webkit-overflow-scrolling:touch !important; }
  .txn-table td.desc { white-space:normal !important; }

  /* Popovers and dropdowns: center and constrain to viewport width to avoid clipping/overlap */
  .popover, .dropdown-menu, .tooltip, .consistency-popover, .consistency-popover:before {
    position: absolute !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: calc(100% - (var(--gutter-sm) * 2)) !important;
    max-width: 100% !important;
    margin: 0 auto !important;
    z-index: 1200 !important;
  }

  /* Ensure focusable popovers can rise above other content */
  .popover[aria-hidden="false"], .consistency-popover[aria-hidden="false"], .date-pop, .themed-modal-content { z-index: 9999 !important; position: fixed !important; left: 50% !important; top: 50% !important; transform: translate(-50%,-50%) !important; width: calc(100% - 32px) !important; max-width: 560px !important; }

  /* Footer: stack and center */
  .site-footer { flex-direction:column !important; align-items:center !important; gap:8px !important; padding:12px !important; text-align:center !important; }

  /* Reduce spacing & padding for compactness */
  .card, .panel, .filters-advanced, .upload-panel, .categorize-cluster { padding:8px !important; margin-bottom:10px !important; }

  /* Last-resort: prevent any element from exceeding the viewport width */
  html, body, #root, * { max-width: 100vw !important; box-sizing: border-box !important; }
}
.categorize-inline.mini .ai-pill-toggle { padding:.4rem .7rem .44rem; }
.categorize-inline.mini .cat-info-btn { padding:.42rem .5rem .46rem; min-width:28px; }
.categorize-inline.mini .ai-privacy-note { padding:.2rem .5rem .25rem; }
.categorize-inline.mini .ai-privacy-note { line-height:1.05; }
.categorize-inline.mini .ai-section { gap:.18rem; }
.categorize-inline.mini .cat-actions { gap:.15rem; }
.categorize-inline.mini .cat-actions .cat-info-wrap { margin-right:.4rem; padding-right:.3rem; position:relative; }
.categorize-inline.mini .cat-actions .cat-info-wrap:after { content:""; position:absolute; top:12%; right:0; height:76%; width:1px; background:linear-gradient(to bottom,rgba(255,179,71,.4),rgba(255,179,71,0)); opacity:.45; }
.categorize-inline.mini .divider { margin:.025rem .05rem; }
.categorize-inline.mini .ai-pill-toggle .dot { transform:translateY(-1px); }
@media (max-width:640px){ .categorize-inline.mini { padding:.25rem .45rem .3rem; } }
.categorize-inline .cat-actions { display:inline-flex; align-items:center; gap:.5rem; }
.categorize-inline .divider { width:1px; align-self:stretch; background:linear-gradient(to bottom, rgba(255,255,255,.06), rgba(255,255,255,.15) 50%, rgba(255,255,255,.06)); margin:.1rem .1rem; }
.categorize-inline .ai-section { display:flex; align-items:center; gap:.45rem; }

/* Mobile / small-screen improvements */
@media (max-width: 640px) {
  :root { --container-pad-x: .6rem; --container-pad-y: .45rem; }
  .app-shell { padding: 0 0.8rem 3rem; max-width:100%; }

  /* Header: stack and reduce spacing */
  .dbz-header { padding:.7rem .6rem .6rem; }
  .dbz-header .logo-block { gap:.4rem; align-items:center; }
  .dbz-header .header-actions { position:static; top:auto; right:auto; margin-top:.35rem; display:flex; justify-content:flex-end; }
  .dbz-header .header-meta { flex-direction:row; gap:.4rem; align-items:center; }
  .dbz-header .header-meta .secure-note { display:none; }
  .dbz-header .domain { font-size:0.92rem; }

  /* Cover: stack columns and reduce hero size */
  .cover { padding:1.2rem 1rem 1.4rem; border-radius:12px; }
  .cover h1.cover-global-title { font-size:1.45rem; text-align:left; max-width:100%; }
  .global-tagline { text-align:left; font-size:0.95rem; }
  .cover-grid { grid-template-columns:1fr; gap:1rem; }
  .cover-left, .cover-right { padding:0; }
  .cover-left .cta-row { margin-top:.4rem; }

  /* CTAs & upload: full width, stacked */
  .cta-row { flex-direction:column; align-items:stretch; gap:.6rem; }
  .upload-panel { flex-direction:column; align-items:stretch; gap:.6rem; }
  .upload-btn, .primary-cta, .secondary-cta, .download-btn { width:100%; justify-content:center; }
  .upload-zone { padding:1rem; }

  /* Cards and compact text */
  .recent-card, .value-grid .val-item { font-size:0. Ninerem; }
  .recent-card, .value-grid .val-item { padding:.6rem .7rem; }

  /* Footer: stack and left-align */
  .site-footer { flex-direction:column; align-items:flex-start; gap:.5rem; padding-top:.8rem; font-size:0.82rem; }
  .site-footer .brand { font-size:0.96rem; }

  /* Smaller mascot and charts flow */
  .mascot-icon { width:28px; height:28px; }
  .charts-row.four-charts.unified .chart { flex:1 1 100%; width:100%; }

  /* Filters and inputs: reduce paddings to avoid overflow */
  .filters .search-composite input.filter-text { padding-right:1rem; }
  .primary-actions { flex-direction:column; gap:.5rem; }

  /* Accordion / instruction bodies more compact */
  .instruction-accordion .ia-item .ia-body { padding:.65rem .85rem; }

  /* Tables / wrappers */
  .table-wrapper { padding:.6rem .7rem; }
}
.categorize-inline .ai-section .ai-privacy-note { margin-left:.2rem; }
.ai-switch { position:relative; display:inline-flex; align-items:center; gap:.25rem; cursor:pointer; font-size:.55rem; font-weight:600; letter-spacing:.06em; text-transform:uppercase; padding:.15rem .4rem .2rem .3rem; background:#19222c; border:1px solid #2c3845; border-radius:999px; color:#d2d8dd; transition:background .25s, border-color .25s, color .25s; }
.ai-switch:hover { background:#1f2a35; }
.ai-switch input { width:14px; height:14px; accent-color:#ffb347; cursor:pointer; margin:0; }
.ai-switch.on { background:#253027; border-color:#33503b; color:#5ad67d; }
.ai-switch.on .lbl { color:#5ad67d; }
.ai-switch:focus-within { outline:2px solid #ffb347; outline-offset:2px; }

/* New AI pill toggle */
.ai-pill-toggle { position:relative; display:inline-flex; align-items:center; gap:.45rem; background:#182029; border:1px solid #273640; color:#c5cdd2; padding:.48rem .85rem .52rem; border-radius:999px; font-size:.58rem; font-weight:650; text-transform:uppercase; letter-spacing:.07em; cursor:pointer; line-height:1; transition:background .35s, border-color .35s, color .35s, box-shadow .4s; }
.ai-pill-toggle .dot { width:10px; height:10px; border-radius:50%; background:radial-gradient(circle at 35% 35%, #7a8995, #55616b); box-shadow:0 0 0 0 rgba(90,214,125,0); transition:background .4s, transform .4s, box-shadow 1.2s; }
.ai-pill-toggle:hover { background:#1d2f3a; border-color:#314655; }
.ai-pill-toggle:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
.ai-pill-toggle.active { background:linear-gradient(135deg,#253027 0%,#2d3a31 60%); border-color:#355041; color:#f0f5f6; box-shadow:0 4px 12px -5px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.05) inset; }
.ai-pill-toggle.active .dot { background:radial-gradient(circle at 35% 35%, #5ad67d, #1ea154); transform:scale(1.3); box-shadow:0 0 0 0 rgba(90,214,125,.55); animation:aiPulse 2.8s ease-in-out infinite; }
@keyframes aiPulse { 0% { box-shadow:0 0 0 0 rgba(90,214,125,.55);} 60% { box-shadow:0 0 0 7px rgba(90,214,125,0);} 100% { box-shadow:0 0 0 0 rgba(90,214,125,0);} }
@media (prefers-reduced-motion: reduce){ .ai-pill-toggle.active .dot { animation:none; } }
.resume-chip { margin:-.2rem 0 .9rem; }
.prefs-summary { font-size:.55rem; letter-spacing:.08em; text-transform:uppercase; opacity:.55; margin:-.4rem 0 .6rem; font-weight:600; }
.recent-files { background:#161d25; border:1px solid #24303d; padding:.55rem .7rem .65rem; border-radius:12px; margin:.2rem 0 .8rem; font-size:.6rem; line-height:1.3; }
.recent-files .recent-title { font-size:.55rem; letter-spacing:.1em; text-transform:uppercase; font-weight:700; color:#ffb347; margin:0 0 .3rem; }
.recent-files .recent-title.resume-inline { background:none; border:none; padding:0; cursor:pointer; display:inline-flex; align-items:center; gap:.4rem; }
.recent-files .recent-title.resume-inline:hover { text-decoration:underline; }
.recent-files .recent-title.resume-inline:focus-visible { outline:2px solid #ffb347; outline-offset:2px; border-radius:4px; }
.recent-files .resume-trigger { position:relative; }
.recent-files .resume-trigger .resume-dot { width:7px; height:7px; background:#ffb347; border-radius:50%; box-shadow:0 0 0 0 rgba(255,179,71,.6); animation:resumeDotPulse 2.2s ease-in-out infinite; }
@keyframes resumeDotPulse { 0% { transform:scale(.9); box-shadow:0 0 0 0 rgba(255,179,71,.55);} 50% { transform:scale(1.3); box-shadow:0 0 0 6px rgba(255,179,71,0);} 100% { transform:scale(.9); box-shadow:0 0 0 0 rgba(255,179,71,.55);} }
@media (prefers-reduced-motion: reduce) { .recent-files .resume-trigger .resume-dot { animation:none; } }
.recent-files ul { list-style:none; margin:0; padding:0; display:grid; gap:.25rem; }
.recent-files li { display:flex; align-items:center; gap:.35rem; }
.recent-files .muted { opacity:.55; }
.recent-files .resume-btn { margin:0 0 .45rem; background:rgba(255,179,71,.1); border:1px solid rgba(255,179,71,.4); color:#ffcc85; font-size:.55rem; letter-spacing:.08em; text-transform:uppercase; font-weight:600; padding:.35rem .55rem .4rem; border-radius:8px; cursor:pointer; display:inline-flex; align-items:center; gap:.4rem; position:relative; overflow:hidden; }
.recent-files .resume-btn:hover { background:rgba(255,179,71,.18); border-color:rgba(255,179,71,.55); }
.recent-files .resume-btn:active { transform:translateY(1px); }
.recent-files .resume-btn:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
.recent-files .resume-btn .resume-dot { width:6px; height:6px; border-radius:50%; background:#ffb347; box-shadow:0 0 0 4px rgba(255,179,71,.25),0 0 6px 2px rgba(255,179,71,.6); animation:resumePulse 2.4s ease-in-out infinite; }
@keyframes resumePulse { 0% { transform:scale(.9); opacity:.8; } 50% { transform:scale(1.25); opacity:1; } 100% { transform:scale(.9); opacity:.8; } }
@media (prefers-reduced-motion: reduce) { .recent-files .resume-btn .resume-dot { animation:none; } }
/* Parse quality badge: enhanced ring + numeric percent */
.quality-metric .quality-badge {
  display:inline-flex;
  align-items:center;
  gap:.5rem;
  padding:.15rem .5rem;
  border-radius:8px;
  font-size:.75rem;
  letter-spacing:.04em;
  font-weight:700;
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  color: var(--chart-accent);
}

.quality-metric .quality-badge .q-ring {
  width:36px;
  height:36px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  position:relative;
  flex:0 0 36px;
}

.quality-metric .quality-badge .q-ring-svg { width:36px; height:36px; display:block; transform:rotate(-90deg); }
.quality-metric .quality-badge .q-ring-bg {
  fill: none;
  stroke: color-mix(in srgb, var(--text-strong) 6%, #000 94%);
  stroke-width: 3.8;
}
.quality-metric .quality-badge .q-ring-fg {
  fill: none;
  stroke: var(--chart-accent);
  stroke-width: 3.8;
  stroke-linecap: round;
  transition: stroke-dasharray .6s cubic-bezier(.2,.9,.2,1), stroke .18s ease;
}

.quality-metric .quality-badge .q-label {
  font-size:0.95rem;
  font-weight:800;
  color:var(--text-strong);
  min-width:36px;
  text-align:center;
  font-variant-numeric:tabular-nums;
}
.quality-metric .quality-badge .q-text {
  font-size:0.62rem;
  color:var(--text-muted);
  text-transform:uppercase;
  letter-spacing:.08em;
}

/* Compact variant (used in metric rows for tighter layout) */
.quality-metric .quality-badge.compact {
  padding: .08rem .3rem;
  border-radius: 6px;
  gap: .4rem;
}
.quality-metric .quality-badge.compact .q-ring-svg { width:28px; height:28px; }
.quality-metric .quality-badge.compact .q-label { min-width:28px; font-size:0.82rem; }
.quality-metric .quality-badge.compact .q-text { font-size:0.58rem; }

/* Variants: map semantic label to ring color */
.quality-metric .quality-badge.q-excellent {
  background: color-mix(in srgb, var(--chart-positive) 8%, #0f1115 92%);
  color: var(--chart-positive);
  border-color: color-mix(in srgb, var(--chart-positive) 24%, #0f1115 76%);
}
.quality-metric .quality-badge.q-excellent .q-ring-fg { stroke: var(--chart-positive); }
.quality-metric .quality-badge.q-good {
  background: color-mix(in srgb, var(--chart-accent) 8%, #0f1115 92%);
  color: var(--chart-accent);
  border-color: color-mix(in srgb, var(--chart-accent) 20%, #0f1115 80%);
}
.quality-metric .quality-badge.q-good .q-ring-fg { stroke: var(--chart-accent); }
.quality-metric .quality-badge.q-fair {
  background: color-mix(in srgb, var(--chart-negative) 8%, #0f1115 92%);
  color: var(--chart-negative);
  border-color: color-mix(in srgb, var(--chart-negative) 20%, #0f1115 80%);
}
.quality-metric .quality-badge.q-fair .q-ring-fg { stroke: var(--chart-negative); }

/* Accessibility: focus + keyboard */
.quality-metric .quality-badge:focus-within, .quality-metric .quality-badge:focus-visible {
  outline:none;
  box-shadow: var(--focus-ring);
}

/* Make the outer metric container keyboard-focusable and show focus ring */
.quality-metric:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
  border-radius: 8px;
}

@media (prefers-reduced-motion: reduce) {
  .quality-metric .quality-badge .q-ring-fg {
    transition: none !important;
  }
}

/* Fallback for older simple markup (keeps previous look if new structure not present) */
.quality-metric .quality-badge.fallback { display:inline-block; padding:.15rem .55rem .2rem; border-radius:6px; font-size:.7rem; letter-spacing:.05em; font-weight:600; background:var(--panel-bg); border:1px solid var(--panel-border); color:var(--chart-accent); }

/* Short explanatory note under the quality metric + collapsible details */
.quality-explain {
  margin-top: .45rem;
  font-size: .72rem;
  color: var(--text-muted);
  max-width: 36ch;
  line-height: 1.28;
}
.quality-explain strong { color: var(--text-strong); font-weight:700; margin-right:.28rem; }

/* Collapsible explanation wrapper (visually matches panels) */
.quality-collapse { margin-top: .45rem; }
.quality-collapse-body {
  margin-top: .55rem;
  background: var(--panel-bg-alt);
  border: 1px solid var(--panel-border);
  padding: .6rem .7rem;
  border-radius: 8px;
  box-shadow: 0 4px 10px -6px rgba(0,0,0,.5);
  color: var(--text-base);
  font-size: .8rem;
  line-height: 1.35;
}

/* Toggle that opens the explanation: styled like a subtle link-button but keyboard friendly */
.quality-collapse-toggle {
  display:inline-flex;
  align-items:center;
  gap:.45rem;
  background:transparent;
  border:0;
  color:var(--accent);
  font-weight:700;
  cursor:pointer;
  padding:0.12rem .28rem;
  border-radius:6px;
  font-size:.82rem;
}
.quality-collapse-toggle:hover { color:var(--accent-hover); }
.quality-collapse-toggle:focus-visible { outline:none; box-shadow:var(--focus-ring); }
.quality-collapse-toggle .chev { display:inline-block; transition:transform .22s cubic-bezier(.2,.9,.2,1); }
.quality-collapse-toggle .chev.open { transform:rotate(180deg); }

/* Actions row inside the collapse (view unparsed etc.) */
.quality-actions { margin-top:.6rem; display:flex; align-items:center; gap:.6rem; flex-wrap:wrap; }
.quality-actions .link-btn {
  background:transparent;
  border:0;
  padding:0.18rem .45rem .22rem;
  color:var(--link-accent);
  font-weight:700;
  cursor:pointer;
  border-radius:8px;
  font-size:.82rem;
}
.quality-actions .link-btn:hover { color:var(--link-accent-hover); text-decoration:underline; }
.quality-actions .link-btn:focus-visible { outline:none; box-shadow:var(--focus-ring); }

/* Themed variant for the parse-quality popover trigger to match other primary/secondary controls */
.quality-popover-btn {
  background: linear-gradient(135deg, var(--panel-bg) 0%, var(--panel-bg-alt) 80%);
  border: 1px solid var(--panel-border);
  color: var(--text-base);
  padding: .18rem .36rem .2rem; /* compact */
  border-radius: 6px;
  font-size: .72rem; /* smaller */
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 2px 6px -4px rgba(0,0,0,.45), 0 1px 0 rgba(255,255,255,.03) inset;
  transition: background .14s, box-shadow .14s, transform .1s;
}
.quality-popover-btn:hover { background: linear-gradient(135deg, var(--panel-bg-alt) 0%, var(--panel-bg) 80%); }
.quality-popover-btn.open { transform: translateY(-1px); box-shadow: 0 6px 14px -6px rgba(0,0,0,.5); }
.quality-popover-btn:focus-visible { outline: none; box-shadow: var(--focus-ring); }

/* Small muted hint text used beside actions */
.hint-muted { color:var(--text-muted); font-size:.78rem; }

@media (prefers-reduced-motion: reduce) {
  .quality-collapse-toggle .chev { transition:none !important; }
  .quality-collapse-body { transition:none !important; }
}

.resume-chip button { background:#22313f; color:#e6e9ee; border:1px solid #314051; padding:.4rem .65rem .45rem; font-size:.55rem; font-weight:600; letter-spacing:.07em; text-transform:uppercase; border-radius:8px; cursor:pointer; }
.resume-chip button:hover { background:#283a4a; }
.benefits-heading { margin:0 0 .9rem; font-size:1rem; letter-spacing:.1em; text-transform:uppercase; font-weight:650; background:linear-gradient(90deg,#ffe6a6,#ffb347 70%); -webkit-background-clip:text; background-clip:text; color:transparent; }
.benefit-cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:.7rem .9rem; }
.benefit-cards .benefit { background:#161d25; border:1px solid #24303d; padding:.65rem .7rem .7rem; border-radius:12px; font-size:.66rem; line-height:1.3; display:flex; flex-direction:column; gap:.25rem; box-shadow:0 2px 4px rgba(0,0,0,.35); }
.benefit-cards .benefit strong { font-size:.6rem; letter-spacing:.08em; text-transform:uppercase; font-weight:700; color:#ffb347; }
.benefit-cards.skeleton .benefit.sk { height:72px; animation:shimmer 1.4s ease-in-out infinite; background:linear-gradient(90deg,#1d2732 0%,#243240 40%,#1d2732 80%); border:1px solid #24303d; }
.sample-preview { background: var(--panel-bg, #161d25); border:1px solid var(--panel-border, #24303d); border-radius:12px; margin:.4rem 0 .5rem; padding:.55rem .65rem; display:flex; flex-direction:column; gap:.4rem; box-shadow:0 8px 20px -12px rgba(0,0,0,.55); }
.sample-preview .sp-head { font-size:.62rem; letter-spacing:.11em; text-transform:uppercase; font-weight:700; color:var(--accent, #ffb347); }
.sample-preview .sp-body { display:flex; flex-wrap:wrap; gap:.8rem 1.2rem; align-items:center; }
.sample-preview .sp-spark { width:160px; height:42px; flex:0 0 auto; filter:drop-shadow(0 6px 18px rgba(0,0,0,.5)); border-radius:8px; overflow:hidden; }
.sp-spark .sp-pulse { opacity:.9; animation:spPulseScale 3.2s cubic-bezier(.4,0,.2,1) infinite; filter:drop-shadow(0 0 4px rgba(26,169,155,.55)); }
.dark .sp-spark .sp-pulse { opacity:.85; }
@keyframes spPulseScale { 0% { transform:scale(.55); opacity:.05; } 12% { transform:scale(.9); opacity:.95; } 50% { transform:scale(.65); opacity:.45; } 100% { transform:scale(.55); opacity:.05; } }
.sample-preview .sp-metrics { display:flex; gap:1.1rem; flex-wrap:wrap; font-size:.58rem; }
.sample-preview .sp-metrics div { display:flex; flex-direction:column; gap:.2rem; }
.sample-preview .sp-metrics .lbl { font-size:.5rem; letter-spacing:.09em; text-transform:uppercase; font-weight:600; opacity:.55; }
.sample-preview .sp-metrics strong { font-size:.7rem; font-weight:600; color:var(--text-strong); }
.sample-preview .sp-foot { font-size:.52rem; line-height:1.25; opacity:.55; }
.settings-btn { background:#19222c; border:1px solid #2c3845; color:#d5dae0; padding:.5rem .75rem .55rem; border-radius:8px; font-size:.6rem; letter-spacing:.07em; font-weight:600; text-transform:uppercase; cursor:pointer; }
.settings-btn:hover { background:#1f2a35; }
.settings-panel { background:#161d25; border:1px solid #24303d; border-radius:14px; padding:.75rem .85rem .85rem; margin:.6rem 0 .4rem; display:flex; flex-direction:column; gap:.6rem; }
.settings-panel .setting-row { display:flex; flex-wrap:wrap; gap:.5rem; }
/* Unified settings buttons styling (match app theme) */
.settings-panel button { position:relative; background:linear-gradient(135deg,#19222c 0%,#202b37 70%); border:1px solid #2c3b4a; color:#d9dee3; padding:.55rem .85rem .6rem; border-radius:10px; font-size:.58rem; letter-spacing:.07em; font-weight:600; text-transform:uppercase; cursor:pointer; box-shadow:0 3px 8px -4px rgba(0,0,0,.55), 0 1px 0 rgba(255,255,255,.04) inset; transition:background .25s, box-shadow .25s, transform .2s, border-color .25s, color .25s; }
.settings-panel button:before { content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(120deg,rgba(255,179,71,.55),rgba(255,179,71,0) 45%, rgba(90,214,125,.35)); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.45; pointer-events:none; transition:opacity .35s; }
.settings-panel button:hover { background:linear-gradient(135deg,#1f2a35 0%,#273544 70%); box-shadow:0 5px 14px -6px rgba(0,0,0,.65), 0 1px 0 rgba(255,255,255,.05) inset; }
.settings-panel button:active { transform:translateY(1px); background:linear-gradient(135deg,#1a242d 0%,#22303d 70%); }
.settings-panel button:focus-visible { outline:none; box-shadow:0 0 0 2px #0f1115, 0 0 0 4px #ffb347; }
/* Variant accents */
.settings-panel .contrast-btn { background:linear-gradient(135deg,#25202f,#2e2740 70%); border-color:#3a2f4d; }
.settings-panel .contrast-btn:hover { background:linear-gradient(135deg,#2e2740,#382f4f 70%); }
.settings-panel .date-btn { background:linear-gradient(135deg,#262739,#2f3146 70%); border-color:#353650; }
.settings-panel .date-btn:hover { background:linear-gradient(135deg,#2f3146,#383a54 70%); }
.settings-panel .clear-all-btn { background:linear-gradient(135deg,#352226,#40292d 70%); border-color:#4a2f33; color:#f1d4d6; }
.settings-panel .clear-all-btn:hover { background:linear-gradient(135deg,#40292d,#4a3136 70%); }
html.high-contrast .settings-panel button { background:#000 !important; color:#fff !important; border-color:#fff !important; box-shadow:none; }
html.high-contrast .settings-panel button:before { display:none; }
.drag-overlay { position:absolute; inset:0; background:rgba(15,17,21,.72); backdrop-filter:blur(3px); display:flex; align-items:center; justify-content:center; z-index:25; border:2px dashed #ffb347; border-radius:18px; }
.drag-overlay-inner { font-size:1rem; letter-spacing:.06em; text-transform:uppercase; font-weight:700; background:#11181f; padding:1.2rem 1.6rem 1.3rem; border:1px solid #27323d; border-radius:16px; color:#ffb347; box-shadow:0 6px 18px -6px rgba(0,0,0,.65); }
.progress-steps div { background:#1b242e; border:1px solid #27323d; padding:.4rem .55rem .5rem; border-radius:10px; font-size:.58rem; font-weight:600; letter-spacing:.07em; text-transform:uppercase; display:flex; align-items:center; gap:.45rem; }
.progress-steps .step-index { background:#ffb347; color:#111; font-size:.55rem; padding:.2rem .45rem .25rem; border-radius:6px; font-weight:700; letter-spacing:.06em; }
.pdf-badge { background:#2a3642; color:#ffb347; font-size:.55rem; padding:.2rem .4rem .25rem; border-radius:6px; font-weight:600; letter-spacing:.05em; }
.idle-arrow { font-size:1.4rem; opacity:.25; animation:floatDown 2.2s ease-in-out infinite; text-align:center; }
@keyframes floatDown { 0% { transform:translateY(0);} 50% { transform:translateY(8px);} 100% { transform:translateY(0);} }
.tour-content.whatsnew { max-width:520px; }
.tour-content.whatsnew .changelog { list-style:disc; margin:.2rem 0 .2rem 1.1rem; padding:0; display:grid; gap:.4rem; }
.tour-content.whatsnew .changelog li { font-size:.62rem; line-height:1.3; }

/* Uniform column sizing for Category, Amount, Balance, Type */
th.col-category, td.col-category { width:8rem; max-width:8rem; }
th.col-amount, td.col-amount { width:7rem; max-width:7rem; }
th.col-balance, td.col-balance { width:7rem; max-width:7rem; }
th.col-type, td.col-type { width:6rem; max-width:6rem; }
th.col-category, th.col-amount, th.col-balance, th.col-type,
td.col-category, td.col-amount, td.col-balance, td.col-type { white-space:nowrap; }

/* Themed category select to match global controls */
.col-category .category-select {
  width:100%;
  background:var(--btn-bg, #19222c);
  color:var(--text-base, #e6e9ee);
  border:1px solid var(--btn-border, #2c3845);
  padding:3px 8px;
  height:26px; /* tighter to sit nicely inside the 32px row */
  min-width:110px;
  border-radius:8px;
  font-size:0.9rem;
  line-height:1.1;
  display:inline-block; vertical-align:middle;
}
.col-category .category-select:focus-visible {
  outline:none;
  /* Shorter, subtler bubble to match row density */
  box-shadow: 0 1px 6px rgba(0,0,0,0.45), 0 0 0 2px rgba(15,17,21,0.85), 0 0 0 4px rgba(255,179,71,0.08);
  border-color: rgba(255,179,71,0.18);
}
/* When user overrides a category, surface text in theme yellow */
.col-category.category-override,
.col-category .category-select.override {
  color: var(--accent, #ffb347) !important;
  font-weight:600;
}

/* Remove native arrow, add custom caret and subtle styling for the dropdown control */
.col-category .category-select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  padding-right: 34px; /* space for custom caret */
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 6'><path d='M1 1.5 L5 4.5 L9 1.5' stroke='%239fb1bd' stroke-width='1.4' stroke-linecap='round' stroke-linejoin='round' fill='none'/></svg>");
  background-repeat: no-repeat;
  background-position: right 8px center;
  background-size: 12px 8px;
  transition: box-shadow .14s ease, border-color .12s ease, background-color .12s ease;
}
.col-category .category-select::-ms-expand { display:none; }

/* Make the dropdown list (options) adopt a dark background where supported */
.col-category .category-select option {
  background: var(--btn-bg, #19222c);
  color: var(--text-base, #e6e9ee);
}

/* Subtle hover/focus states to make popup less 'loud' */
.col-category .category-select:hover {
  border-color: rgba(255,255,255,0.04);
}
.col-category .category-select:active, .col-category .category-select:focus {
  box-shadow: 0 1px 6px rgba(0,0,0,0.48);
}



/* Enlarged categorize & AI toggle enhancements */
.categorize-btn.inline.large { font-size:.85rem; font-weight:600; letter-spacing:.5px; padding:.55rem .9rem .6rem; border:1px solid var(--accent-border, #2b6c9e); box-shadow:0 0 0 1px rgba(255,255,255,0.05),0 2px 4px -1px rgba(0,0,0,.5); }
.categorize-btn.inline.large.needs-action { animation:pulseSoft 2.2s ease-in-out infinite; }
@keyframes pulseSoft { 0%,100% { box-shadow:0 0 0 1px rgba(255,255,255,0.05), 0 2px 4px -1px rgba(0,0,0,.5), 0 0 0 0 rgba(0,170,255,.35); } 50% { box-shadow:0 0 0 1px rgba(255,255,255,0.05), 0 2px 6px -1px rgba(0,0,0,.55), 0 0 0 6px rgba(0,170,255,0); } }
.ai-toggle-block { display:flex; align-items:center; gap:.4rem; }

/* Revamped Categorize button */
.categorize-btn.revamp-cat { position:relative; overflow:hidden; border-radius:12px; padding:.9rem 1.15rem 1rem; background:#15212b; border:1px solid #264356; font-size:.78rem; font-weight:650; letter-spacing:.08em; text-transform:uppercase; color:#eef4f7; display:inline-flex; align-items:center; justify-content:center; gap:.55rem; isolation:isolate; }
.categorize-btn.revamp-cat.is-uncategorize { background:#27171a; border-color:#5a2e36; }
.categorize-btn.revamp-cat.is-uncategorize .cat-btn-bg { background:radial-gradient(circle at 30% 35%, rgba(255,107,107,.45), rgba(255,107,107,0) 65%), linear-gradient(135deg,#2a1a1d,#1d1315 55%,#2a1a1d); }
.categorize-btn.revamp-cat.is-uncategorize .cat-btn-glow { background:conic-gradient(from 0deg, rgba(255,107,107,.85), rgba(255,179,71,.6), rgba(255,107,107,.85)); opacity:.45; }
.categorize-btn.revamp-cat.flash-once { animation:catFlashSuccess 1.2s ease-in-out 1; }
@keyframes catFlashSuccess { 0% { box-shadow:0 0 0 0 rgba(90,214,125,.0),0 0 0 0 rgba(255,179,71,0); } 30% { box-shadow:0 0 0 2px rgba(90,214,125,.5),0 0 12px 4px rgba(255,179,71,.35); } 70% { box-shadow:0 0 0 2px rgba(90,214,125,.25),0 0 6px 2px rgba(255,179,71,.15); } 100% { box-shadow:0 0 0 0 rgba(90,214,125,0),0 0 0 0 rgba(255,179,71,0); } }
.categorize-btn.revamp-cat .cat-btn-bg { position:absolute; inset:0; background:radial-gradient(circle at 30% 35%, rgba(255,179,71,.4), rgba(255,179,71,0) 65%), linear-gradient(135deg,#173040,#12212d 55%,#173040); opacity:.9; }
.categorize-btn.revamp-cat .cat-btn-glow { position:absolute; inset:-1px; padding:1px; border-radius:inherit; background:conic-gradient(from 0deg, rgba(255,179,71,.8), rgba(51,209,192,.5), rgba(255,179,71,.8)); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.4; transition:opacity .5s; }
.categorize-btn.revamp-cat:hover .cat-btn-glow { opacity:.8; }
.categorize-btn.revamp-cat:focus-visible { outline:none; box-shadow:0 0 0 3px #0f1115, 0 0 0 6px #ffb347; }
.categorize-btn.revamp-cat .cat-btn-content { position:relative; z-index:2; display:inline-flex; align-items:center; gap:.55rem; }
.categorize-btn.revamp-cat .cat-label { background:linear-gradient(90deg,#ffe0a8,#ffb347 55%,#ffd27f); -webkit-background-clip:text; background-clip:text; color:transparent; text-shadow:0 0 6px rgba(255,179,71,.45); }
.categorize-btn.revamp-cat.needs-action { animation:revampGlow 2.8s ease-in-out infinite; }

/* Dashboard Summary Card Styles */
.summary-card {
  background: linear-gradient(135deg, #1a242e 0%, #161d25 100%);
  border: 1px solid #24313d;
  border-radius: 12px;
  padding: 1rem 1.2rem;
  margin-bottom: 1.2rem;
  box-shadow: 0 4px 12px -6px rgba(0,0,0,.55), 0 2px 4px rgba(0,0,0,.35);
  display: flex;
  flex-direction: column;
  gap: .8rem;
}

.summary-card:before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(circle at 85% 12%, rgba(255,179,71,.08), transparent 60%);
  pointer-events: none;
}

.summary-card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: .2rem;
  position: relative;
  z-index: 1;
}

.summary-card-title {
  font-size: .82rem;
  letter-spacing: .09em;
  text-transform: uppercase;
  font-weight: 700;
  color: #ffb347;
}

.summary-card-period {
  font-size: .62rem;
  letter-spacing: .05em;
  text-transform: uppercase;
  color: var(--text-muted);
  font-weight: 600;
}

.summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: .8rem;
  position: relative;
  z-index: 1;
}

.summary-item {
  background: linear-gradient(135deg, #151c24 0%, #0f1418 100%);
  border: 1px solid #1f2a36;
  border-radius: 10px;
  padding: .7rem .75rem;
  display: flex;
  flex-direction: column;
  gap: .3rem;
  box-shadow: 0 2px 6px -4px rgba(0,0,0,.5), 0 1px 0 rgba(255,255,255,.02) inset;
  transition: all .25s ease;
}

.summary-item:hover {
  border-color: #2b3a46;
  box-shadow: 0 4px 12px -6px rgba(0,0,0,.6), 0 1px 0 rgba(255,255,255,.03) inset;
  transform: translateY(-2px);
}

.summary-item-label {
  font-size: .62rem;
  letter-spacing: .08em;
  text-transform: uppercase;
  font-weight: 700;
  color: var(--text-muted);
}

.summary-item-value {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--text-strong);
  font-variant-numeric: tabular-nums;
}

.summary-item.inflow .summary-item-value {
  color: #5ad67d;
}

.summary-item.outflow .summary-item-value {
  color: #ff6b6b;
}

.summary-item.net .summary-item-value {
  background: linear-gradient(90deg, #5ad67d 0%, #37b468 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.summary-item.net.negative .summary-item-value {
  background: linear-gradient(90deg, #ff6b6b 0%, #ff9c6b 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.summary-item.average .summary-item-value {
  color: #9d7ef7;
}

.summary-item-subtitle {
  font-size: .58rem;
  letter-spacing: .04em;
  color: var(--text-muted);
  opacity: .75;
  margin-top: .15rem;
}

@media (max-width: 900px) {
  .summary-card {
    padding: .85rem 1rem;
    gap: .6rem;
  }

  .summary-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: .6rem;
  }

  .summary-item {
    padding: .6rem .65rem;
  }
}

@media (max-width: 640px) {
  .summary-card {
    padding: .7rem .8rem;
    margin-bottom: 1rem;
  }

  .summary-card-title {
    font-size: .75rem;
  }

  .summary-card-period {
    font-size: .58rem;
  }

  .summary-grid {
    grid-template-columns: 1fr;
    gap: .5rem;
  }

  .summary-item {
    padding: .55rem .6rem;
  }

  .summary-item-value {
    font-size: 1rem;
  }

  .summary-item-label {
    font-size: .58rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  .summary-item {
    transition: none;
  }
}

/* Toast Notifications */
.toast-container {
  position: fixed;
  bottom: 1.2rem;
  right: 1.2rem;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: .6rem;
  max-width: 400px;
  pointer-events: none;
}

.toast-item {
  display: flex;
  align-items: flex-start;
  gap: .8rem;
  padding: 1rem 1.2rem;
  border-radius: 10px;
  box-shadow: 0 8px 24px -8px rgba(0,0,0,.6), 0 4px 8px -2px rgba(0,0,0,.4);
  animation: toastSlideIn .28s cubic-bezier(.4,0,.2,1);
  pointer-events: auto;
  position: relative;
  border-left: 4px solid;
  border-left-color: inherit;
}

@keyframes toastSlideIn {
  from {
    opacity: 0;
    transform: translateX(120%) translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0) translateY(0);
  }
}

@keyframes toastSlideOut {
  from {
    opacity: 1;
    transform: translateX(0) translateY(0);
  }
  to {
    opacity: 0;
    transform: translateX(120%) translateY(20px);
  }
}

.toast-item.removing {
  animation: toastSlideOut .24s cubic-bezier(.4,0,.2,1);
}

.toast-icon {
  flex: 0 0 24px;
  font-weight: 700;
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 24px;
}

.toast-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: .4rem;
  min-width: 0;
}

.toast-message {
  margin: 0;
  font-size: .9rem;
  line-height: 1.35;
  font-weight: 500;
  word-break: break-word;
}

.toast-action {
  align-self: flex-start;
  background: none;
  border: none;
  padding: 0;
  font-size: .85rem;
  font-weight: 700;
  letter-spacing: .05em;
  text-transform: uppercase;
  cursor: pointer;
  text-decoration: underline;
  opacity: .9;
  transition: opacity .2s ease;
}

.toast-action:hover {
  opacity: 1;
}

.toast-action:focus-visible {
  outline: 2px solid currentColor;
  outline-offset: 2px;
  border-radius: 3px;
}

.toast-close {
  flex: 0 0 24px;
  background: none;
  border: none;
  padding: 0;
  font-size: 1.2rem;
  font-weight: 600;
  cursor: pointer;
  opacity: .7;
  transition: opacity .2s ease, transform .15s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 24px;
}

.toast-close:hover {
  opacity: 1;
  transform: scale(1.1);
}

.toast-close:focus-visible {
  outline: 2px solid currentColor;
  outline-offset: 2px;
  border-radius: 3px;
}

@media (max-width: 640px) {
  .toast-container {
    bottom: .8rem;
    right: .8rem;
    left: .8rem;
    max-width: none;
  }

  .toast-item {
    padding: .85rem 1rem;
    gap: .6rem;
  }

  .toast-message {
    font-size: .85rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  .toast-item {
    animation: none;
  }
  
  .toast-close {
    transition: none;
  }
}

/* Empty State */
.empty-state {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 360px;
  padding: 2rem;
  background: linear-gradient(135deg, #0f1418 0%, #131a23 100%);
  border: 2px dashed #24313d;
  border-radius: 14px;
  margin: 2rem 0 1.2rem;
}

.empty-state-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  text-align: center;
  max-width: 420px;
}

.empty-icon {
  font-size: 3.5rem;
  animation: floatEmoji 2.8s ease-in-out infinite;
}

@keyframes floatEmoji {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-12px); }
}

.empty-title {
  margin: 0;
  font-size: 1.2rem;
  font-weight: 700;
  letter-spacing: .04em;
  color: var(--text-strong);
}

.empty-message {
  margin: 0;
  font-size: .95rem;
  line-height: 1.5;
  color: var(--text-muted);
}

.empty-action {
  background: linear-gradient(135deg, #ffb347, #ffd27f);
  color: #111;
  border: none;
  padding: .75rem 1.4rem .8rem;
  border-radius: 10px;
  font-size: .85rem;
  font-weight: 700;
  letter-spacing: .06em;
  text-transform: uppercase;
  cursor: pointer;
  margin-top: .4rem;
  transition: all .25s ease;
  box-shadow: 0 6px 16px -6px rgba(0,0,0,.5);
}

.empty-action:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px -6px rgba(0,0,0,.6);
  filter: brightness(1.05);
}

.empty-action:active {
  transform: translateY(0);
}

.empty-action:focus-visible {
  outline: 3px solid #ffe6a6;
  outline-offset: 3px;
}

@media (max-width: 640px) {
  .empty-state {
    min-height: 280px;
    padding: 1.5rem;
    margin: 1.2rem 0 1rem;
    border-width: 1px;
  }

  .empty-icon {
    font-size: 2.8rem;
  }

  .empty-title {
    font-size: 1.05rem;
  }

  .empty-message {
    font-size: .9rem;
  }

  .empty-action {
    padding: .65rem 1.1rem .7rem;
    font-size: .8rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  .empty-icon {
    animation: none;
  }
}

/* Keyboard Shortcuts Modal */
.keyboard-shortcuts-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .65);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10100;
  animation: fadeIn .25s ease;
}

.keyboard-shortcuts-modal {
  background: #161d25;
  border: 1px solid #24303d;
  border-radius: 16px;
  width: min(600px, 92vw);
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 14px 36px -10px rgba(0,0,0,.8);
  animation: popIn .35s cubic-bezier(.4,0,.2,1);
}

.ks-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.4rem 1.6rem;
  border-bottom: 1px solid #24303d;
}

.ks-header h2 {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 700;
  letter-spacing: .06em;
  text-transform: uppercase;
  background: linear-gradient(90deg, #ffb347, #ffd86b);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.ks-close {
  background: none;
  border: none;
  font-size: 1.4rem;
  color: #9fb1bd;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color .2s ease, transform .15s ease;
}

.ks-close:hover {
  color: #e6e9ee;
  transform: scale(1.1);
}

.ks-close:focus-visible {
  outline: 2px solid #ffb347;
  outline-offset: 2px;
  border-radius: 4px;
}

.ks-content {
  padding: 1.4rem 1.6rem;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
}

.ks-section {
  display: flex;
  flex-direction: column;
  gap: .6rem;
}

.ks-section h3 {
  margin: 0 0 .4rem;
  font-size: .85rem;
  letter-spacing: .1em;
  text-transform: uppercase;
  font-weight: 700;
  color: #ffb347;
}

.ks-item {
  display: flex;
  align-items: center;
  gap: 1.2rem;
  font-size: .9rem;
  line-height: 1.4;
}

.ks-keys {
  display: flex;
  align-items: center;
  gap: .35rem;
  flex-shrink: 0;
}

.ks-keys kbd {
  background: #1b242e;
  border: 1px solid #2b3743;
  padding: .28rem .5rem .32rem;
  border-radius: 6px;
  font-size: .78rem;
  font-weight: 600;
  font-family: 'Monaco', 'Menlo', monospace;
  color: #d2d7dc;
  box-shadow: 0 2px 4px rgba(0,0,0,.4);
}

.ks-footer {
  padding: 1rem 1.6rem;
  border-top: 1px solid #24303d;
  font-size: .8rem;
  color: var(--text-muted);
  text-align: center;
}

.ks-footer code {
  background: #1b242e;
  padding: .2rem .4rem;
  border-radius: 4px;
  font-family: 'Monaco', 'Menlo', monospace;
  font-weight: 600;
  color: #ffb347;
}

@media (max-width: 640px) {
  .keyboard-shortcuts-modal {
    width: 95vw;
    max-height: 90vh;
  }

  .ks-header {
    padding: 1.2rem;
  }

  .ks-header h2 {
    font-size: .95rem;
  }

  .ks-content {
    padding: 1rem 1.2rem;
    gap: 1rem;
  }

  .ks-section h3 {
    font-size: .8rem;
  }

  .ks-item {
    gap: .8rem;
    font-size: .85rem;
  }

  .ks-footer {
    padding: .85rem 1.2rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  .keyboard-shortcuts-modal-overlay,
  .keyboard-shortcuts-modal {
    animation: none;
  }
}

/* ===== PHASE 2: MEDIUM PRIORITY ENHANCEMENTS ===== */

/* Skeleton Loaders */
.skeleton {
  background: linear-gradient(
    90deg,
    #1d2732 0%,
    #243240 40%,
    #1d2732 80%
  );
  background-size: 200% 100%;
  animation: skeletonShimmer 1.5s infinite linear;
  border-radius: 8px;
}

@keyframes skeletonShimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.skeleton-card {
  border-radius: 12px;
}

.skeleton-row {
  border-radius: 6px;
  margin-bottom: 0.5rem;
}

.skeleton-chart {
  border-radius: 10px;
}

.skeleton-group {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

.metrics.skeleton .skeleton-card {
  border-radius: var(--panel-radius);
  border: 1px solid var(--surface-1-border);
  box-shadow: var(--card-surface-shadow);
}

.charts-row.skeleton .skeleton-chart {
  border-radius: var(--panel-radius);
  border: 1px solid var(--surface-1-border);
  box-shadow: var(--card-surface-shadow);
}

.skeleton-table {
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  border-radius: 10px;
  padding: 1rem;
}

.skeleton-table-header {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 0.8rem;
  padding-bottom: 0.8rem;
  margin-bottom: 0.8rem;
  border-bottom: 1px solid var(--panel-border);
}

.skeleton-table-body {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

.skeleton-table-row {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 0.8rem;
  padding: 0.6rem 0;
}

@media (prefers-reduced-motion: reduce) {
  .skeleton {
    animation: none;
    background: #1d2732;
  }
}

/* Filter Presets */
.filter-presets {
  background: linear-gradient(135deg, #1a242e 0%, #161d25 100%);
  border: 1px solid #24313d;
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: 1.2rem;
}

.filter-presets-header {
  margin-bottom: 0.8rem;
}

.filter-presets-title {
  margin: 0;
  font-size: 0.82rem;
  letter-spacing: 0.09em;
  text-transform: uppercase;
  font-weight: 700;
  color: #ffb347;
}

.filter-presets-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 0.6rem;
}

.filter-preset-item {
  position: relative;
  display: flex;
  align-items: center;
}

.filter-preset-btn {
  width: 100%;
  background: linear-gradient(135deg, #15212b 0%, #0f1418 100%);
  border: 1px solid #1f2a36;
  border-radius: 8px;
  padding: 0.6rem 0.8rem;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: #d2d7dc;
  cursor: pointer;
  transition: all 0.2s ease;
}

.filter-preset-btn:hover {
  background: linear-gradient(135deg, #1f2a35 0%, #1a1f27 100%);
  border-color: #2b3a46;
  color: #ffb347;
  transform: translateY(-1px);
}

.filter-preset-btn:active {
  transform: translateY(0);
}

.filter-preset-btn:focus-visible {
  outline: 2px solid #ffb347;
  outline-offset: 2px;
  border-radius: 6px;
}

.filter-preset-label {
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.filter-preset-delete {
  position: absolute;
  top: -8px;
  right: -8px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: #ff6b6b;
  border: none;
  color: #fff;
  font-size: 0.8rem;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.filter-preset-item:hover .filter-preset-delete {
  opacity: 1;
}

.filter-preset-delete:hover {
  transform: scale(1.1);
  background: #ff5555;
}

@media (max-width: 640px) {
  .filter-presets-grid {
    grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
    gap: 0.5rem;
  }

  .filter-preset-btn {
    padding: 0.5rem 0.6rem;
    font-size: 0.7rem;
  }
}

/* Insights Panel */
.insights-panel {
  background: linear-gradient(135deg, #1a242e 0%, #161d25 100%);
  border: 1px solid #24313d;
  border-radius: 14px;
  padding: 1.4rem;
  margin-bottom: 1.2rem;
}

.insights-panel.empty {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
  color: var(--text-muted);
  font-size: 0.95rem;
}

.insights-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.2rem;
}

.insights-section {
  background: linear-gradient(135deg, #151c24 0%, #0f1418 100%);
  border: 1px solid #1f2a36;
  border-radius: 10px;
  padding: 1rem;
}

.insights-section h3 {
  margin: 0 0 0.8rem;
  font-size: 0.85rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: #ffb347;
}

.insights-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.insights-item {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  padding: 0.6rem;
  background: #0f1418;
  border-radius: 6px;
  font-size: 0.8rem;
  line-height: 1.3;
}

.insights-rank {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: #ffb347;
  color: #111;
  font-weight: 700;
  flex-shrink: 0;
}

.insights-label {
  flex: 1;
  min-width: 0;
  color: var(--text-base);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.insights-value {
  color: #5ad67d;
  font-weight: 700;
  font-variant-numeric: tabular-nums;
  flex-shrink: 0;
}

.insights-item.anomaly {
  background: linear-gradient(135deg, #47232b 0%, #2b1a1f 100%);
  border: 1px solid #5a3134;
}

.insights-item.anomaly .insights-label {
  color: #ff6b6b;
}

.anomaly-reason {
  font-size: 0.72rem;
  color: #ffb347;
  font-weight: 600;
  flex-shrink: 0;
}

.insights-days-bars {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.day-bar-item {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  font-size: 0.8rem;
}

.day-label {
  min-width: 32px;
  font-weight: 600;
  color: var(--text-muted);
}

.day-bar-track {
  flex: 1;
  height: 6px;
  background: #0f1418;
  border-radius: 3px;
  overflow: hidden;
  border: 1px solid #1f2a36;
}

.day-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #4db7ff, #5ad67d);
  transition: width 0.3s ease;
}

.insights-metrics {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.insights-metric {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.6rem;
  background: #0f1418;
  border-radius: 6px;
}

.insights-metric span {
  font-size: 0.8rem;
  color: var(--text-muted);
}

.insights-metric strong {
  font-size: 1rem;
  font-weight: 700;
  color: #ffb347;
  font-variant-numeric: tabular-nums;
}

@media (max-width: 900px) {
  .insights-grid {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }
}

@media (max-width: 640px) {
  .insights-panel {
    padding: 1rem;
  }

  .insights-grid {
    grid-template-columns: 1fr;
    gap: 0.8rem;
  }

  .insights-section {
    padding: 0.85rem;
  }

  .insights-section h3 {
    font-size: 0.8rem;
    margin-bottom: 0.6rem;
  }

  .insights-item {
    padding: 0.5rem;
    gap: 0.5rem;
    font-size: 0.75rem;
  }

  .insights-rank {
    width: 20px;
    height: 20px;
    font-size: 0.75rem;
  }
}

/* ===== PHASE 3: POLISH & ADVANCED FEATURES ===== */

/* Bulk Actions Bar */
.bulk-actions-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(135deg, #1a242e 0%, #161d25 100%);
  border-top: 2px solid #24313d;
  box-shadow: 0 -6px 20px -8px rgba(0,0,0,.6);
  z-index: 9000;
  animation: slideUp .25s cubic-bezier(.4,0,.2,1);
  padding: 1rem 0;
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.bulk-actions-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1.2rem;
  padding: 0 1.2rem;
  max-width: 1400px;
  margin: 0 auto;
}

.bulk-actions-left {
  flex: 0 0 auto;
}

.bulk-count {
  font-size: 0.9rem;
  color: var(--text-base);
  font-weight: 600;
}

.bulk-count strong {
  color: #ffb347;
  font-weight: 700;
}

.bulk-actions-center {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.bulk-action-group {
  position: relative;
}

.bulk-action-dropdown {
  position: relative;
}

.bulk-action-btn {
  background: linear-gradient(135deg, #15212b 0%, #0f1418 100%);
  border: 1px solid #1f2a36;
  color: #d2d7dc;
  padding: 0.6rem 1rem 0.65rem;
  border-radius: 8px;
  font-size: 0.8rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.2s ease;
}

.bulk-action-btn:not(:disabled):hover {
  background: linear-gradient(135deg, #1f2a35 0%, #1a1f27 100%);
  border-color: #2b3a46;
  color: #ffb347;
  transform: translateY(-1px);
}

.bulk-action-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.bulk-action-btn.secondary {
  background: linear-gradient(135deg, #472226 0%, #3d1a1f 100%);
  border-color: #5a3134;
  color: #ff6b6b;
}

.bulk-action-btn.secondary:not(:disabled):hover {
  background: linear-gradient(135deg, #55292e 0%, #482226 100%);
  color: #ffb3b3;
}

.bulk-action-btn.ghost {
  background: transparent;
  border: 1px solid #2b3743;
}

.bulk-action-btn.ghost:not(:disabled):hover {
  background: rgba(255, 255, 255, 0.05);
}

.bulk-action-btn.confirm {
  background: linear-gradient(135deg, #5ad67d 0%, #37b468 100%);
  border-color: #4ac76d;
  color: #000;
}

.bulk-action-btn.confirm:not(:disabled):hover {
  filter: brightness(1.08);
  transform: translateY(-1px);
}

.bulk-category-menu {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 0.4rem;
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  border-radius: 8px;
  box-shadow: 0 8px 24px -8px rgba(0,0,0,.6);
  z-index: 1000;
  min-width: 160px;
  max-height: 300px;
  overflow-y: auto;
}

.bulk-category-item {
  display: block;
  width: 100%;
  background: none;
  border: none;
  text-align: left;
  padding: 0.7rem 1rem;
  font-size: 0.8rem;
  color: var(--text-base);
  cursor: pointer;
  transition: all 0.15s ease;
  font-weight: 500;
}

.bulk-category-item:not(:disabled):hover {
  background: rgba(255, 179, 71, 0.1);
  color: #ffb347;
}

.bulk-category-item:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.bulk-actions-right {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

.bulk-confirm-text {
  font-size: 0.85rem;
  color: var(--text-muted);
  font-weight: 600;
}

@media (max-width: 900px) {
  .bulk-actions-inner {
    gap: 0.8rem;
    padding: 0 0.8rem;
  }

  .bulk-actions-right {
    gap: 0.4rem;
  }

  .bulk-action-btn {
    padding: 0.5rem 0.8rem;
    font-size: 0.75rem;
  }
}

@media (max-width: 640px) {
  .bulk-actions-bar {
    padding: 0.8rem 0;
  }

  .bulk-actions-inner {
    flex-direction: column;
    gap: 0.6rem;
    padding: 0 0.8rem;
  }

  .bulk-actions-left,
  .bulk-actions-center,
  .bulk-actions-right {
    width: 100%;
  }

  .bulk-actions-center {
    order: 3;
  }

  .bulk-action-btn {
    width: 100%;
    padding: 0.55rem 0.8rem;
    font-size: 0.75rem;
  }
}

/* Undo/Redo Controls */
.undo-redo-controls {
  display: flex;
  gap: 0.4rem;
  align-items: center;
}

.undo-redo-btn {
  background: linear-gradient(135deg, #1b242e 0%, #151c24 100%);
  border: 1px solid #1f2a36;
  color: #d2d7dc;
  padding: 0.45rem 0.7rem 0.5rem;
  border-radius: 8px;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.2s ease;
}

.undo-redo-btn:not(:disabled):hover {
  background: linear-gradient(135deg, #1f2a35 0%, #1a1f27 100%);
  border-color: #2b3a46;
  color: #ffb347;
  transform: translateY(-1px);
}

.undo-redo-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  filter: grayscale(0.8);
}

.undo-redo-btn:focus-visible {
  outline: 2px solid #ffb347;
  outline-offset: 2px;
  border-radius: 6px;
}

/* Gradient Enhancements */
.card-gradient {
  background: linear-gradient(135deg, rgba(255, 179, 71, 0.05) 0%, rgba(90, 214, 125, 0.03) 100%);
}

.gradient-accent-subtle {
  background: linear-gradient(135deg, #ffb347 0%, #ffd27f 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.gradient-button {
  background: linear-gradient(135deg, #ffb347 0%, #ff8a2a 100%);
  color: #111;
  font-weight: 700;
}

.gradient-button:hover:not(:disabled) {
  filter: brightness(1.08) drop-shadow(0 4px 12px rgba(255, 179, 71, 0.4));
}

/* Enhanced Micro-interactions */
.button-hover-lift {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.button-hover-lift:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px -6px rgba(0, 0, 0, 0.6);
}

.glow-on-hover {
  transition: filter 0.3s ease, box-shadow 0.3s ease;
}

.glow-on-hover:hover:not(:disabled) {
  filter: drop-shadow(0 0 8px rgba(255, 179, 71, 0.5));
  box-shadow: 0 0 16px -4px rgba(255, 179, 71, 0.3);
}

.ripple-effect {
  position: relative;
  overflow: hidden;
}

.ripple-effect::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.ripple-effect:active::after {
  animation: ripple 0.6s ease-out;
}

@keyframes ripple {
  to {
    width: 300px;
    height: 300px;
    opacity: 0;
  }
}

@media (prefers-reduced-motion: reduce) {
  .bulk-actions-bar {
    animation: none;
  }

  .undo-redo-btn,
  .bulk-action-btn {
    transition: none;
  }

  .ripple-effect::after {
    display: none;
  }
}
@keyframes revampGlow { 0%,100% { filter:drop-shadow(0 0 0 rgba(255,179,71,0)); } 50% { filter:drop-shadow(0 0 10px rgba(255,179,71,.55)); } }
.categorize-btn.revamp-cat.is-loading .cat-label { opacity:0; }
.categorize-btn.revamp-cat.is-loading { cursor:progress; }
.categorize-btn.revamp-cat .cat-spinner { width:18px; height:18px; border:3px solid rgba(255,255,255,.15); border-top-color:#ffb347; border-radius:50%; animation:spin 1s linear infinite; }
@media (prefers-reduced-motion: reduce){ .categorize-btn.revamp-cat.needs-action { animation:none; } .categorize-btn.revamp-cat .cat-spinner { animation:none; } }
.ai-switch.bigger { transform:scale(1.18); transform-origin:left center; }
.ai-privacy-note { font-size:.55rem; font-weight:600; text-transform:uppercase; letter-spacing:.8px; opacity:.85; display:flex; gap:.3rem; flex-wrap:wrap; background:linear-gradient(90deg, rgba(0,160,255,.08), rgba(0,255,200,.08)); padding:.25rem .55rem .3rem; border-radius:.85rem; line-height:1.1; border:1px solid rgba(255,255,255,.07); }
.ai-privacy-note .kw-local { color:#39c6ff; font-weight:700; }
.ai-privacy-note .kw-private { color:#90e0ff; font-weight:650; }
.ai-privacy-note .kw-offline { color:#5dd3b0; font-weight:650; }
.ai-privacy-note .kw-stays { color:#ffd166; font-weight:650; }
@media (prefers-reduced-motion: reduce){ .categorize-btn.inline.large.needs-action { animation:none; } }

/* Categorize explanation micro-note */
.cat-note-mini { font-size:.48rem; letter-spacing:.08em; text-transform:uppercase; font-weight:600; color:#9fb1bd; background:#182029; border:1px solid #25323a; padding:.25rem .45rem .3rem; border-radius:999px; line-height:1.1; display:inline-flex; align-items:center; gap:.35rem; margin-left:.35rem; max-width:220px; white-space:nowrap; }
.cat-note-mini:before { content:"ℹ"; font-size:.55rem; color:#ffb347; font-weight:700; }
@media (max-width: 640px){
  .cat-note-mini { display:none; }
}
/* Tooltip version for categorize info */
.cat-info-btn { background:#1b242e; border:1px solid #27323d; display:inline-flex; align-items:center; justify-content:center; border-radius:9px; cursor:pointer; padding:.55rem .55rem .6rem; position:relative; color:#ffb347; font-size:.68rem; font-weight:700; transition:background .25s, border-color .25s, color .25s; line-height:1; min-width:32px; }
.cat-info-btn .icon { line-height:1; display:inline-block; }
.cat-info-btn:hover, .cat-info-btn:focus-visible { background:#223240; border-color:#304150; }

/* ------------------------------------------------------------ */
/* Unified Button System (interactive vs static differentiation) */
/* ------------------------------------------------------------ */
:root {
  --btn-bg:#19222c;
  --btn-bg-alt:#1d2731;
  --btn-border:#2c3845;
  --btn-hover:#22303c;
  --btn-active:#19242d;
  --btn-radius:10px;
  --btn-focus-ring:0 0 0 2px #0f1115,0 0 0 4px #ffb347;
}

/* Base interactive surface (applies additive styling without clobbering existing custom gradients) */
button,
.primary-cta,
.secondary-cta,
.upload-btn,
.download-btn,
.clear-filters,
.col-toggle-btn,
.chip,
.categorize-btn.inline,
.categorize-btn.revamp-cat,
.ai-pill-toggle,
.dev-link,
.repo-link,
.settings-panel button,
.primary-actions button,
.more-actions button,
.tour-btn,
.reset-btn {
  position:relative;
  cursor:pointer;
  font-family:inherit;
  -webkit-user-select:none;
  user-select:none;
  isolation:isolate; /* so pseudo elements layer cleanly */
}

/* Unify subtle inner highlight & outline for focusable interactive controls */
button:not(.plain)::before,
.primary-cta::before,
.secondary-cta::before,
.upload-btn::before,
.download-btn::before,
.clear-filters::before,
.col-toggle-btn::before,
.chip::before,
.categorize-btn.inline::before,
.categorize-btn.revamp-cat::before,
.ai-pill-toggle::before,
.dev-link::before,
.repo-link::before,
.settings-panel button::before,
.primary-actions button::before,
.more-actions button::before,
.tour-btn::before,
.reset-btn::before {
  content:"";
  position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,0) 55%);
  mix-blend-mode:overlay; opacity:.28; transition:opacity .25s;
}

/* Hover / active emphasis (keeps existing color schemes) */
button:hover:not([disabled])::before,
.primary-cta:hover::before,
.secondary-cta:hover::before,
.upload-btn:hover::before,
.download-btn:hover::before,
.clear-filters:hover::before,
.col-toggle-btn:hover::before,
.chip:hover::before,
.categorize-btn.inline:hover::before,
.categorize-btn.revamp-cat:hover::before,
.ai-pill-toggle:hover::before,
.dev-link:hover::before,
.repo-link:hover::before,
.settings-panel button:hover::before,
.primary-actions button:hover::before,
.more-actions button:hover::before,
.tour-btn:hover::before,
.reset-btn:hover::before { opacity:.45; }

/* Standard focus ring (do not override bespoke ones already defined) */
button:focus-visible:not(.primary-cta):not(.categorize-btn):not(.upload-btn),
.secondary-cta:focus-visible,
.download-btn:focus-visible,
.clear-filters:focus-visible,
.col-toggle-btn:focus-visible,
.chip:focus-visible,
.ai-pill-toggle:focus-visible,
.dev-link:focus-visible,
.repo-link:focus-visible,
.tour-btn:focus-visible,
.reset-btn:focus-visible { box-shadow:var(--btn-focus-ring); outline:none; }

/* Harmonized secondary controls (keep primary CTAs bespoke) */
.filters-toggle,
.settings-btn,
.clear-filters,
.toggle-features,
.download-btn,
.reset-btn,
.btn {
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--text-base);
  border-radius: var(--btn-radius);
  box-shadow: 0 3px 8px -5px rgba(0,0,0,.6), 0 1px 0 rgba(255,255,255,.02) inset;
  text-transform: uppercase;
  letter-spacing: .07em;
  font-weight: 600;
}

.chip,
.col-toggle-btn,
.ai-pill-toggle {
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--text-base);
  box-shadow: 0 3px 8px -6px rgba(0,0,0,.6), 0 1px 0 rgba(255,255,255,.02) inset;
}

.filters-toggle:hover,
.settings-btn:hover,
.clear-filters:hover,
.toggle-features:hover,
.download-btn:hover,
.reset-btn:hover,
.btn:hover,
.chip:hover,
.col-toggle-btn:hover,
.ai-pill-toggle:hover {
  background: var(--btn-hover);
  border-color: rgba(255,255,255,0.16);
}

.filters-toggle:active,
.settings-btn:active,
.clear-filters:active,
.toggle-features:active,
.download-btn:active,
.reset-btn:active,
.btn:active {
  background: var(--btn-active);
  transform: translateY(1px);
}

.chip.active {
  background: #ffb347;
  color: #111;
  border-color: #ffb347;
  box-shadow: 0 2px 6px rgba(255,179,71,0.4);
}

.col-toggle-btn.active {
  background: linear-gradient(135deg,#253027 0%,#2d3a31 60%);
  border-color: #355041;
  color: #e6ecef;
  box-shadow: 0 4px 12px -5px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.04) inset;
}

.ai-pill-toggle.active {
  background: linear-gradient(135deg,#253027 0%,#2d3a31 60%);
  border-color: #355041;
  color: #f0f5f6;
  box-shadow: 0 4px 12px -5px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.05) inset;
}

/* Static bubbles: deliberately flatter & non-interactive look */
.value-grid .val-item,
.use-cases,
.trust-badges,
.recent-files,
.metric,
.sample-preview,
.dev-card,
.filters.consolidated,
.settings-panel,
.table-wrapper,
.charts-row .chart {
  box-shadow:0 1px 2px rgba(0,0,0,.4); /* softer */
  filter:saturate(.9);
}

/* Remove accidental pointer if any static containers inherit it */
.value-grid .val-item,
.use-cases,
.trust-badges,
.recent-files,
.metric,
.sample-preview,
.dev-card,
.charts-row .chart { cursor:default; }

/* Chips & toggles alignment tweak (ensure consistent height) */
.chip, .col-toggle-btn, .ai-pill-toggle { line-height:1.05; }

/* Distinguish links inside dev-card from buttons */
.dev-card .dev-link { box-shadow:0 0 0 1px rgba(255,255,255,.05) inset; }
.dev-card .dev-link:hover { box-shadow:0 0 0 1px rgba(255,255,255,.15) inset; }

.cat-info-tooltip { position:absolute; z-index:1200; background:#161d25; border:1px solid #24303d; padding:.55rem .7rem .6rem; border-radius:10px; font-size:.58rem; line-height:1.3; width:220px; color:#c9d2d9; box-shadow:0 8px 22px -8px rgba(0,0,0,.65); transform:translateY(6px); opacity:0; pointer-events:none; transition:opacity .25s, transform .25s; margin-left:.25rem; }
.cat-info-tooltip strong { color:#ffb347; font-size:.6rem; letter-spacing:.06em; text-transform:uppercase; }
/* Show tooltip on hover/focus (adjacent sibling) */
.cat-info-btn:hover + .cat-info-tooltip,
.cat-info-btn:focus + .cat-info-tooltip,
.cat-info-btn:focus-visible + .cat-info-tooltip { opacity:1; transform:translateY(0); }
/* Wrapper to keep tooltip positioned when moved left of button */
/* Themed compact dropdown button (used for inline help/info next to controls) */
.dropdown-btn { background:linear-gradient(135deg,#1d2b33 0%,#23323b 70%); border:1px solid #2f3a41; color:#d7dde2; padding:.38rem .6rem .42rem; border-radius:9px; font-size:.56rem; letter-spacing:.07em; font-weight:700; text-transform:uppercase; cursor:pointer; position:relative; line-height:1; box-shadow:0 3px 8px -4px rgba(0,0,0,.55), 0 1px 0 rgba(255,255,255,.04) inset; transition:background .25s, box-shadow .25s, transform .2s, border-color .25s, color .25s; }
.dropdown-btn.compact { padding:.32rem .5rem .36rem; font-size:.54rem; }
.dropdown-btn:hover { background:linear-gradient(135deg,#23323b 0%,#2b3c46 70%); box-shadow:0 5px 14px -6px rgba(0,0,0,.65), 0 1px 0 rgba(255,255,255,.05) inset; }
.dropdown-btn:active { transform:translateY(1px); }
.dropdown-btn:focus-visible { outline:none; box-shadow:0 0 0 2px #0f1115, 0 0 0 4px #ffb347; }
.dropdown-btn:after { content:"▾"; position:absolute; right:.38rem; top:50%; transform:translateY(-50%); font-size:.62rem; opacity:.85; }
.dropdown-btn.open:after { content:"▴"; }
.dropdown-btn.neutral { background:#19222c; border-color:#2c3845; }
.dropdown-btn.neutral:hover { background:#1f2a35; }
/* Align within categorize cluster primary row */
.categorize-cluster .dropdown-btn.compact { height:32px; display:inline-flex; align-items:center; padding:.18rem .6rem; }
.cat-info-wrap { position:relative; display:inline-flex; align-items:center; }
.cat-info-wrap .cat-info-tooltip { left:0; top:100%; }
/* Tighten spacing so info icon hugs the categorize button */
.categorize-inline.mini .cat-info-wrap { margin-right:-.15rem; }
@media (hover:none){ .cat-info-btn:active + .cat-info-tooltip { opacity:1; transform:translateY(0); } }
@media (prefers-reduced-motion: reduce){ .cat-info-tooltip { transition:none; } }

/* Upload warning alert */
.upload-warning { 
  margin-top: 0.75rem; 
  background: linear-gradient(135deg,#3b2f1a,#5a4217 60%,#7a5510);
  border: 1px solid #a76b18;
  color: #f6d9a4;
  padding: 0.75rem 1rem 0.75rem 1rem;
  border-radius: 8px;
  font-size: 0.85rem;
  position: relative;
  box-shadow: 0 2px 6px -2px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,200,120,0.08) inset;
}
.upload-warning ul { list-style: disc; margin: 0 0 0.25rem 1.1rem; padding: 0; }
.upload-warning li { line-height: 1.25; margin: 0.2rem 0; }
.dismiss-upload-warning { 
  position: absolute; top: 4px; right: 6px; 
  background: rgba(0,0,0,0.25); 
  border: 1px solid rgba(255,255,255,0.15);
  color: #f6d9a4; 
  width: 22px; height: 22px; 
  border-radius: 6px; 
  cursor: pointer; 
  font-size: 0.9rem; 
  line-height: 1; 
  display: flex; align-items: center; justify-content: center; 
  transition: background .2s, color .2s, border-color .2s;
}
.dismiss-upload-warning:hover { background: #a76b18; color: #fff; border-color: #f6d9a4; }
.dismiss-upload-warning:focus { outline: 2px solid #f6d9a4; outline-offset: 2px; }
/* Supported note relocated from bottom info list */
.supported-note { font-size:.55rem; letter-spacing:.07em; text-transform:uppercase; opacity:.55; margin-top:.5rem; }
.supported-note .muted { text-transform:none; letter-spacing:normal; opacity:.7; }

/* Tagline moved beside upload (left column) when on cover */
.global-tagline.moved { margin:0 0 .9rem; text-align:left; font-size:.75rem; line-height:1.35; max-width:520px; opacity:.9; }
@media (max-width:620px){ .global-tagline.moved { font-size:.72rem; } }
@media (max-width:480px){ .global-tagline.moved { font-size:.68rem; } }
/* Relocated privacy pill inside trust panel (now plain inline – bubble removed) */
.trust-badges .privacy-pill.relocated { 
  margin:.2rem 0 .35rem; 
  background:none; 
  border:none; 
  padding:0; 
  border-radius:0; 
  font-size:.6rem; 
  letter-spacing:.025em; 
  text-transform:none; 
  font-weight:600; 
  display:flex; 
  align-items:center; 
  gap:.35rem; 
  color:var(--text-base); 
  box-shadow:none; 
}
.trust-badges .privacy-pill.relocated .lock { font-size:.75rem; filter:drop-shadow(0 0 2px rgba(255,179,71,.25)); }

/* ===== AI STATUS INDICATOR ===== */
.ai-status-pill {
  margin-left: auto;
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  padding: .25rem .6rem;
  border-radius: 999px;
  font-size: .58rem;
  letter-spacing: .08em;
  text-transform: uppercase;
  font-weight: 700;
  border: 1px solid #2b3743;
  color: var(--text-muted);
  background: #121820;
  box-shadow: 0 1px 0 rgba(255,255,255,.03) inset;
}

.ai-status-ok {
  border-color: #2b5a3a;
  color: #5ad67d;
  background: rgba(90, 214, 125, 0.08);
}

.ai-status-warn {
  border-color: #5a4a2b;
  color: #ffb347;
  background: rgba(255, 179, 71, 0.08);
}

.ai-status-error {
  border-color: #5a2b2b;
  color: #ff6b6b;
  background: rgba(255, 107, 107, 0.08);
}

.ai-status-off,
.ai-status-offline {
  border-color: #2b2f36;
  color: var(--text-muted);
  background: rgba(255, 255, 255, 0.04);
}

.ai-status-pending {
  border-color: #2b3743;
  color: #9ec9ff;
  background: rgba(110, 168, 255, 0.08);
}

@media (max-width: 900px) {
  .ai-status-pill {
    font-size: .54rem;
    padding: .22rem .5rem;
  }
}

@media (max-width: 640px) {
  .ai-status-pill {
    margin-left: 0;
  }
}

/* ===== UNIFIED FINANCIAL PANEL ===== */
.unified-financial-panel {
  background: radial-gradient(circle at 15% 0%, rgba(255,179,71,0.12), transparent 45%),
    linear-gradient(135deg, #1b2430 0%, #121820 100%);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: var(--panel-radius);
  padding: 0.85rem 0.95rem 0.95rem;
  margin-bottom: 1rem;
  box-shadow: 0 10px 20px -14px rgba(0,0,0,.65), 0 2px 6px rgba(0,0,0,.35);
  position: relative;
  overflow: hidden;
}

.unified-financial-panel::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--panel-radius);
  background: radial-gradient(circle at 82% 12%, rgba(77,183,255,.14), transparent 55%);
  pointer-events: none;
}

.unified-financial-panel::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, rgba(255,179,71,0.85), rgba(90,214,125,0.85), rgba(77,183,255,0.85));
  opacity: 0.55;
  pointer-events: none;
}

.panel-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
  position: relative;
  z-index: 1;
}

.panel-title-block {
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
}

.panel-title {
  font-size: 0.82rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  font-weight: 700;
  color: #ffb347;
  margin: 0;
}

.panel-subtitle {
  font-size: 0.62rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--text-muted);
  font-weight: 600;
}

.panel-meta {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.35rem 0.5rem;
  justify-content: flex-end;
}

.panel-count {
  font-size: 0.62rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--text-muted);
  font-weight: 600;
}

.panel-badge {
  font-size: var(--badge-font-size);
  letter-spacing: var(--badge-letter-spacing);
  text-transform: uppercase;
  font-weight: 700;
  color: #ffb347;
  border: 1px solid rgba(255,179,71,0.35);
  background: rgba(255,179,71,0.1);
  padding: var(--badge-padding-y) var(--badge-padding-x);
  border-radius: 999px;
}

.panel-badge.warn {
  color: #ff6b6b;
  border-color: rgba(255,107,107,0.35);
  background: rgba(255,107,107,0.12);
}

/* Primary Metrics Grid (4 columns) */
.financial-grid {
  display: grid;
  gap: 0.65rem;
  position: relative;
  z-index: 1;
}

.financial-grid.primary-row {
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  margin-bottom: 0.85rem;
}

.metric-card {
  background: linear-gradient(160deg, rgba(25,33,43,0.9) 0%, rgba(12,16,22,0.95) 100%);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: calc(var(--panel-radius) + 2px);
  padding: 0.75rem 0.8rem 0.8rem;
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  box-shadow: 0 6px 12px -8px rgba(0,0,0,.7), 0 1px 0 rgba(255,255,255,.02) inset;
  position: relative;
  transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
}

.metric-card::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 2px;
  border-radius: calc(var(--panel-radius) + 2px) calc(var(--panel-radius) + 2px) 0 0;
  background: linear-gradient(90deg, rgba(255,179,71,0.9), rgba(77,183,255,0.4));
  opacity: 0.55;
}

.metric-card:hover {
  border-color: rgba(255,255,255,0.16);
  box-shadow: 0 10px 18px -12px rgba(0,0,0,.75), 0 1px 0 rgba(255,255,255,.04) inset;
  transform: translateY(-2px);
}

.metric-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.metric-label {
  font-size: 0.66rem;
  letter-spacing: 0.09em;
  text-transform: uppercase;
  font-weight: 700;
  color: var(--text-muted);
}

.metric-chip {
  font-size: 0.5rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  font-weight: 700;
  padding: 0.14rem 0.38rem;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.1);
  color: var(--text-base);
  background: rgba(255,255,255,0.06);
}

.metric-chip.positive {
  color: #5ad67d;
  border-color: rgba(90,214,125,0.3);
  background: rgba(90,214,125,0.12);
}

.metric-chip.negative {
  color: #ff6b6b;
  border-color: rgba(255,107,107,0.3);
  background: rgba(255,107,107,0.12);
}

.metric-chip.accent {
  color: #9d7ef7;
  border-color: rgba(157,126,247,0.3);
  background: rgba(157,126,247,0.12);
}

.metric-chip.neutral {
  color: #4db7ff;
  border-color: rgba(77,183,255,0.3);
  background: rgba(77,183,255,0.12);
}

.metric-value {
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--text-strong);
  font-variant-numeric: tabular-nums;
}

.metric-card.inflow-card .metric-value {
  color: #5ad67d;
}

.metric-card.outflow-card .metric-value {
  color: #ff6b6b;
}

.metric-card.net-card .metric-value {
  background: linear-gradient(90deg, #5ad67d 0%, #37b468 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.metric-card.average-card .metric-value {
  color: #9d7ef7;
}

.metric-foot {
  font-size: 0.58rem;
  letter-spacing: 0.04em;
  color: var(--text-muted);
  opacity: 0.75;
  min-height: 1.1rem;
  margin-top: auto;
}

/* Secondary Stats Grid (5 columns) */
.financial-grid.secondary-row {
  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
}

.stat-pill {
  background: rgba(15,20,26,0.9);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 999px;
  padding: 0.45rem 0.7rem;
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
  text-align: center;
  transition: transform .2s ease, border-color .2s ease, box-shadow .2s ease;
}

.stat-pill:hover {
  border-color: rgba(255,255,255,0.16);
  box-shadow: 0 6px 12px -10px rgba(0,0,0,.65);
  transform: translateY(-1px);
}

.stat-label {
  font-size: .58rem;
  letter-spacing: .06em;
  text-transform: uppercase;
  font-weight: 700;
  color: var(--text-muted);
}

.stat-value {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--text-strong);
  font-variant-numeric: tabular-nums;
}

.stat-value.positive {
  color: #5ad67d;
}

.stat-value.negative {
  color: #ff6b6b;
}

.stat-pill.inflow-highlight {
  border-color: rgba(90,214,125,0.35);
  background: rgba(90,214,125,0.12);
}

.stat-pill.outflow-highlight {
  border-color: rgba(255,107,107,0.35);
  background: rgba(255,107,107,0.12);
}

.stat-pill.total-highlight {
  border-color: rgba(157,126,247,0.35);
  background: rgba(157,126,247,0.12);
}

/* Responsive Breakpoints */
@media (max-width: 1024px) {
  .financial-grid.primary-row {
    grid-template-columns: repeat(2, 1fr);
  }

  .financial-grid.secondary-row {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 768px) {
  .unified-financial-panel {
    padding: 0.95rem;
    margin-bottom: 1rem;
  }

  .financial-grid {
    gap: 0.6rem;
  }

  .financial-grid.primary-row {
    grid-template-columns: repeat(2, 1fr);
    margin-bottom: 1rem;
  }

  .metric-card {
    padding: 0.7rem;
  }

  .metric-value {
    font-size: 1.1rem;
  }
}

@media (max-width: 640px) {
  .unified-financial-panel {
    padding: 0.85rem;
  }

  .panel-title {
    font-size: 0.78rem;
  }

  .panel-subtitle,
  .panel-count {
    font-size: 0.58rem;
  }

  .financial-grid.primary-row {
    grid-template-columns: 1fr;
    margin-bottom: 0.8rem;
  }

  .financial-grid.secondary-row {
    grid-template-columns: repeat(2, 1fr);
  }

  .metric-card,
  .stat-pill {
    padding: 0.55rem 0.6rem;
  }

  .metric-value {
    font-size: 1rem;
  }

  .stat-value {
    font-size: 0.82rem;
  }
}

/* Consistent card surfaces across the dashboard */
.card,
.panel,
.recent-card,
.shortcuts-card,
.dev-card,
.settings-panel,
.summary-card,
.insights-panel,
.sample-preview,
.use-cases,
.trust-badges,
.value-grid,
.value-grid.merged,
.table-wrapper,
.table-empty-message,
.filters.consolidated,
.filters-advanced,
.categorize-cluster,
.quick-stats,
.chart-notes,
.upload-panel {
  background: var(--card-surface-bg);
  border: 1px solid var(--card-surface-border);
  border-radius: var(--panel-radius);
  box-shadow: var(--card-surface-shadow);
}
